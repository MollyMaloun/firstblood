(self.webpackChunkvk=self.webpackChunkvk||[]).push([[45958],{540249:(_,e,i)=>{"use strict";i.d(e,{default:()=>o});const o=(0,i(379333).makeIcon)("Icon16Chevron","chevron_16","0 0 12 16",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 12 16" id="chevron_16"><path fill="currentColor" d="M7.227 8 3.864 4.636a.9.9 0 0 1 1.272-1.272l4 4a.9.9 0 0 1 0 1.272l-4 4a.9.9 0 0 1-1.272-1.272L7.227 8Z" /></symbol>',12,16)},492867:(_,e,i)=>{"use strict";i.d(e,{default:()=>o});const o=(0,i(379333).makeIcon)("Icon24ChevronLeft","chevron_left_24","0 0 24 24",'<symbol fill="none" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" id="chevron_left_24"><path d="M15.884 18.116a1.25 1.25 0 0 1-1.768 1.768l-7-7a1.25 1.25 0 0 1 0-1.768l7-7a1.25 1.25 0 0 1 1.768 1.768L9.768 12z" fill="currentColor" /></symbol>',24,24)},495707:(_,e,i)=>{"use strict";i.d(e,{default:()=>o});const o=(0,i(379333).makeIcon)("Icon24Done","done_24","0 0 24 24",'<symbol viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" id="done_24"><g fill="none" fill-rule="evenodd"><path d="M0 0h24v24H0z" /><path d="m9 16.2-3.5-3.5a.99.99 0 1 0-1.4 1.4l4.193 4.193a1 1 0 0 0 1.414 0L20.3 7.7a.99.99 0 0 0-1.4-1.4L9 16.2Z" fill="currentColor" /></g></symbol>',24,24)},661737:(_,e,i)=>{"use strict";i.d(e,{default:()=>o});const o=(0,i(379333).makeIcon)("Icon24Qr","qr_24","0 0 24 24",'<symbol viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" id="qr_24"><g fill="none" fill-rule="evenodd"><path d="M0 0h24v24H0z" /><path d="M19.5 19H21a.5.5 0 0 1 .5.5V21a.5.5 0 0 1-.5.5h-1.5a.5.5 0 0 1-.5-.5v-1.5a.5.5 0 0 1 .5-.5ZM14 19h1.5a.5.5 0 0 1 .5.5V21a.5.5 0 0 1-.5.5H14a.5.5 0 0 1-.5-.5v-1.5a.5.5 0 0 1 .5-.5Zm2.75-2.75h1.5a.5.5 0 0 1 .5.5v1.5a.5.5 0 0 1-.5.5h-1.5a.5.5 0 0 1-.5-.5v-1.5a.5.5 0 0 1 .5-.5Zm2.75-2.75H21a.5.5 0 0 1 .5.5v1.5a.5.5 0 0 1-.5.5h-1.5a.5.5 0 0 1-.5-.5V14a.5.5 0 0 1 .5-.5Zm-5.5 0h1.5a.5.5 0 0 1 .5.5v1.5a.5.5 0 0 1-.5.5H14a.5.5 0 0 1-.5-.5V14a.5.5 0 0 1 .5-.5ZM4.5 13h4a2.5 2.5 0 0 1 2.5 2.5v4A2.5 2.5 0 0 1 8.5 22h-4A2.5 2.5 0 0 1 2 19.5v-4A2.5 2.5 0 0 1 4.5 13Zm.25 1.75a1 1 0 0 0-1 1v3.5a1 1 0 0 0 1 1h3.5a1 1 0 0 0 1-1v-3.5a1 1 0 0 0-1-1h-3.5Zm1 1.5h1.5a.5.5 0 0 1 .5.5v1.5a.5.5 0 0 1-.5.5h-1.5a.5.5 0 0 1-.5-.5v-1.5a.5.5 0 0 1 .5-.5ZM15.5 2h4A2.5 2.5 0 0 1 22 4.5v4a2.5 2.5 0 0 1-2.5 2.5h-4A2.5 2.5 0 0 1 13 8.5v-4A2.5 2.5 0 0 1 15.5 2Zm.25 1.75a1 1 0 0 0-1 1v3.5a1 1 0 0 0 1 1h3.5a1 1 0 0 0 1-1v-3.5a1 1 0 0 0-1-1h-3.5Zm1 1.5h1.5a.5.5 0 0 1 .5.5v1.5a.5.5 0 0 1-.5.5h-1.5a.5.5 0 0 1-.5-.5v-1.5a.5.5 0 0 1 .5-.5ZM4.5 2h4A2.5 2.5 0 0 1 11 4.5v4A2.5 2.5 0 0 1 8.5 11h-4A2.5 2.5 0 0 1 2 8.5v-4A2.5 2.5 0 0 1 4.5 2Zm.25 1.75a1 1 0 0 0-1 1v3.5a1 1 0 0 0 1 1h3.5a1 1 0 0 0 1-1v-3.5a1 1 0 0 0-1-1h-3.5Zm1 1.5h1.5a.5.5 0 0 1 .5.5v1.5a.5.5 0 0 1-.5.5h-1.5a.5.5 0 0 1-.5-.5v-1.5a.5.5 0 0 1 .5-.5Z" fill="currentColor" /></g></symbol>',24,24)},928396:(_,e,i)=>{"use strict";i.d(e,{default:()=>o});const o=(0,i(379333).makeIcon)("Icon56LockOutline","lock_outline_56","0 0 56 56",'<symbol fill="none" viewBox="0 0 56 56" xmlns="http://www.w3.org/2000/svg" id="lock_outline_56"><g fill="currentColor"><path d="M28 31a3 3 0 0 0-1.5 5.599V39.5a1.5 1.5 0 0 0 3 0v-2.901A2.999 2.999 0 0 0 28 31z" /><path clip-rule="evenodd" d="M28 4c-6.075 0-11 4.925-11 11v5.04c-.36.015-.7.034-1.02.06-1.26.103-2.344.32-3.339.826a8.5 8.5 0 0 0-3.715 3.715c-.507.996-.723 2.08-.826 3.34C8 29.208 8 30.73 8 32.634v6.73c0 1.905 0 3.426.1 4.655.103 1.26.32 2.344.826 3.339a8.5 8.5 0 0 0 3.715 3.715c.995.507 2.08.723 3.34.826 1.228.1 2.749.1 4.654.1h14.73c1.905 0 3.426 0 4.655-.1 1.26-.103 2.343-.32 3.339-.826a8.5 8.5 0 0 0 3.715-3.715c.507-.995.723-2.08.826-3.34.1-1.228.1-2.749.1-4.654v-6.73c0-1.905 0-3.426-.1-4.655-.103-1.26-.32-2.343-.826-3.339a8.5 8.5 0 0 0-3.715-3.715c-.996-.507-2.08-.723-3.34-.826-.319-.026-.658-.045-1.019-.06V15c0-6.075-4.925-11-11-11zm-8 11a8 8 0 1 1 16 0v5H20zm-5.997 8.6c.502-.256 1.147-.422 2.222-.51 1.092-.089 2.49-.09 4.475-.09h14.6c1.985 0 3.383.001 4.476.09 1.074.088 1.719.254 2.221.51a5.5 5.5 0 0 1 2.404 2.403c.255.502.42 1.147.509 2.222.089 1.092.09 2.49.09 4.475v6.6c0 1.985-.001 3.383-.09 4.476-.088 1.074-.254 1.719-.51 2.221a5.5 5.5 0 0 1-2.403 2.404c-.502.255-1.147.42-2.222.509-1.092.089-2.49.09-4.475.09H20.7c-1.985 0-3.383-.001-4.475-.09-1.075-.088-1.72-.254-2.222-.51a5.5 5.5 0 0 1-2.404-2.403c-.255-.502-.42-1.147-.509-2.222-.089-1.092-.09-2.49-.09-4.475v-6.6c0-1.985.001-3.383.09-4.475.088-1.075.254-1.72.51-2.222a5.5 5.5 0 0 1 2.403-2.404z" fill-rule="evenodd" /></g></symbol>',56,56)},395424:(_,e,i)=>{"use strict";function o(){return{icon:'<svg width="12" height="12" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6.75 1.75a.75.75 0 0 0-1.5 0v3.5h-3.5a.75.75 0 0 0 0 1.5h3.5v3.5a.75.75 0 0 0 1.5 0v-3.5h3.5a.75.75 0 0 0 0-1.5h-3.5v-3.5z" fill="currentColor"/></svg>',name:"add_12"}}i.d(e,{getIcon12Add:()=>o})},663681:(_,e,i)=>{"use strict";function o(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 20 20"><path fill="currentColor" fill-rule="evenodd" d="M3.72 5.22a.75.75 0 0 1 1.06 0l2.5 2.5a.75.75 0 1 1-1.06 1.06L5 7.56v1.9c0 .84 0 1.44.04 1.9.04.45.1.71.2.91.22.43.57.77.99.99.2.1.46.17.91.2.46.04 1.06.04 1.91.04h1.2a.75.75 0 0 1 0 1.5H9.02c-.82 0-1.47 0-2-.04a3.85 3.85 0 0 1-1.47-.37 3.75 3.75 0 0 1-1.64-1.64 3.84 3.84 0 0 1-.37-1.47c-.04-.53-.04-1.18-.04-2V7.56L2.28 8.78a.75.75 0 1 1-1.06-1.06zm9.14 1.32c-.46-.04-1.06-.04-1.91-.04h-1.2a.75.75 0 1 1 0-1.5h1.23c.81 0 1.47 0 2 .04.55.05 1.03.14 1.47.37a3.75 3.75 0 0 1 1.64 1.64c.23.44.32.92.37 1.47.04.53.04 1.19.04 2v1.92l1.22-1.22a.75.75 0 0 1 1.06 1.06l-2.5 2.5a.75.75 0 0 1-1.06 0l-2.5-2.5a.75.75 0 0 1 1.06-1.06L15 12.44v-1.89c0-.85 0-1.45-.04-1.9a2.4 2.4 0 0 0-.2-.92 2.25 2.25 0 0 0-.99-.98 2.4 2.4 0 0 0-.91-.21z" clip-rule="evenodd"/></svg>',name:"arrow_2_squarepath_outline_20"}}i.d(e,{getIcon20Arrow2SquarepathOutline:()=>o})},700521:(_,e,i)=>{"use strict";function o(){return{icon:'<svg fill="none" height="20" viewBox="0 0 20 20" width="20" xmlns="http://www.w3.org/2000/svg"><path clip-rule="evenodd" d="M5.5 8a4.5 4.5 0 0 1 9 0v1.67c0 .3.1.58.3.8l1.52 1.8a.75.75 0 0 1-.57 1.23H4.25a.75.75 0 0 1-.57-1.24l1.52-1.78c.2-.23.3-.52.3-.81V8zm-1.49-.39A6 6 0 0 1 16 7.75v1.82l1.46 1.72c1.25 1.46.21 3.71-1.7 3.71h-2.08a3.75 3.75 0 0 1-7.35 0H4.25a2.25 2.25 0 0 1-1.71-3.7L4 9.56V7.75l.01-.14zM10 16.5c-.98 0-1.81-.63-2.12-1.5h4.24c-.3.87-1.14 1.5-2.12 1.5z" fill="currentColor" fill-rule="evenodd"/></svg>',name:"notification_outline_20"}}i.d(e,{getIcon20NotificationOutline:()=>o})},901504:(_,e,i)=>{"use strict";function o(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 20 20"><path fill="currentColor" d="M10 3.5c-.75 0-1.45.18-2.07.5a.75.75 0 0 1-1-.32.75.75 0 0 1 .31-1A5.97 5.97 0 0 1 10 2a6 6 0 0 1 5.98 5.61c.03.13.02.26.02.39v1.57l1.46 1.72c.43.5.65 1.22.49 1.87a.75.75 0 0 1-1.46-.34.74.74 0 0 0-.17-.56l-1.52-1.78a1.25 1.25 0 0 1-.3-.81V7.99A4.5 4.5 0 0 0 10 3.5Z"/><path fill="currentColor" fill-rule="evenodd" d="m4.52 5.57-2.3-2.29a.75.75 0 0 1 0-1.06.75.75 0 0 1 1.06 0l14.5 14.5a.75.75 0 0 1 0 1.06.75.75 0 0 1-1.06 0L13.94 15h-.27a3.75 3.75 0 0 1-7.34 0H4.25a2.25 2.25 0 0 1-1.7-3.7L4 9.56V7.75a.76.76 0 0 1 .02-.14 5.97 5.97 0 0 1 .5-2.04Zm7.92 7.93L5.68 6.74A4.5 4.5 0 0 0 5.5 8v1.67c0 .3-.1.58-.3.8l-1.52 1.8a.75.75 0 0 0 .57 1.23h8.19ZM7.88 15a2.25 2.25 0 0 0 4.24 0H7.88Z" clip-rule="evenodd"/></svg>',name:"notification_slash_outline_20"}}i.d(e,{getIcon20NotificationSlashOutline:()=>o})},924471:(_,e,i)=>{"use strict";function o(){return{icon:'<svg fill="none" height="20" viewBox="0 0 20 20" width="20" xmlns="http://www.w3.org/2000/svg"><path clip-rule="evenodd" d="M9.76 4.75c0-.2.24-.32.4-.2l6.75 5.25c.13.1.13.3 0 .4l-6.75 5.25a.25.25 0 0 1-.4-.2V12.1a.75.75 0 0 0-.75-.75c-2.46 0-4.34.92-5.83 2.2a6.97 6.97 0 0 1 1.57-3.43 7.16 7.16 0 0 1 4.38-2.22.75.75 0 0 0 .63-.75zm1.33-1.38a1.75 1.75 0 0 0-2.83 1.38v1.8a8.42 8.42 0 0 0-4.64 2.6c-1.35 1.53-2.12 3.67-2.12 6.44a.75.75 0 0 0 1.33.47c1.36-1.65 3.06-2.94 5.43-3.16v2.35a1.75 1.75 0 0 0 2.82 1.38l6.75-5.25c.9-.7.9-2.06 0-2.76z" fill="currentColor" fill-rule="evenodd"/></svg>',name:"share_outline_20"}}i.d(e,{getIcon20ShareOutline:()=>o})},979604:(_,e,i)=>{"use strict";function o(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 20 20"><path fill="currentColor" fill-rule="evenodd" d="M13.75 4c.2 0 .39.08.53.22l2.5 2.5a.75.75 0 0 1-1.06 1.06L14.5 6.56v8.69a.75.75 0 0 1-1.5 0V6.56l-1.22 1.22a.75.75 0 1 1-1.06-1.06l2.5-2.5a.75.75 0 0 1 .53-.22zm-7.5 0a.75.75 0 0 1 .75.75v8.69l1.22-1.22a.75.75 0 0 1 1.06 1.06l-2.5 2.5a.75.75 0 0 1-1.06 0l-2.5-2.5a.75.75 0 1 1 1.06-1.06l1.22 1.22V4.75A.75.75 0 0 1 6.25 4z" clip-rule="evenodd"/></svg>',name:"sort_outline_20"}}i.d(e,{getIcon20SortOutline:()=>o})},529290:(_,e,i)=>{"use strict";i.d(e,{TimeCodesList:()=>v});var o=i(924471),t=i(695724),a=i(683609),d=i(315544),l=i(786067),s=i(635676),r=i(49535),n=i(479957),v={_block:null,curTimeCodeIndex:0,tpl:'\n    <div class="TimeCodesList">\n      <div class="TimeCodesList__header">\n        <div class="TimeCodesList__headerText">%title%</div>\n        <button type="button" class="TimeCodesList__headerAction" onclick="TimeCodesList.close()">\n          %closeText%\n        </button>\n      </div>\n      <div class="TimeCodesList__container">\n        %items%\n      </div>\n    </div>',buildBlock:_=>{var e=v.buildTimeCodesList(_),i=(0,t.trim)(v.tpl),o=(0,d.se)((0,d.rs)(i,{title:(0,l.getLang)("video_n_time_codes",_.length,!0),closeText:(0,l.getLang)("video_close_time_code_list"),items:e}));return v._block=o,o},blockItemTpl:`\n<div class="TimeCodesList__item" onclick="Videoview.timeTagClick(%time%, 'list', event)">\n  <div class="TimeCodesList__itemThumbWrap">\n    <div class="TimeCodesList__itemThumb" style="\n      width: %imgWidth%px;\n      height: %imgHeight%px;\n      background-image: url(%imgSrc%);\n      background-size: %imgWidth%px %imgHeight%px;\n      background-position: %imgOffsetX%px %imgOffsetY%px">\n    </div>\n    />\n  </div>\n  <div class="TimeCodesList__itemInfo">\n    <div class="TimeCodesList__itemTitle" data-task-mouseover="Video/check_title">%text%</div>\n    <div class="TimeCodesList__itemDurationWrap">\n      <div class="TimeCodesList__itemDuration">%formattedDuration%</div>\n      <div class="TimeCodesList__itemShare" onclick="TimeCodesList.exportEpisode(%time%, event)">\n        <span class="TimeCodesList__itemShareIcon">${(0,o.getIcon20ShareOutline)().icon}</span>\n      </div>\n    </div>\n  </div>\n</div>\n  `,buildTimeCodesList(_){for(var e="",i=0;i<_.length;i++)e+=this.buildItem(_[i]);return e},buildItem(_){var e=(0,t.trim)(v.blockItemTpl),i=Videoview.getThumbFromTime(_.time),o=i.imgSrc,l=void 0===o?"":o,s=i.imgWidth,r=void 0===s?128:s,n=i.imgHeight,m=void 0===n?72:n,c=i.imgOffsetX,u=void 0===c?0:c,E=i.imgOffsetY,b=void 0===E?0:E;return(0,d.rs)(e,{text:_.text,time:_.time,imgSrc:l,imgWidth:r,imgHeight:m,imgOffsetX:u,imgOffsetY:b,formattedDuration:(0,a.formatTime)(_.time)})},getBlock(){return this._block},isShowed(){var _=document.getElementById("mv_box");return!!_&&_.classList.contains("_has_time_codes")},toggleUI:_=>{if(v._block){var e=document.getElementById("mv_box");if(e){var i=e.classList.contains("_has_time_codes");e.classList.toggle("_has_time_codes",!i||_)}}},close:()=>{v.toggleUI(),Videoview.onResize()},destroy:()=>{v._block&&((0,d.re)(v._block),v._block=null,v.curTimeCodeIndex=0,(0,d.removeClass)("mv_box","_has_time_codes"))},draw:function(){var _=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!v._block){var e=Videoview.getTimeCodes(),i=v.buildBlock(e),o=document.getElementById("mv_main");o&&o.insertBefore(i,o.firstChild)}v.toggleUI(_),v.updateScrollbar()},reDraw:()=>{(0,d.re)(v._block),v._block=null;var _=Videoview.getTimeCodes(),e=v.buildBlock(_);document.getElementById("mv_main").appendChild(e),v.updateScrollbar(),v.updateCurrentTimeCode(v.curTimeCodeIndex)},updateCurrentTimeCode:_=>{var e,i=v._block;if(i&&([...i.querySelectorAll(".TimeCodesList__item")].forEach(((i,o)=>{i.classList.toggle("TimeCodesList__item--active",o===_),o===_&&(e=i,v.curTimeCodeIndex=_)})),e)){var o=(0,d.geByClass1)("TimeCodesList__container",i),t=(0,d.getXY)(e)[1],a=(0,d.getSize)(e)[1],l=(0,d.getXY)(o)[1],r=(0,d.getSize)(o)[1],n=t-l;if(n<0||n+a>r){var m=o.scrollTop+t-l-r/2+a/2;o.scrollTop!==m&&(0,s.animate)(o,{scrollTop:m,transition:s.Fx.Transitions.easeOutCubic},450,v.updateScrollbar)}}},updateScrollbar(){var _=v.getBlock();if(_){var e=(0,d.data)(_,"sb");if(e)e.update(!0,!0);else{var i=(0,d.geByClass1)("TimeCodesList__container",_),o=new Scrollbar(i,{prefix:"mv_tc_",nokeys:!0,padding:0});(0,d.data)(_,"sb",o)}}},exportEpisode(_,e){var i;(0,n.statlogsValueEvent)("video_time_codes_share",""),null===(i=window.Videoview)||void 0===i||i.sendVideo(!1,_),(0,r.cancelEvent)(e)}}},555381:(_,e,i)=>{"use strict";i.d(e,{default:()=>a});var o=i(386409),t=i(654612);const a={forceStartStream(_,e,i,a){var d=new t.MessageBox({title:"Перенести трансляцию"});d.content('<input id="source_video_id" placeholder="Исходный video_id"> </input>'),d.addButton("Перенести",(l=>{var s=document.getElementById("source_video_id").value;ajax.post("al_video.php",{act:"admin_action",action:"force_start_stream",owner_id:_,user_id:e,video_id:i,src_video_id:s,hash:a},{onDone:function(_){d.hide();var e=new t.MessageBox({title:"Статус операции"});e.content(_),e.show()},onFail:function(_){d.hide();var e=new t.MessageBox({title:"Статус операции"});e.content(_),e.show()},showProgress:()=>(0,o.lockButton)(l),hideProgress:()=>(0,o.unlockButton)(l)})})),d.show()}}},929681:(_,e,i)=>{"use strict";i.d(e,{ModerActions:()=>r});var o=i(386409),t=i(786067),a=i(486125),d=i(315544),l=i(695724),s=i(654612),r={action(_,e,i){if("moder_log"===e)this.showModerLogBox();else if("region_mask"===e)this.showRegionMaskBox();else if("partner_ads_settings"===e)this.showPartnerAdsSettingsBox();else{var t=(0,l.extend)({owner_id:mvcur.mvData.oid,video_id:mvcur.mvData.vid,action:e,hash:i},JSON.parse((0,d.domData)(_,"params")));ajax.post("al_video.php?act=moder_action",t,{showProgress:function(){(0,o.showProgress)(_),(0,o.disableEl)(_)},hideProgress:function(){(0,o.enableEl)(_),(0,o.hideProgress)(_)},onDone:function(e,i,t){e&&(0,d.val)(_,e),i&&(0,d.domData)(_,"params",i),t&&(0,o.lockLink)(_)}})}},pin(){var _=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=document.getElementById("mv_moder_buttons"),o=i.querySelector("._ui_menu_wrap"),t=i.querySelector(".ui_actions_menu"),a=i.querySelector(".ui_toggler"),d=i.querySelector(".ui_toggler_label");if(_&&e)for(var l=1;l<t.children.length;l++)t.insertBefore(t.children[l],t.firstChild);var s=_?ls.get("video_moder_actions_pinned"):!a.classList.contains("on");s?ls.set("video_moder_actions_pinned",1):ls.remove("video_moder_actions_pinned"),a.classList.toggle("on",s),d.innerText=s?"Unpin":"Pin",s?(uiActionsMenu.show(o,!1,{alwaysTop:!0}),o.onmouseenter=o.onmouseleave=null):(uiActionsMenu.hide(o),o.onmouseenter=function(){uiActionsMenu.show(this,!1,{alwaysTop:!0})},o.onmouseleave=function(){uiActionsMenu.hide(this)})},showModerLogBox(){(0,s.showBox)("al_video.php?act=moder_log_box",{video_raw:mvcur.videoRaw},{params:{width:600}})},showRegionMaskBox(){var _,e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r={},n=i?0:mvcur.videoRaw;function v(_){var e=_.currentTarget;(0,o.checkbox)(e)}function m(){(0,l.each)(r,((e,i)=>{(0,o.checkbox)(i,(0,l.inArray)(e,_))}))}function c(){(0,l.each)(r,((_,e)=>{(0,o.checkbox)(e,!1)}))}return(0,s.showBox)("al_video.php?act=region_mask_box",{video:n,owner_id:i},{onDone(s,u){_=u.countries_cis,e=u.save_hash;var E="";(0,l.each)(u.countries,((_,e)=>{E+=`<div class="checkbox ${e?"on":""}" style="display:inline-block;width:20%;" data-value="${_}">${_}</div>`})),E+='\n          <br><br>\n          <button class="flat_button button_small secondary _check_cis_only" style="margin-right:10px">Только СНГ</button>\n          <button class="flat_button button_small secondary _uncheck_all">Убрать ограничения</button>\n        ',s.content(E),(0,d.geByClass)("checkbox",s.bodyNode).forEach((_=>{var e=(0,d.domData)(_,"value");r[e]=_,_.onclick=v})),(0,d.domByClass)(s.bodyNode,"_check_cis_only").onclick=m,(0,d.domByClass)(s.bodyNode,"_uncheck_all").onclick=c,s.removeButtons(),s.addButton((0,t.getLang)("global_save"),(()=>{var _,s;_=i&&!n,s=[],(0,l.each)(r,((_,e)=>{(0,o.isChecked)(e)&&s.push(_)})),_?ajax.post("al_video.php?act=owner_geo_restriction_save",{owner_id:i,countries:s.join(","),hash:e},{onDone:function(_,e){var i=(0,a.curBox)();i.content(_),e&&((0,d.geByClass1)("owner_info_row_value",(0,d.ge)("video_geo_restriction")).innerHTML=e),i.removeButtons(),i.addButton((0,t.getLang)("box_close"),i.hide,"yes"),setTimeout(i.hide,1500)}}):ajax.post("al_video.php?act=region_mask_save",{video:n,countries:s.join(","),hash:e},{onDone(){(0,a.curBox)().hide()}})}))}}),!1},showPartnerAdsSettingsBox(){(0,s.showBox)("al_video.php?act=partner_ads_settings_box",{owner_id:mvcur.mvData.oid,video_id:mvcur.mvData.vid},{stat:[window.jsc("internal/VideoPartnerAdsSettings.js"),"internal/VideoPartnerAdsSettings.css"],onDone:()=>{(0,a.curBox)().setOptions({hideButtons:!0})}})}}},688077:(_,e,i)=>{"use strict";i.d(e,{default:()=>E});i(751876),i(59357);var o=i(667294),t=i(325489),a=i(786067),d=i(40906),l=i(49535),s=i(695724),r=i(315544),n=i(108046),v=i(961540),m=i(481117),c=i(228555),u=i(787481);const E={resize:function(_,e){},debugLog(){for(var _=arguments.length,e=new Array(_),i=0;i<_;i++)e[i]=arguments[i];e.unshift("video player:"),u.debugLog.apply(null,e)},fullscreen(_){Videoview.isFS=_,Videoview.updateExternalVideoFinishBlock(),cur.storyLayer?(0,r.toggleClass)(cur.storyLayer.layerEl,"_fullscreen",_):window.mvLayer&&(0,r.toggleClass)(mvLayer,"mv_layer--fullscreen",_)},incViewCounter(_,e,i,o,t,a,d){var l={oid:_,vid:e,hash:i,curr_res:o,max_res:t,player:a||"flash",type:d,module:Videoview.getVideoModule(_+"_"+e)};if(cur.videoSearchStats){var r=parseInt(cur.videoSearchPos);isNaN(r)||(l.search_pos=r,cur.videoSearchStats.positions[r]=(0,s.extend)({viewStarted:0},cur.videoSearchStats.positions[r]),cur.videoSearchStats.positions[r].viewStarted++),cur.videoSearchStats.totalViews++}(0,n.idlizeCall)((()=>{ajax.post("al_video.php?act=inc_view_counter",l)}))},rotateVideo(_,e,i,o){ajax.post("al_video.php?act=rotate_video",{oid:_,vid:e,angle:i,hash:o})},onVideoNext(_,e,i){setTimeout((function(){var o=0;if(e||_?e&&i?o=5:e&&!i?o=6:_&&(o=7):o=4,Videoview.sendPlayerStats(o,0),VideoPlaylist.getBlock())_&&!e?VideoPlaylist.showVideo(_):VideoPlaylist.nextVideo();else{var a=Videoview.getVideoModule(_);cur.is_showcase&&(a+=":similar"),(0,t.showVideo)(_,"",{autoplay:1,module:a})}}),0)},fetchSuggestions(_,e){if(_){var i=Videoview.getMvData(),o=i.videoRaw;ajax.post("al_video.php?act=fetch_player_suggestions",{oid:i.oid,vid:i.vid,videos:_,prepend_current:e?1:0},{onDone:function(_){var e=Videoview.getMvData();if(e&&e.videoRaw==o){e.playerSuggestions=_;var i=cur.videoInlinePlayer||window.mvcur&&mvcur.player||cur.player;i&&i.setSuggestions(_)}}})}},setSuggestions(_){Videoview.playerCallback.fetchSuggestions(_)},onSuggestionsShown(_,e,i){var o=i?16:_?14:12;if(Videoview.sendPlayerStats(o,0),_){var t=Videoview.getMvData(),a="";(0,s.each)(t.playerSuggestions,((_,i)=>{i.vid!=e&&(a+="&vid="+i.vid)})),(0,d.vkImage)().src="//go.imgsmail.ru/vk?pxn=vs&qid="+_+a}},onSuggestionClick(_,e,i,o,a){var l=a?15:e?13:11;Videoview.sendPlayerStats(l,0);var s=Videoview.getVideoModule(_);cur.is_showcase&&(s+=":similar"),(0,t.showVideo)(_,"",{autoplay:1,module:s,addParams:{suggestions_qid:e}}),e&&((0,d.vkImage)().src="//go.imgsmail.ru/vk?pxn=vic&qid="+e+"&vid="+_+"&p="+i+"&t="+o)},onSuggestionQuarterWatched(_,e,i){(0,d.vkImage)().src="//go.imgsmail.ru/vk?pxn=vt25&qid="+_+"&vid="+e+"&t="+i},onSuggestionsReplayClicked:function(){Videoview.sendPlayerStats(17,0)},onOpenInPopup(_,e,i){Videoview.sendPlayerStats(8,0);var o=cur.videoInlinePlayer&&cur.videoInlinePlayer.canExpand()?cur.videoInlinePlayer:null,a=o&&o.vars&&o.vars.short_video,d=o&&o.vars?o.vars.track_code:null,l=o&&o.vars?o.vars.module:null,s=window._videoLastInlined?(0,r.domData)((0,r.domClosest)("post",window._videoLastInlined[1]),"post-id"):null,n=window._videoLastInlined?(0,r.domData)(window._videoLastInlined[1],"playlist"):null;(0,t.showVideo)(_,e,{shortVideo:a,expandPlayer:o,playlistId:n,autoplay:1,module:l,addParams:{t:i,post_id:s,track_code:d},openInPopup:!0})},onVideoAdEvent(_,e,i,o,t,a,d,l,s){if(i){cur._vadStatQueue=cur._vadStatQueue||{},cur._vadStatQueue[_+"_"+e]=cur._vadStatQueue[_+"_"+e]||{type:"",events:[]};var r=cur._vadStatQueue[_+"_"+e];r.type=t,r.events.push(o),r.pl_type=d,r.app_version=l,r.media_provider=s,clearTimeout(cur._vadStatTimer),cur._vadStatTimer=setTimeout(Videoview.sendVideoAdStat.bind(Videoview,_,e,i),1e3)}},onVideoAdShown(_,e,i,o){ajax.post("al_video.php?act=ad_event",{oid:_,vid:e,type:i,event:o})},onVideoResolutionChanged(_,e,i,o){var t=Videoview.getMvData();t&&(t.resolution=o)},onInitialized(){Videoview.isLayerShown()&&(VideoPlaylist.toggle(!VideoPlaylist.isCollapsed()),mvcur.options&&mvcur.options.focusPlay&&("visible"==document.visibilityState?Videoview.togglePlay(!0):"hidden"==document.visibilityState&&(0,l.addEvent)(window,"focus",(function _(){Videoview.togglePlay(!0),(0,l.removeEvent)(window,"focus",_)}))));var _=window.mvcur&&mvcur.player&&mvcur.player.el||(0,r.ge)("video_player");_&&_.focus()},onVideoPlayProgress(_,e,i,o,t){var a=_+"_"+e;o<5e3&&cur.tnsStart!=a?cur.tnsStart=a:o>t/2&&cur.tnsEnd!=a&&(cur.tnsEnd=a),window.mvcur&&mvcur.adData&&(mvcur.adData.stat_link_start&&!mvcur.adData.view_complete_start&&o>=5e3&&(ajax.post(mvcur.adData.stat_link_start,{},{onDone:function(){},onFail:function(){return!0}}),mvcur.adData.view_complete_start=!0),mvcur.adData.stat_link_half&&!mvcur.adData.view_complete_half&&o>=t/2&&(ajax.post(mvcur.adData.stat_link_half,{},{onDone:function(){},onFail:function(){return!0}}),mvcur.adData.view_complete_half=!0),mvcur.adData.stat_link_full&&!mvcur.adData.view_complete_full&&o>=.9*t&&(ajax.post(mvcur.adData.stat_link_full,{},{onDone:function(){},onFail:function(){return!0}}),mvcur.adData.view_complete_full=!0))},onPlayerTouchedByUser(){var _=arguments.length>0&&void 0!==arguments[0]&&arguments[0];window._videoLastInlined&&(_||(0,r.removeClass)(window._videoLastInlined[1],"page_video_autoplayable"))},onVideoStreamPlaying(_,e){var i=Videoview.getPlayerObject();if(!(i&&i.isAutoplay&&i.isAutoplay())){window.Notifier&&setTimeout((function(){Notifier.lcSend("video_start")}),0);var o=window.ap;o&&o.isPlaying()&&(o.pause(),o.pausedByVideo=Date.now())}},onVideoPlayStarted(_,e,i,o,t,a,l,s){var m,c=Videoview.getMvData(),u=Videoview.getVideoModule(_+"_"+e),E=cur.videoInlinePlayer&&cur.videoInlinePlayer.isAutoplay(),b="";if(null===(m=window.Video)||void 0===m?void 0:m.isInCatalog()){var w,p=window._videoLastInlined?(0,r.domData)(window._videoLastInlined[1],"playlist"):mvcur.options.playlistId,D=p?p.replace("cat_",""):"";b=(null===(w=window.Videocat)||void 0===w?void 0:w.isTop3Playlist(D))?"featured":D}if(window.mvcur&&(mvcur.viewStartedTimestamp=Date.now(),(0,n.idlizeCall)((()=>{var _,e;null===(_=document.querySelector(".VideoLayout"))||void 0===_||_.classList.remove("VideoLayout--hidden"),null===(e=window.VideoShowcase)||void 0===e||e.updateLayout()}),3e3)),ajax.post("al_video.php?act=video_view_started",{oid:_,vid:e,hash:i,module:u,videocat:b,quality:c?c.resolution:0,autoplay:E?1:0,inline:-1,player_view_type:Videoview.getLayoutType(),ov_id:a,app_version:l,media_provider:s},{}),E&&cur.videoAutoplayStat&&cur.videoAutoplayStat.video==_+"_"+e&&!t&&ajax.post("al_video.php?act=autoplay_stat",{event:"start",start_time:Date.now()-cur.videoAutoplayStat.launched,preloaded:cur.videoAutoplayStat.preloaded?1:0,streaming_method:o,module:Videoview.getVideoModule()},{}),c){var h=`//${(0,v.getHostName)()}/rtrg?r=`;switch(c.l_type){case 1:(0,d.vkImage)().src=`${h}JQ6ueUeOxlSLb8IoA8ToayylOLgRkThaoFV0XVgG5qvS1x1xWrkfqAg73sYWJxwq9PXWucKtMS02J3CsGLZdmOMNj9dv9UCjDN4a3ShJZXcJFMhgfVwSoPWoxp*Y/LAFUnKz5*XBvDCQXeaygAqI*gY9gz*jWTXaOXyT2lSfIPY-`;break;case 2:(0,d.vkImage)().src=`${h}lD4OYmfC8ehvdc/8TL9AsAjM956qNaHyj20XV5mCNiTgYKQ6X*IXgwE8VbgqOf7rdbLJq7uCRBrdnFPTcUU2NjMgy8x4y6NWrYVwQMteNWh62XnLoNVZqobnsMMGm1OyTW09rhEkmiX5jqk3CI3JIIYbIbd8K7EC0ytQ4Kp4Kro-`}}-33118207==_||-78630688==_?(0,d.vkImage)().src="//rs.mail.ru/d23694799.gif":-68420747==_||-121650415==_?(0,d.vkImage)().src="//rs.mail.ru/d25688137.gif":-18479452==_&&((0,d.vkImage)().src="//rs.mail.ru/d25688115.gif")},onVideoPlayFinished(){window.mvcur&&mvcur.mvShown&&(mvcur.finished=!0,mvcur.mousemoved=!0,Videoview.moveCheck(),Videoview.logViewedPercentage()),window.mvcur&&mvcur.mvShown&&mvcur.adData&&(mvcur.adData.stat_link_start&&!mvcur.adData.view_complete_start&&(ajax.post(mvcur.adData.stat_link_start,{},{onDone:function(){},onFail:function(){return!0}}),mvcur.adData.view_complete_start=!0),mvcur.adData.stat_link_half&&!mvcur.adData.view_complete_half&&(ajax.post(mvcur.adData.stat_link_half,{},{onDone:function(){},onFail:function(){return!0}}),mvcur.adData.view_complete_half=!0),mvcur.adData.stat_link_full&&!mvcur.adData.view_complete_full&&(ajax.post(mvcur.adData.stat_link_full,{},{onDone:function(){},onFail:function(){return!0}}),mvcur.adData.view_complete_full=!0))},onVideoPlayError(){Videoview.isLayerShown()&&(0,r.re)("mv_live_gifts_block"),(0,n.idlizeCall)((()=>{var _,e;null===(_=document.querySelector(".VideoLayout"))||void 0===_||_.classList.remove("VideoLayout--hidden"),null===(e=window.VideoShowcase)||void 0===e||e.updateLayout()}),3e3)},onVideoAdsLoadStarted(){},onVideoAdsPlayStarted(){(0,n.idlizeCall)((()=>{var _,e;null===(_=document.querySelector(".VideoLayout"))||void 0===_||_.classList.remove("VideoLayout--hidden"),null===(e=window.VideoShowcase)||void 0===e||e.updateLayout()}),3e3)},onVideoAdsPlayFinished(){},onViewSegmentsChanged(_,e,i,o){if(i&&!cur.segmentsSaveProcess){var t="vsegs"+vk.id+"_"+_+"_"+e,a=ls.get(t);a&&a.ts&&Date.now()-a.ts>864e5&&(a=null,ls.remove(t));var d=a&&a.segments?a.segments.split("|")[2]:"";if(!d||i!=d){cur.segmentsSaveProcess=!0;var l={module:Videoview.getVideoModule(_+"_"+e),vid:e,oid:_,s:i,prev_s:a?a.segments:"",prev_sig:a?a.segmentsSig:"",hash:o},r=parseInt(cur.videoSearchPos);if(isNaN(r)||(l.search_pos=r),ajax.post("al_video.php?act=a_view_segments",l,{onDone:function(_,e,i){if(!(_<0)){_&&ls.set(t,{segments:_,segmentsSig:e,ts:Date.now()}),cur.segmentsSaveProcess=!1,i=(0,s.intval)(i);var o=parseInt(cur.videoSearchPos);i>0&&!isNaN(o)&&cur.videoSearchStats&&(cur.videoSearchStats.positions[o]=(0,s.extend)({viewedParts:0},cur.videoSearchStats.positions[o]),cur.videoSearchStats.positions[o].viewedParts++)}}}),cur.videoSearchStats&&(cur.videoSearchStats.totalViewedTime||(cur.videoSearchStats.totalViewedTime=0),cur.videoSearchStats.totalViewedTime+=mvcur.mvData.vsegsSize,!isNaN(r))){cur.videoSearchStats.positions[r]=(0,s.extend)({viewedSeconds:0},cur.videoSearchStats.positions[r]);var n=cur.videoSearchStats.positions[r].viewedSeconds;n=Math.min(mvcur.mvData.duration,n+mvcur.mvData.vsegsSize),cur.videoSearchStats.positions[r].viewedSeconds=n}}}},onLike(_){Videoview.like(null,!0),Videoview.sendPlayerStats(1,_)},onAdd(_,e,i){Videoview.addSmall(_,e),Videoview.sendPlayerStats(3,i)},onRemove(){Videoview.removeVideo()},onShare(_){Videoview.share(),Videoview.sendPlayerStats(2,_)},onSubscribe(_,e){Videoview.subscribeToAuthor(_,{from:"player"}),Videoview.sendPlayerStats(_?9:10,e)},onDonate(){Videoview.showDonateBox()},onAddBookmark(){Videoview.bookmarkVideo()},onRemoveBookmark(){Videoview.bookmarkVideo(!0)},isInLayer:_=>Videoview.isLayerShown(_),onLiveViewersCountChange(_,e,i){Videoview.isLayerShown(_)&&Videoview.updateLiveViewersCount(e,i),window.Stories&&window.Stories.isLiveShown(_)&&window.Stories.updateLiveViewersCount(e)},onLiveStarted(_){Videoview.isLayerShown(_)&&Videoview.reload()},onLiveEnded(_,e){Videoview.isLayerShown(_)&&((0,r.hide)("mv_publish"),(0,r.hide)("mv_live_gifts_block"),(0,r.val)("mv_views",(0,a.getLang)("video_live_finished"))),window.Stories&&window.Stories.isLiveShown(_)&&window.Stories.activeLiveEnded(e)},onAdStat(_,e){window.Wall&&Wall.triggerAdStat(_,e)},showVideoMutePopup(_,e,i,t){(0,m.showComponentInBox)(o.createElement(c.MutePopup,{faqLink:_,title:e,text:i,buttonText:t}))},openTimeCodesList(_){setTimeout((()=>{Videoview.openTimeCodesList(_)}),100)},updateCurrentTimeCode(_){Videoview.updateCurrentTimeCode(_)}}},619103:(_,e,i)=>{"use strict";i.d(e,{default:()=>E});i(530522),i(66108),i(296253),i(850110),i(579665),i(95767);var o=i(315544),t=i(40906),a=i(100416),d=i(49535),l=i(695724),s=i(376852),r=i(337668),n=i(186699),v=i(786067),m=i(287503);function c(_,e){return function(_){if(Array.isArray(_))return _}(_)||function(_,e){var i=null==_?null:"undefined"!=typeof Symbol&&_[Symbol.iterator]||_["@@iterator"];if(null==i)return;var o,t,a=[],d=!0,l=!1;try{for(i=i.call(_);!(d=(o=i.next()).done)&&(a.push(o.value),!e||a.length!==e);d=!0);}catch(_){l=!0,t=_}finally{try{d||null==i.return||i.return()}finally{if(l)throw t}}return a}(_,e)||function(_,e){if(!_)return;if("string"==typeof _)return u(_,e);var i=Object.prototype.toString.call(_).slice(8,-1);"Object"===i&&_.constructor&&(i=_.constructor.name);if("Map"===i||"Set"===i)return Array.from(_);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return u(_,e)}(_,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(_,e){(null==e||e>_.length)&&(e=_.length);for(var i=0,o=new Array(e);i<e;i++)o[i]=_[i];return o}const E={SCROLL_EDGE_BELOW_THRESHOLD:20,MAX_COMMENTS_NUM:150,MAX_LIKES_PER_BATCH:7,MAX_STICKERS_PER_BATCH:7,init(_,e){VideoChat.block&&VideoChat.destroy(),_&&(VideoChat.block=_,VideoChat.options=(0,l.extend)({},e),VideoChat.messagesWrap=(0,o.domByClass)(_,"mv_chat_messages_wrap"),VideoChat.stickersWrap=(0,o.domByClass)(_,"mv_chat_stickers_wrap"),VideoChat.scroll=new uiScroll((0,o.domFC)(VideoChat.messagesWrap),{global:!0,hidden:e.scrollHidden,reversed:!0,preserveEdgeBelow:!0,preserveEdgeBelowThreshold:VideoChat.SCROLL_EDGE_BELOW_THRESHOLD,theme:"videoview",onupdate:VideoChat.onScrollUpdate}),this.scrollBottomBtnWrap=(0,o.domByClass)(_,"mv_chat_new_messages_btn_wrap"),VideoChat.replyForm=(0,o.domByClass)(_,"mv_chat_reply_form"),VideoChat.replyForm&&(VideoChat.replyInput=(0,o.domByClass)(_,"mv_chat_reply_input"),VideoChat.initReplyInput()),VideoChat.firstMsgIntro=(0,o.domByClass)(_,"mv_chat_first_message_intro"))},initReplyInput(){(0,a.placeholderInit)(VideoChat.replyInput,{editable:!0,global:!0}),window.stManager.add([window.jsc("web/emoji.js"),"notifier.css"],(function(){var _=Emoji.init(VideoChat.replyInput,{forceStickerPack:VideoChat.options.forceStickerPack,controlsCont:VideoChat.replyForm,noLineBreaks:1,noCtrlSend:1,ref:"video_chat",onSend:function(){VideoChat.sendMessage()},checkEditable:function(){VideoChat.checkFormHeight(),VideoChat.checkTextLen()},onStickerSend:function(_){VideoChat.sendSticker(_)}});(0,o.data)(VideoChat.replyForm,"optId",_)}))},checkFormHeight(){var _=VideoChat.replyForm,e=_.offsetHeight;if(_.lastHeight!==e){_.lastHeight=e;var i=!VideoChat.scroll.data.scrollBottom;(0,o.setStyle)(VideoChat.messagesWrap,{bottom:e+"px"}),i&&VideoChat.scroll.scrollBottom()}},checkTextLen(){var _=arguments.length>0&&void 0!==arguments[0]?arguments[0]:VideoChat.replyInput,e=(0,l.trim)(Emoji.editableVal(_));if(_.lastLen!==e.length)if((_.lastLen=e.length)>mvcur.maxChatReplyLength){var i=cur.storyLayer?"stories_live_chat_msg_too_long":"video_live_chat_msg_too_long";(0,s.showTooltip)(_,{black:1,text:(0,v.getLang)(i),shift:!!cur.storyLayer&&[-30,10]})}else window.tooltips&&tooltips.destroy(_)},mentionOver:_=>window.mentionOver(_,{shift:[-20,7,7]}),stickerClick:(_,e,i)=>(window.stManager.add([window.jsc("web/emoji.js"),"notifier.css"],(function(){Emoji.clickSticker(_,e,i)})),!1),onScrollUpdate(_){_.data.scrollBottom<VideoChat.SCROLL_EDGE_BELOW_THRESHOLD&&VideoChat.toggleScrollBottomBtn(!1)},receiveMessage(_,e,i,o,t,a,d,s,r){if((0,l.intval)(r))VideoChat.appendSticker(r,i);else{var n=!1;window.replyAsList&&window.replyAsList.length&&(0,l.each)(window.replyAsList,(function(){if(this[0]==i)return n=!0,!1}));var v=Videoview.getMvData(),c=v.adminLevel,u=v.canDeleteComments,E="";v.canReportComments&&_!=vk.id&&i!=vk.id&&!n&&(E+=(0,l.getTemplate)("video_chat_message_action_report",{video_owner_id:_,msg_id:e})),(c>m.GroupAdminLevel.USER||u||_==vk.id||i==vk.id||n)&&(E+=(0,l.getTemplate)("video_chat_message_action_del",{video_owner_id:_,msg_id:e}));var b=(0,l.getTemplate)("video_chat_message",{author_href:a,author_photo:t,author_name:o,message:s,video_owner_id:_,msg_id:e,actions:E,classes:i==_?"mv_chat_admin_message":""});VideoChat.appendMessage(b,e)}},receiveDelete(_,e){var i="#mv_chat_msg"+mvcur.mvData.oid+"_"+e,t=VideoChat._messagesBatch&&VideoChat._messagesBatch.querySelector(i);t?(0,o.re)(t):(t=VideoChat.messagesWrap.querySelector(i))&&!(0,o.hasClass)(t,"_deleted")&&VideoChat.scroll.updateAbove((function(){(0,o.re)(t)}))},checkStickerFlood(_,e){var i=mvcur.queueBatchId;VideoChat._stickersLimits&&VideoChat._stickersLimits.batch==i||(VideoChat._stickersLimits={batch:i,like:0,sticker:0},VideoChat._stickersDelay=0);var o="like"==_?"like":"sticker",t="like"==o?VideoChat.MAX_LIKES_PER_BATCH:VideoChat.MAX_STICKERS_PER_BATCH;return!(++VideoChat._stickersLimits[o]>t&&e!=vk.id)},appendSticker(_,e){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!VideoChat.isHidden()&&!Videoview.isFS&&"hidden"!=document.visibilityState&&"animation"in bodyNode.style&&"onanimationend"in window){if(e==vk.id){var a=VideoChat.recentlySentSticker;if(a&&a.stickerId==_&&a.fromQueue!=i&&Date.now()-a.time<3e3)return;VideoChat.recentlySentSticker={stickerId:_,fromQueue:i,time:Date.now()}}else if(!VideoChat.checkStickerFlood(_,e))return;if("like"==_){var s=(0,o.ce)("div",{className:"mv_chat_like"});n(s),(0,d.addEvent)(s,"animationend",m),v(s)}else{var r=(0,o.ce)("img",{className:"mv_chat_sticker",src:Stickers.getStickerUrl(_,((0,t.isRetina)()?128:64)+"b")});n(r),(0,d.addEvent)(r,"error animationend",m),(0,d.addEvent)(r,"load",v)}}function n(_){for(var i="",a=0,d=0,s=0,r=(0,l.intval)((VideoChat.getHeight()-80)/6),n=0;n<=100;n+=20){n>0&&(a+=(0,t.irand)(-4,4),d-=r,s+=(0,t.irand)(-4,4),r=(0,l.intval)(.9*r)),i+=`\n          ${n}% {\n            transform: translate(${a}px, ${d}px) rotate(${s}deg) scale(${n?1:.7});\n            opacity: ${0==n||100==n?0:1};\n          }\n        `}var v="mv_chat_sticker_animation_"+Date.now()+"_"+(0,t.irand)(0,1e9);i=`@keyframes ${v} {${i}}`,_.appendChild((0,o.ce)("style",{innerHTML:i}));var m=(0,t.irand)(1500,2500)+"ms",c=(e==vk.id?0:VideoChat._stickersDelay+=100)+"ms";(0,o.setStyle)(_,{animation:[v,m,c,"linear"].join(" ")})}function v(_){var e=_.currentTarget||_;(VideoChat._stickersBatch||(VideoChat._stickersBatch=document.createDocumentFragment())).appendChild(e),VideoChat._appendStickerTimeout||(VideoChat._appendStickerTimeout=setTimeout((function(){VideoChat.appendStickersBatch(),VideoChat._appendStickerTimeout=null}),0))}function m(_){var e=_.currentTarget||_;(0,d.removeEvent)(e),(0,o.re)(e)}},appendStickersBatch(){var _=VideoChat._stickersBatch;_&&(VideoChat._stickersBatch=null,VideoChat.isHidden()||VideoChat.stickersWrap.appendChild(_))},removeStickers(){if(VideoChat.stickersWrap)for(var _;_=(0,o.domFC)(VideoChat.stickersWrap);)(0,d.removeEvent)(_),(0,o.re)(_)},appendMessage(_,e){var i=VideoChat._messagesBatch||(VideoChat._messagesBatch=document.createDocumentFragment()),t="#mv_chat_msg"+mvcur.mvData.oid+"_"+e;if(!VideoChat.messagesWrap.querySelector(t)&&!i.querySelector(t)){i.appendChild((0,o.se)(_));for(var a=i.childNodes;i.childNodes.length>VideoChat.MAX_COMMENTS_NUM;)(0,o.re)(a[0]);VideoChat.isHidden()||VideoChat._appendMessageTimeout||(VideoChat._appendMessageTimeout=setTimeout((function(){VideoChat.appendMessagesBatch(),VideoChat._appendMessageTimeout=null}),0))}},appendMessagesBatch(){if(!VideoChat.isHidden()){var _=VideoChat._messagesBatch;if(_){VideoChat._messagesBatch=null;var e=(0,o.geByClass)("mv_chat_message_author_thumb_img",_,"img");(0,l.each)(e,(function(_,e){(0,o.attr)(e,"src")||(0,o.attr)(e,"src",(0,o.domData)(e,"src"))})),VideoChat.firstMsgIntro&&((0,o.re)(VideoChat.firstMsgIntro),VideoChat.firstMsgIntro=null);var i=VideoChat.scroll.content;VideoChat.scroll.updateBelow((function(){i.appendChild(_)})),VideoChat.scroll.updateAbove((function(){for(var _=i.childNodes;_.length>VideoChat.MAX_COMMENTS_NUM;)(0,o.re)(_[0])})),VideoChat.scroll.data.scrollBottom>100&&VideoChat.toggleScrollBottomBtn(!0)}}},toggleScrollBottomBtn(_){(0,o.toggleClass)(this.scrollBottomBtnWrap,"hidden",!_)},scrollBottom(){VideoChat.scroll.scrollBottom(0)},replyAsAnimate(_,e,i){var t=_&&(0,o.geByClass1)("mv_chat_reply_author_photo",_),a=t&&(0,o.geByClass)("mv_chat_reply_author_photo_img",t),d=(0,o.hasClass)(_,"mv_chat_author_secondary")?0:1;a&&a[d]&&(a[d].src=i),(0,o.toggleClass)(_,"mv_chat_author_secondary")},replyAsGroup(_,e){window.replyAsList?VideoChat.replyAsGroupTT(_,e):(window.replyAsList=[],window.replyAsData={},(0,o.domData)(_,"can_reply_as_any_group")?ajax.post("/al_groups.php?act=get_editor_clubs",{},{cache:1,onDone:function(i){window.replyAsList=i,(0,l.each)(i,(function(_,e){var i=c(e,4),o=i[0];i[1],i[2],i[3];window.replyAsData[o]=this})),VideoChat.replyAsGroupTT(_,e)}}):VideoChat.replyAsGroupTT(_,e))},replyAsGroupList(_,e,i){var t=[i],a=(0,o.domByClass)(_,"mv_chat_reply_group_data");if(a){var d=[(0,o.domData)(a,"group_id"),(0,o.domData)(a,"group_photo"),(0,o.domData)(a,"group_href"),(0,o.domData)(a,"group_name")];t.push(d),window.replyAsData[d[0]]=d}return(0,l.each)(window.replyAsList,(function(_,i){var o=c(i,4),a=o[0];o[1],o[2],o[3];a!=e&&t.push(this)})),t},replyAsGroupOver(_){var e=(0,o.gpeByClass)("mv_chat_reply_form",_);(0,s.showTooltip)(_,{text:function(){return(0,o.domData)(e,"from-oid")<0?(0,v.getLang)("global_on_behalf_group"):(0,v.getLang)("global_on_behalf_me")},black:1,shift:[9,8,8]})},replyAsGroupTT(_,e){var i=VideoChat.replyAsProfileData(),t=(0,o.gpeByClass)("mv_chat_reply_form",_),a=t&&(0,o.domData)(t,"from-oid"),s=(0,o.data)(_,"tt");if(!i)return!1;if(!s){var r=VideoChat.replyAsGroupList(_,e,i),n="";(0,l.each)(r,(function(_,e){var i=c(e,4),o=i[0],t=i[1],d=i[2],s=i[3];n+=(0,l.getTemplate)("video_chat_message_author_select_row",{author_id:o,author_href:d,author_photo:t,author_name:s,classes:a==o?" active":""})})),s=new ElementTooltip(_,{content:'<div class="post_from_tt_choose _post_scroll_wrap">'+n+"</div>",appendToParent:!0,autoHide:!0,customShow:!0,defaultSide:"top",offset:function(){return[0,-5]},onFirstTimeShow:function(e){var i=(0,o.geByClass)("post_from_tt_row",e);(0,l.each)(i,(function(e,i){(0,d.addEvent)(i,"click",VideoChat.setReplyAsGroup.pbind(_,{from:(0,o.domData)(this,"from-oid")}))})),this.rows=i,this.scroll=new uiScroll((0,o.geByClass1)("_post_scroll_wrap",e)),setTimeout((function(){s.scroll.update(),s.updatePosition()}),0)},onShow:function(_){setTimeout((function(){if(s.scroll){var e=(0,o.geByClass1)("active",_),i=e?e.offsetTop-(s.scroll.data.viewportHeight-(0,o.getSize)(e)[1])/2:0;s.scroll.scrollTop(i)}}),0)},onHide:function(_){}}),(0,o.data)(_,"tt",s)}e&&s.isShown()&&VideoChat.setReplyAsGroup(_,{from:a==vk.id?e:vk.id}),_.tt&&_.tt.hide&&_.tt.hide(),s.isShown()||s.show()},replyAsProfileData:()=>window.mvcur&&mvcur.wallTpl&&mvcur.wallTpl.profileData,setReplyAsGroup(_,e){if(!_)return!1;var i=(0,o.domClosest)("mv_chat_reply_form",_),t=(0,o.data)(_,"tt"),a=e.from||(e.fromGroup?cur.oid:vk.id),d=a==vk.id?VideoChat.replyAsProfileData():window.replyAsData&&window.replyAsData[a];return!((0,o.domData)(i,"from-oid")==a||!d||d[0]!=a)&&((0,o.domData)(i,"from-oid",a),VideoChat.replyAsAnimate(i,d[2],d[1]),t&&t.rows&&(0,l.each)(t.rows,(function(){(0,o.toggleClass)(this,"active",(0,o.domData)(this,"from-oid")==a)})),_.setAttribute("aria-label",(0,v.getLang)(a<0?"wall_reply_as_group":"wall_reply_as_user")),!1)},sendMessage(){if(!VideoChat.messageSending){var _={Message:(0,l.trim)(Emoji.val(VideoChat.replyInput))};if(_.Message){if(Date.now()-VideoChat.lastMsgSent<1e3)return window.tooltips&&tooltips.destroy(VideoChat.replyInput),void(0,s.showTooltip)(VideoChat.replyInput,{text:(0,v.getLang)("video_live_chat_too_fast"),black:1});var e=Videoview.getMvData(),i=(0,o.geByClass1)("mv_chat_reply_form",this.block);i&&(0,o.domData)(i,"from-oid")&&(_.from_oid=(0,o.domData)(i,"from-oid")),ajax.post("al_video.php?act=post_comment",(0,l.extend)(_,{video:e.videoRaw,hash:e.hash,videoviewer_chat:1,item_access_hash:mvcur.mvData.itemAccessHash}),{onDone:function(_,e){VideoChat.messageSending=!1,_&&e&&VideoChat.appendMessage(_,e),Emoji.val(VideoChat.replyInput,""),VideoChat.checkFormHeight(),VideoChat.scroll.data.scrollBottom&&VideoChat.scrollBottom(),VideoChat.lastMsgSent=Date.now(),mvcur.player&&mvcur.player.vars.stats_tmr&&(0,r.tmrTrackCustomGoal)("comment_in_sport_broadcast")},onFail:function(_){if(VideoChat.messageSending=!1,VideoChat.replyInput)return window.tooltips&&tooltips.destroy(VideoChat.replyInput),(0,s.showTooltip)(VideoChat.replyInput,{text:_,showdt:200,forcetodown:0,slide:15,black:1}),(0,o.elfocus)(VideoChat.replyInput),!0}}),VideoChat.messageSending=!0}else(0,o.elfocus)(VideoChat.replyInput)}},sendSticker(_){var e=Videoview.getMvData();ajax.post("al_video.php?act=live_send_sticker",{sticker_id:_,owner_id:e.oid,video_id:e.vid,hash:e.hash},{onDone(){VideoChat.appendSticker(_,vk.id,!1)}})},deleteMessage(_,e){var i=(0,o.ge)("mv_chat_msg"+_);i&&(i.classList.add("_deleted"),ajax.post("al_video.php?act=delete_comment",{comment:_,hash:e,videoview_chat:1},{onDone(_){i&&(i.classList.add("_show_deleted_stub"),(0,o.val)((0,o.domByClass)(i,"mv_chat_message_content"),_))}}))},showReportVideoChatCommentForm(_,e){(0,n.showReportForm)("video_comment",_,e,(()=>{var i=(0,o.ge)(`mv_chat_msg${_}_${e}`);i&&(i.classList.add("_deleted"),i.classList.add("_show_deleted_stub"),(0,o.val)((0,o.domByClass)(i,"mv_chat_message_content"),(0,v.getLang)("global_report_sent")))}))},isHidden(){return!!this.hidden||Videoview.isMinimized()},setHidden(_){this.hidden=_},toggle(){var _=VideoChat.isHidden();this.setHidden(!_),VideoChat.toggleStateClasses(),_&&VideoChat.scroll&&(VideoChat.appendMessagesBatch(),VideoChat.updateScroll()),_||VideoChat.removeStickers()},toggleStateClasses(){var _=!!this.block,e=VideoChat.isHidden(),i=Videoview.isMinimized();(0,o.toggleClass)("mv_box","_has_chat",_&&!i),(0,o.toggleClass)("mv_box","_hide_chat",_&&!i&&e);var t="";_&&(VideoChat.appendMessagesBatch(),t=(0,v.getLang)(e?"video_aria_expand_chat":"video_aria_minimize_chat")),(0,o.ge)("mv_top_pl_toggle")&&(0,o.attr)("mv_top_pl_toggle","aria-label",t)},updateScroll(){VideoChat.scroll.update(),VideoChat.scroll.scrollBottom(),VideoChat.toggleScrollBottomBtn(!1)},onResize(){VideoChat.block&&(VideoChat._chatHeight=VideoChat.block.offsetHeight)},getHeight:()=>VideoChat.block?VideoChat._chatHeight||(VideoChat._chatHeight=VideoChat.block.offsetHeight):0,destroy(){if(VideoChat.block){if(VideoChat.scroll&&(VideoChat.scroll.destroy(),VideoChat.scroll=null),VideoChat.replyForm){var _=(0,o.data)(VideoChat.replyForm,"optId");void 0!==_&&Emoji.destroy(_),(0,o.removeData)(VideoChat.replyForm),(0,o.removeData)(VideoChat.replyInput),VideoChat.replyForm=VideoChat.replyInput=null}VideoChat.removeStickers(),(0,o.removeData)(VideoChat.block),(0,o.re)(VideoChat.block),VideoChat.block=null,VideoChat.messagesWrap=null,VideoChat.stickersWrap=null,VideoChat.options=null,clearTimeout(VideoChat._appendMessageTimeout),clearTimeout(VideoChat._appendStickerTimeout),VideoChat._appendMessageTimeout=null,VideoChat._appendStickerTimeout=null,VideoChat._messagesBatch=null,VideoChat.firstMsgIntro=null,VideoChat.messageSending=!1,VideoChat.toggleStateClasses()}}}},912998:(_,e,i)=>{"use strict";i.d(e,{default:()=>u});i(283946),i(59357),i(850110);var o=i(668040),t=i(786067),a=i(40906),d=i(982452),l=i(479957),s=i(695724),r=i(315544),n=i(486125),v=i(386409),m=i(654612),c=i(376852);const u={DEFAULT_COMMENT_MAX_LENGTH:300,init(_){function e(){(0,n.curBox)().hide(),(0,m.showFastBox)((0,t.getLang)("global_error"),(0,t.getLang)("global_error_occured"))}VideoDonate.params={prefilled:_.prefilled,videoId:_.video_raw,votesHash:_.votes_hash,referrer:_.referrer,payerId:_.payer_id},ajax.plainpost(_.api_url,"",(function(_){(_=JSON.parse(_))&&"success"==_.status?(VideoDonate.apiData=_.data,VideoDonate.initForm()):e()}),e,!0)},initForm(){var _=VideoDonate.apiData,e=(0,a.floatval)(_.user_data.donation_mins.RUB),i=Math.ceil(e/vk.vcost);if(VideoDonate.params.votesHash&&i<=vk.balance){var o=[["votes",(0,t.getLang)("video_donate_box_currency_votes")],["rubles",(0,t.getLang)("video_donate_box_currency_rubles")]];VideoDonate.currencyDropdown=new Dropdown((0,r.ge)("video_donate_amount_currency"),o,{multiselect:!1,onChange:VideoDonate.onChooseCurrency,selectedItems:"votes",width:150,big:!0}),(0,r.addClass)("video_donate_amount_wrap","video_donate_can_choose_currency"),VideoDonate.onChooseCurrency("votes")}else VideoDonate.onChooseCurrency("rubles");var d=(0,r.ge)("video_donate_comment");d.onkeydown=d.onkeyup=d.onchange=VideoDonate.checkCommentLength,(0,r.toggle)("video_donate_widget_offline",!_.user_data.alert_widget_is_online),(0,r.ge)("video_donate_basic_submit").onclick=VideoDonate.submitBasicForm;var l=(0,r.geByClass)("radiobtn","video_donate_pay_methods");radioBtns.video_donate_pay_method={els:Array.prototype.slice.apply(l)};var n=ls.get("video_donate_pay_method")||"";(0,s.each)(l,(function(_,e){e.onclick=function(_){VideoDonate.onChoosePayMethod(_.currentTarget)},(0,r.domData)(e,"value")===n&&VideoDonate.onChoosePayMethod(e)})),(0,v.radioval)("video_donate_pay_method")||VideoDonate.onChoosePayMethod(l[0]);var m=VideoDonate.params.prefilled;m.email&&(0,r.val)("video_donate_email",m.email.value),(0,r.ge)("video_donate_billing_submit").onclick=VideoDonate.submitBillingForm,(0,r.hide)("video_donate_pr"),(0,r.show)("video_donate_step_basic")},onChooseCurrency(_){var e,i=VideoDonate.apiData,o=(0,a.floatval)(i.user_data.donation_mins.RUB),d=Math.ceil(o/vk.vcost),l=(0,a.floatval)((0,r.val)("video_donate_amount"));if(l){var n;n="votes"==_?Math.max(d,Math.round(l/vk.vcost)):Math.max(o,(0,s.intval)(l*vk.vcost)),(0,r.val)("video_donate_amount",n)}else{var v="votes"==_?d:o;(0,r.val)("video_donate_amount",v)}"votes"==_?(e=(0,t.getLang)("video_donate_box_min_amount_votes_hint",d),e+=" "+(0,t.getLang)("video_donate_box_total_votes_hint",vk.balance)):e=(0,t.getLang)("video_donate_box_min_amount_hint",o,!0),(0,r.val)("video_donate_amount_hint",e);var m=!!(0,s.intval)(i.user_data.tts_is_enabled),c=(0,a.floatval)((i.user_data.tts_mins||{}).RUB);m&&(c?"votes"==_?(0,r.val)("video_donate_comment_tts_hint",(0,t.getLang)("video_donate_box_text_speech_min_votes_hint",Math.ceil(c/vk.vcost))):(0,r.val)("video_donate_comment_tts_hint",(0,t.getLang)("video_donate_box_text_speech_min_hint",c)):(0,r.val)("video_donate_comment_tts_hint",(0,t.getLang)("video_donate_box_text_speech_hint")));var u=(0,t.getLang)("votes"==_?"video_donate_box_pay_button":"video_donate_box_donate_button");(0,r.val)("video_donate_basic_submit",u)},checkCommentLength(_){var e=VideoDonate.apiData,i=_.currentTarget,o=(0,r.val)(i).length,a=e.user_data.max_comment_length||VideoDonate.COMMENT_MAX_LENGTH,d="";if(o>a)d=(0,t.getLang)("video_donate_box_comment_too_long");else if(o>a-100){var l=a-o;d=(0,t.getLang)("text_N_symbols_remain",l)}(0,r.val)("video_donate_comment_length_hint",d)},showInputError(_,e){_=(0,r.ge)(_),(0,v.notaBene)(_),e&&((0,c.showTooltip)(_,{text:e,shift:[0,7,7],dir:"auto",nohide:!0,hasover:!0,showsp:300,onHide:function(){_.onkeydown=_.onblur=null,setTimeout(tooltips.destroy.bind(tooltips,_),300)}}),_.onkeydown=_.onblur=function(){_.tt&&tooltips.hide(_)})},submitBasicForm(_){var e=_.currentTarget,i=VideoDonate.apiData,t=(0,r.val)("video_donate_name"),d=VideoDonate.currencyDropdown?VideoDonate.currencyDropdown.val():"rubles",l=(0,r.val)("video_donate_comment"),n=(0,a.floatval)((0,r.val)("video_donate_amount")),m=0;if("votes"==d&&(m=n,n*=vk.vcost),!n||n<i.user_data.donation_mins.RUB)return VideoDonate.showInputError("video_donate_amount"),!1;if(l.length>VideoDonate.COMMENT_MAX_LENGTH)return VideoDonate.showInputError("video_donate_comment"),!1;var c={step:"basic",referrer:VideoDonate.params.referrer,currency:"RUB",name:t,amount:n,comment:l};(0,v.lockButton)(e),ajax.plainpost(i.form_api_ssl_url,{data:(0,o.toQueryString)(c)},(function(_){(0,v.unlockButton)(e),(_=JSON.parse(_))&&"success"==_.status?"votes"==d?VideoDonate.donateVotes(t,m,l):VideoDonate.toNextForm():_&&_.errors&&(0,s.each)(_.errors,(function(_,e){var i=VideoDonate.getErrorText(e.code);return VideoDonate.showInputError("video_donate_"+e.field,i),!1}))}),(function(){(0,v.unlockButton)(e)}))},donateVotes(_,e,i){ajax.post("al_video.php?act=donate_votes",{video:VideoDonate.params.videoId,hash:VideoDonate.params.votesHash,name:_,amount:e,comment:i},{onDone:function(_,e,i){if(_){(0,n.curBox)().hide();var o=(0,s.getTemplate)("video_donate_success_msg",{text:e});(0,m.showFastBox)((0,t.getLang)("video_donate_box_title"),o)}else VideoDonate.showInputError("video_donate_amount",e);vk.balance!=i&&(0,d.updateMoney)(i)},showProgress:v.lockButton.pbind("video_donate_basic_submit"),hideProgress:v.unlockButton.pbind("video_donate_basic_submit")}),(0,l.statlogsValueEvent)("video_donate","","checkout","votes")},toNextForm(){(0,r.hide)("video_donate_step_basic"),(0,r.show)("video_donate_step_billing"),(0,n.curBox)().setBackTitle(VideoDonate.toPrevForm)},toPrevForm(){(0,r.hide)("video_donate_step_billing"),(0,r.show)("video_donate_step_basic"),(0,n.curBox)().setBackTitle()},onChoosePayMethod(_){var e=VideoDonate.apiData,i=VideoDonate.params.prefilled,o=(0,r.domData)(_,"value");(0,v.radiobtn)(_,o,"video_donate_pay_method");var a=e.payin_currencies[o].additional_fields,d="";a&&(0,s.each)(a,((_,e)=>{var a="",l="",r="";"MOBILE_FAKE"==o&&"phone"==_?(a=(0,t.getLang)("video_donate_box_sms_payment_phone_placeholder"),l=(0,t.getLang)("video_donate_box_sms_payment_phone_hint"),r=i.phone?i.phone.value:""):"QIWI_MYCOM"==o&&"phone_number"==_&&(a=(0,t.getLang)("video_donate_box_qiwi_payment_phone_placeholder"),l=(0,t.getLang)("video_donate_box_qiwi_payment_phone_hint")),(a||l)&&(d+=(0,s.getTemplate)("video_donate_additional_field",{name:_,placeholder:a,hint:l,required:(0,s.intval)(e.required),prefilled:r,input_id:""}))})),(0,r.val)("video_donate_billing_additional_fields",d)},submitBillingForm(_){var e=VideoDonate.apiData,i=_.currentTarget,d=(0,v.radioval)("video_donate_pay_method"),c=VideoDonate.params.prefilled,u=(0,r.val)("video_donate_email");if(!/^.+@.+\..+$/.test(u))return VideoDonate.showInputError("video_donate_email"),!1;var E={step:"billing",referrer:VideoDonate.params.referrer,name:(0,r.val)("video_donate_name"),amount:(0,a.floatval)((0,r.val)("video_donate_amount")),currency:"RUB",comment:(0,r.val)("video_donate_comment"),billing_system_type:d,redirect:1,vk_test_group:VideoDonate.params.votesHash?1:2,_vk_id_encrypted:VideoDonate.params.payerId};c.email&&u==c.email.value?E.email_encrypted=c.email.encrypted:E.email=u;var b=!0;if((0,s.each)((0,r.geByClass)("video_donate_input","video_donate_billing_additional_fields"),((_,i)=>{var o=(0,r.domData)(i,"name"),t=(0,r.val)(i),l=(0,s.intval)((0,r.domData)(i,"required"));if("MOBILE_FAKE"==d&&"phone"==o&&c.phone&&(0,a.replaceEntities)(c.phone.value)==t)o+="_encrypted",t=c.phone.encrypted;else if(t||l){t=t.replace(/\s+/g,"");var n=e.payin_currencies[d].additional_fields[o].regex_validation;if(n&&!new RegExp(n).test(t))return VideoDonate.showInputError(i),b=!1,!1}E[o]=t})),b){if("MOBILE_FAKE"==d){ajax.plainpost(e.form_api_ssl_url,{data:(0,o.toQueryString)(E)},(_=>{if((0,v.unlockButton)(i),(_=JSON.parse(_))&&"success"==_.status){(0,n.curBox)().hide();var e=(0,s.getTemplate)("video_donate_success_msg",{text:(0,t.getLang)("video_donate_box_sms_payment_success")});(0,m.showFastBox)((0,t.getLang)("video_donate_box_title"),e)}else _&&_.errors&&(0,s.each)((0,r.geByClass)("video_donate_input","video_donate_billing_additional_fields"),(function(e,i){var o=(0,r.domData)(i,"name");if(_.errors[o]){var t=VideoDonate.getErrorText(_.errors[o].code);return VideoDonate.showInputError(i,t),!1}}))}),(()=>{(0,v.unlockButton)(i)})),(0,v.lockButton)(i)}else{var w=(0,r.ce)("iframe"),p=(0,r.ce)("form",{action:e.form_api_ssl_url,method:"post",target:"_blank",innerHTML:'<input type="hidden" name="data" value="'+(0,o.toQueryString)(E)+'"/>'});utilsNode.appendChild(w),w.contentDocument.body.appendChild(p),p.submit(),setTimeout((function(){(0,r.re)(w)}),0),(0,n.curBox)().hide()}(0,l.statlogsValueEvent)("video_donate","","checkout",d),ls.set("video_donate_pay_method",d)}},getErrorText(_){switch(_){case"special_characters_violation":return(0,t.getLang)("video_donate_special_chars_error");case"max_username_length_violation":return(0,t.getLang)("video_donate_username_length_error");case"mc_provider_violation":return(0,t.getLang)("video_donate_phone_provider_error");case"mc_provider_not_found":return(0,t.getLang)("video_donate_phone_provider_not_found_error")}},onDestroy(){delete VideoDonate.params,delete VideoDonate.apiData,VideoDonate.currencyDropdown&&(VideoDonate.currencyDropdown.destroy(),VideoDonate.currencyDropdown=null)}}},780223:(_,e,i)=>{"use strict";i.d(e,{default:()=>v});i(991181),i(856997),i(296253),i(283946),i(976142),i(59357);var o=i(386409),t=i(786067),a=i(486125),d=i(695724),l=i(49535),s=i(315544),r=i(961540),n=i(18149);const v={init(_,e){var i,v,m,c=(0,s.ge)("video_live_blacklist_search"),u=(0,s.ge)("video_live_blacklist_wrap"),E=(0,s.domByClass)(u,"olist"),b={};function w(_){var o=_;if((_=(0,d.trim)(_).replace(/\s+/g," ").toLowerCase())!==v){v=_;var a=_?i.search(_):e.list,l="";if(a.length)for(var r,n=new RegExp(_,"i"),m=0;m<a.length;m++)r=a[m],l+=(0,d.getTemplate)("video_live_blacklist_item",{id:r.id,href:r.href,photo:r.photo,name:_?r.name.replace(n,"<em>$&</em>"):r.name,class:b[r.id]?" olist_item_wrap_on":""});else l=(0,d.getTemplate)("video_live_blacklist_empty",{text:(0,t.langStr)((0,t.getLang)("global_search_not_found"),"search","<b>"+(0,d.clean)(o)+"</b>")});(0,s.val)(E,l)}}_.setOptions({bodyStyle:"padding:0;",onDestroy:function(){uiSearch.destroy(c),m&&m.destroy(),_=i=m=u=c=null}}),e.list.length&&(_.removeButtons().addButton((0,t.getLang)("global_save"),(function(i){ajax.post("al_video.php?act=save_live_blacklist",{exclude:Object.keys(b).join(","),hash:e.save_hash},{onDone:function(e){_.hide(),e&&(0,a.showDoneBox)(e)},showProgress:()=>(0,o.lockButton)(i),hideProgress:()=>(0,o.unlockButton)(i)})})).addButton((0,t.getLang)("global_cancel"),null,"no"),m=new uiScroll(u),w(""),u.onclick=function(_){var e=(0,s.domClosest)("olist_item_wrap",_.target);if(!e)return;(0,l.cancelEvent)(_);var i=(0,s.domData)(e,"id");(0,s.toggleClass)(e,"olist_item_wrap_on")?b[i]=1:delete b[i]},c&&(i=new n.vkIndexer(e.list,(function(_){return _.name+" https://"+(0,r.getHostName)()+_.href})),uiSearch.init(c,{onChange:w}),uiSearch.focus(c)))}}},340154:(_,e,i)=>{"use strict";i.d(e,{default:()=>w});i(530522),i(66108),i(296253),i(579665),i(95767),i(319371),i(850110),i(751876);var o=i(315544),t=i(325489),a=i(786067),d=i(40906),l=i(635676),s=i(49535),r=i(695724),n=i(376852),v=i(215949),m=i(979604),c=i(663681),u=i(108046);function E(_,e){return function(_){if(Array.isArray(_))return _}(_)||function(_,e){var i=null==_?null:"undefined"!=typeof Symbol&&_[Symbol.iterator]||_["@@iterator"];if(null==i)return;var o,t,a=[],d=!0,l=!1;try{for(i=i.call(_);!(d=(o=i.next()).done)&&(a.push(o.value),!e||a.length!==e);d=!0);}catch(_){l=!0,t=_}finally{try{d||null==i.return||i.return()}finally{if(l)throw t}}return a}(_,e)||function(_,e){if(!_)return;if("string"==typeof _)return b(_,e);var i=Object.prototype.toString.call(_).slice(8,-1);"Object"===i&&_.constructor&&(i=_.constructor.name);if("Map"===i||"Set"===i)return Array.from(_);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return b(_,e)}(_,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(_,e){(null==e||e>_.length)&&(e=_.length);for(var i=0,o=new Array(e);i<e;i++)o[i]=_[i];return o}const w={VIDEOS_LIMIT:30,VIDEO_ITEM_HEIGHT:88,LOADING_PROGRESS_HEIGHT:27,lists:{},disableScrollLoading:!1,blockTpl:`\n<div class="mv_playlist %canSubscribeClass%" id="video_mvpl">\n  <div class="mv_playlist_header clear_fix">\n    <div class="mv_playlist_header_buttons_wrap">\n      <div class="mv_playlist_header_btn %autoplayBtnClass%" onmouseover="VideoPlaylist.showAutoplayTooltip(this);" onclick="VideoPlaylist.toggleAutoplay(this)">\n        ${(0,c.getIcon20Arrow2SquarepathOutline)().icon}\n      </div>\n      <div class="mv_playlist_header_btn" onmouseover="VideoPlaylist.showReverseTooltip(this);" onclick="VideoPlaylist.toggleReverse(this)">\n        <div class="mv_playlist_header_reverse_icon"></div>\n        ${(0,m.getIcon20SortOutline)().icon}\n      </div>\n    </div>\n    <div class="mv_playlist_header_title">%title%</div>\n    <div class="mv_playlist_header_videos_cnt">%size%</div>\n    <a class="mv_playlist_header_subscribe_btn" onclick="VideoPlaylist.toggleSubscription();"></a>\n  </div>\n  <div class="mv_playlist_list">\n    <div class="mv_playlist_load_top"><div class="pr_bt"></div><div class="pr_bt"></div><div class="pr_bt"></div></div>\n    <div class="mv_playlist_list_cont">%items%</div>\n    <div class="mv_playlist_load_bottom %loading%"><div class="pr_bt"></div><div class="pr_bt"></div><div class="pr_bt"></div></div>\n    <div class="mv_playlist_list_subscribe_cont">\n      <div class="mv_playlist_list_subscribe_title">%playlistListSubscribeTitle%</div>\n      <a class="mv_playlist_list_subscribe_btn" onclick="VideoPlaylist.toggleSubscription();"></a>\n    </div>\n  </div>\n</div>\n  `,blockItemTpl:'\n<a class="VideoRecomsItem%itemClass%%restrictionClasses%" id="mv_playlist_video%vid%" onclick="return VideoPlaylist.showVideo(\'%vid%\', \'%hash%\', event);" data-vid="%vid%" href="%link%">\n  <div class="VideoRecomsItem__thumb_wrap">\n    %restrictionBlock%\n    <img src="%thumb%" loading="lazy" width="128"  height="72" class="VideoRecomsItem__thumb%restrictionThumbClass%" alt="%title%" onerror="VideoPlaylist.onImageError(this)"/>\n    <div class="VideoRecomsItem__duration">%duration%</div>\n  </div>\n  <div class="VideoRecomsItem__info">\n    <div class="VideoRecomsItem__title" data-task-mouseover="Video/check_title">%title%</div>\n    <div class="VideoRecomsItem__views">%views%</div>\n  </div>\n</a>\n  ',showReverseTooltip(_){(0,n.showTooltip)(_,{text:(0,a.getLang)("video_playlist_reverse_tt"),shift:[7,7,0],showdt:0,black:1})},showAutoplayTooltip(_){var e="video_playlist_autoplay_"+(VideoPlaylist.isAutoplayEnabled()?"disable":"enable")+"_tt",i=(0,a.getLang)(e);(0,n.showTooltip)(_,{text:i,shift:[7,7,0],showdt:0,black:1})},toggleAutoplay(_){var e=!VideoPlaylist.isAutoplayEnabled();(0,o.toggleClass)(_,"_active",e),e?ls.remove("video_playlist_autoplay_disabled"):ls.set("video_playlist_autoplay_disabled",1),tooltips.destroy(_),VideoPlaylist.showAutoplayTooltip(_)},toggleSubscription(){if(!vk.id)return(0,v.showQuickLoginBox)(),!1;var _=VideoPlaylist.getCurList();_&&window.ajax.post("al_video.php?act=playlist_subscribe",{playlist_raw_id:_.id,subscribe:_.is_subscribed?0:1,hash:mvcur.mvData.pl_subscription_hash,ref:Videoview.getVideoModule()},{onDone:_=>{this.setIsSubscribed(_)}})},isAutoplayEnabled:()=>!ls.get("video_playlist_autoplay_disabled"),toggleReverse(_){var e=VideoPlaylist.getCurList();if(e){if(e.reversed=!e.reversed,e.shownFirstItemIdx||e.shownLastItemIdx){var i=e.current.split("_"),t=e.list.findIndex((_=>_[0]==i[0]&&_[1]==i[1]));e.shownFirstItemIdx=Math.max(0,t-VideoPlaylist.VIDEOS_LIMIT),e.shownLastItemIdx=Math.min(e.list.length,e.shownFirstItemIdx+2*VideoPlaylist.VIDEOS_LIMIT)}(0,o.toggleClass)(_,"_active",e.reversed),VideoPlaylist.updateBlockList(e.id)}},buildBlock(_,e,i){var t=VideoPlaylist.getBlock(),d=!!t&&(0,o.data)(t,"playlist");if(d&&d.id===_&&!i)return t;VideoPlaylist.removeBlock();var l=VideoPlaylist.getList(_,e);if(!l||l.size<=1&&!l.force_layout)return!1;var s=(0,r.trim)(VideoPlaylist.blockTpl),n=VideoPlaylist.buildBlockList(l),v="";if(cur.is_showcase&&VideoPlaylist.isStoredPlaylistId(_)){var m=E(_.split("_"),2),c=m[0],u=m[1];v=+c!==vk.id&&+u>0?1===l.list.length?"_can_subscribe_list":"_can_subscribe_header":"_can_not_subscribe"}var b=(0,o.se)((0,o.rs)(s,{items:n,title:l.title||"",size:l.size?(0,a.langNumeric)(l.size,cur.lang.video_playlist_size):"",autoplayBtnClass:VideoPlaylist.isAutoplayEnabled()?"_active":"",playlistListSubscribeTitle:(0,a.getLang)("video_player_playlist_ask_to_subscribe"),canSubscribeClass:v,loading:l.list.length>0?"":"loading"}));return(0,o.data)(b,"playlist",l),this._block=b,b},buildBlockListItem(_,e){if(_){var i,t=(0,r.trim)(VideoPlaylist.blockItemTpl);if((0,d.isArray)(_)){var l=_[VideoConstants.VIDEO_ITEM_INDEX_OWNER_ID]+"_"+_[VideoConstants.VIDEO_ITEM_INDEX_ID];i={vid:l,hash:_[VideoConstants.VIDEO_ITEM_INDEX_LIST_ID]||window.Video&&Video.getDefaultListId(),link:_[VideoConstants.VIDEO_ITEM_INDEX_LINK]||`/video${l}`,thumb:_[VideoConstants.VIDEO_ITEM_INDEX_SMALL_THUMB],title:_[VideoConstants.VIDEO_ITEM_INDEX_TITLE],duration:_[VideoConstants.VIDEO_ITEM_INDEX_DURATION],views:(0,a.getLang)("video_N_views_list",_[VideoConstants.VIDEO_ITEM_INDEX_VIEWS]||1,!0),itemClass:l===e?" VideoRecomsItem--active":"",restrictionBlock:_[VideoConstants.VIDEO_ITEM_INDEX_RESTRICTION_BLOCK],restrictionClasses:_[VideoConstants.VIDEO_ITEM_INDEX_RESTRICTION_CLASSES]}}else i=(0,r.extend)({link:`/video${_.vid}`},_,{itemClass:_.vid===e?" VideoRecomsItem--active":""});return i.hasOwnProperty("restrictionBlock")&&i.restrictionBlock?(i.itemClass+=" VideoRestriction--onlyIcon",i.restrictionThumbClass=" VideoRestriction__thumb"):(i.restrictionBlock="",i.restrictionClasses="",i.restrictionThumbClass=""),(0,o.rs)(t,i)}},buildBlockList(_){var e,i,o;_.shownFirstItemIdx||_.shownLastItemIdx?(e=function(){return _.reversed?_.shownLastItemIdx-1:_.shownFirstItemIdx},i=function(e){return _.reversed?e>=_.shownFirstItemIdx:e<_.shownLastItemIdx},o=function(e){return _.reversed?--e:++e}):(e=function(){return _.reversed?_.list.length-1:0},i=function(e){return _.reversed?e>=0:e<_.list.length},o=function(e){return _.reversed?--e:++e});for(var t="",a=e();i(a);a=o(a))t+=this.buildBlockListItem(_.list[a],_.current);return t},processScroll(){var _,e,i;if(!VideoPlaylist.disableScrollLoading){var t,a=(0,o.geByClass1)("mv_playlist_list"),d=(0,o.geByClass1)("mv_playlist_load_top"),l=(0,o.geByClass1)("mv_playlist_load_bottom");if(a.offsetHeight+Math.round(a.scrollTop)>=a.scrollHeight&&!(0,o.isVisible)(l))t=!0;else{if(0!==a.scrollTop||(0,o.isVisible)(d))return;t=!1}var s=this.getCurList();if(s){var r=t&&!s.reversed||!t&&s.reversed;if(void 0!==s.shownFirstItemIdx||void 0!==s.shownLastItemIdx){if(r&&s.loadBottomIsFull&&s.shownLastItemIdx===s.size||!r&&0===s.shownFirstItemIdx)return}else if(r&&s.loadBottomIsFull||!r&&!s.loadFirstItemIdx)return;r&&!s.loadBottomIsFull&&(t?(0,o.show)(l):(0,o.show)(d));var n,v,m=E(this.getLoadedPlaylistData(...s.id.split("_")),1)[0];if(s.list.length<m.length){var c=m.findIndex((_=>{var e,i,o;return(null==_?void 0:_[1])==(null===(e=s.list[s.shownFirstItemIdx])||void 0===e||null===(i=e.vid)||void 0===i||null===(o=i.split("_"))||void 0===o?void 0:o[1])}));s.list=m,s.shownFirstItemIdx=c,s.shownLastItemIdx=Math.min(m.length,s.shownFirstItemIdx+2*VideoPlaylist.VIDEOS_LIMIT),s.loadFirstItemIdx=0,s.loadLastItemIdx=m.length}if(this.isStoredPlaylistId(s.id)){var u=[];if(r?(n=s.shownLastItemIdx,v=n+VideoPlaylist.VIDEOS_LIMIT,u=m.slice(n,v),s.shownLastItemIdx+=u.length,s.shownFirstItemIdx=Math.max(0,s.shownLastItemIdx-2*VideoPlaylist.VIDEOS_LIMIT)):(n=Math.max(0,s.shownFirstItemIdx-VideoPlaylist.VIDEOS_LIMIT),v=Math.min(s.shownFirstItemIdx,n+VideoPlaylist.VIDEOS_LIMIT),u=m.slice(n,v),s.shownFirstItemIdx-=u.length,s.shownLastItemIdx=Math.min(s.shownLastItemIdx,s.shownFirstItemIdx+2*VideoPlaylist.VIDEOS_LIMIT)),u.length){if((0,o.data)(this.getBlock(),"playlist",s),this.addVideosToBlockList(u,t,s.reversed,!0),u.length>=VideoPlaylist.VIDEOS_LIMIT)return;r?(n=s.shownLastItemIdx,v=n+VideoPlaylist.VIDEOS_LIMIT,s.loadBottomIsFull||(t?(0,o.show)(l):(0,o.show)(d))):(n=Math.max(0,s.shownFirstItemIdx-VideoPlaylist.VIDEOS_LIMIT),v=n+Math.min(s.shownFirstItemIdx,VideoPlaylist.VIDEOS_LIMIT))}}if(s.id===(null===(_=window.Video)||void 0===_?void 0:_.VIDEO_GLOBAL_SEARCH_TYPE)&&(null===(e=window.Video)||void 0===e?void 0:e.isGlobalSearchMode())&&(null===(i=window.Video)||void 0===i?void 0:i.shouldShowSearchInPlaylistWithSearch())){var b,w,p=(0,o.ge)("ui_"+(null===(b=window.Video)||void 0===b?void 0:b.VIDEO_GLOBAL_SEARCH_TYPE)+"_load_more");(0,o.isVisible)(p)?Video.showMore(null===(w=window.Video)||void 0===w?void 0:w.VIDEO_GLOBAL_SEARCH_TYPE,p):this.setCurPlaylistBottomAsFull()}else if(r&&cur.showcaseSection&&cur.catPlaylistId===s.id){var D=(0,o.ge)("ui_"+cur.showcaseSection+"_load_more");(0,o.isVisible)(D)?Video.showMoreShowcase(cur.showcaseSection,D):this.setCurPlaylistBottomAsFull()}else{if(!this.isStoredPlaylistId(s.id))return s.loadBottomIsFull=!0,(0,o.data)(this.getBlock(),"playlist",s),void(t?(0,o.hide)(l):(0,o.hide)(d));var h;h=r?{playlist_raw_id:s.id,offset:Math.max(s.loadLastItemIdx,m.length),limit:8*VideoPlaylist.VIDEOS_LIMIT}:{playlist_raw_id:s.id,offset:Math.max(0,s.loadFirstItemIdx-VideoPlaylist.VIDEOS_LIMIT),limit:Math.min(s.loadFirstItemIdx,8*VideoPlaylist.VIDEOS_LIMIT)},window.ajax.post("al_video.php?act=load_playlist_videos",h,{onDone:(_,e,i)=>{if(s=this.getCurList(),r){if(!_||0===_.length)return s.loadBottomIsFull=!0,(0,o.data)(this.getBlock(),"playlist",s),void(t?(0,o.hide)(l):(0,o.hide)(d));for(var a=s.list.map((_=>_.vid)),c=0;c<_.length&&a.includes(_[c].vid);c++)_.splice(c,1);m.push(..._),s.list=[...s.list,..._],s.loadLastItemIdx=i,s.shownLastItemIdx=Math.min(i,v),s.shownFirstItemIdx=Math.max(0,s.shownLastItemIdx-2*VideoPlaylist.VIDEOS_LIMIT),s.loadBottomIsFull=i>=s.size}else m.unshift(..._),s.list=[..._,...s.list],s.loadFirstItemIdx=Math.max(e,0),s.shownFirstItemIdx=Math.max(e,n,0),s.shownLastItemIdx=Math.min(s.shownLastItemIdx,s.shownFirstItemIdx+2*VideoPlaylist.VIDEOS_LIMIT);(0,o.data)(this.getBlock(),"playlist",s),this.addVideosToBlockList(m.slice(n,v),t,s.reversed,!0)},onFail:()=>{VideoPlaylist.disableScrollLoading=!0,t?(0,o.hide)(l):(0,o.hide)(d),setTimeout((()=>{VideoPlaylist.disableScrollLoading=!1}))}})}}}},loadPlaylistByVideo(_,e){var i=(0,o.geByClass1)("mv_playlist_load_bottom");(0,o.isVisible)(i)||((0,o.show)(i),window.ajax.post("al_video.php?act=load_playlist_videos",{playlist_raw_id:_,video_raw_id:e},{onDone:(e,t,a,d)=>{(0,o.hide)(i);var l=this.getCurList();if(l&&!e)return l.loadBottomIsFull=!0,void(0,o.data)(this.getBlock(),"playlist",l);l.size=d,l.list=e,l.loadFirstItemIdx=t,l.loadLastItemIdx=a,l.shownFirstItemIdx=Math.max(0,Math.floor(e.length/2)-VideoPlaylist.VIDEOS_LIMIT),l.shownLastItemIdx=Math.min(e.length,d,l.shownFirstItemIdx+2*VideoPlaylist.VIDEOS_LIMIT),l.loadBottomIsFull=l.loadLastItemIdx>=l.size,(0,o.data)(this.getBlock(),"playlist",l),this.updateBlockList(_)},onFail:()=>{(0,o.hide)(i)}}))},setCurPlaylistBottomAsFull(){var _=this.getCurList();_.loadBottomIsFull=!0,_.reversed?(0,o.hide)((0,o.geByClass1)("mv_playlist_load_top")):(0,o.hide)((0,o.geByClass1)("mv_playlist_load_bottom")),(0,o.data)(this.getBlock(),"playlist",_)},addVideosToBlockList(_){var e,i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],d=VideoPlaylist.getBlock(),l=(0,o.geByClass1)("mv_playlist_list_cont",d),s=(0,o.geByClass1)("mv_playlist_list");if(i?(0,o.hide)((0,o.geByClass1)("mv_playlist_load_bottom")):(0,o.hide)((0,o.geByClass1)("mv_playlist_load_top")),null==_?void 0:_.length){var r=(0,o.data)(d,"playlist");r.id===(null===(e=window.Video)||void 0===e?void 0:e.VIDEO_GLOBAL_SEARCH_TYPE)&&(r.list=[...r.list,..._],(0,o.data)(this.getBlock(),"playlist",r));var n=document.createDocumentFragment(),v=2*VideoPlaylist.VIDEOS_LIMIT,m=[...l.children],c=m.length,u=_.length;if(i){var E=c>=v-u?c-v+u:0;if(a)for(var b=E;b<c;b++)n.appendChild(m[b]);if(t)for(var w=_.length-1;w>=0;w--)n.appendChild((0,o.se)(this.buildBlockListItem(_[w])));else for(var p=0;p<_.length;p++)n.appendChild((0,o.se)(this.buildBlockListItem(_[p])));a?(l.replaceChildren(n),s.scrollTop=s.scrollTop-VideoPlaylist.VIDEO_ITEM_HEIGHT*E):l.appendChild(n)}else{if(a)for(var D=c+u>=v?v-u:c,h=0;h<D;h++)n.appendChild(m[h]);if(t)for(var P=0;P<_.length;P++)n.prepend((0,o.se)(this.buildBlockListItem(_[P])));else for(var M=_.length-1;M>=0;M--)n.prepend((0,o.se)(this.buildBlockListItem(_[M])));a?l.replaceChildren(n):l.prepend(n),s.scrollTop=s.scrollTop+VideoPlaylist.VIDEO_ITEM_HEIGHT*_.length}this.updateScrollbar()}},updateBlockList(_){var e=VideoPlaylist.getCurList();if(e&&e.id==_){var i=VideoPlaylist.getBlock(),t=(0,o.geByClass1)("mv_playlist_list_cont",i),a=VideoPlaylist.buildBlockList(e);(0,o.val)(t,a);var d=(0,o.data)(i,"sb");d&&d.update(),VideoPlaylist.setCurVideo(e.current),VideoPlaylist.updateControls()}},getBlock(){return this._block},removeBlock(){var _=(0,o.data)(this._block,"sb");_&&(_.destroy(),(0,s.removeEvent)((0,o.geByClass1)("mv_playlist_list"),"scroll")),(0,o.re)(this._block),(0,o.removeData)(this._block),this._block=null,VideoPlaylist.toggleStateClasses(),VideoPlaylist.updateControls()},setIsSubscribed(_){VideoPlaylist.getCurList();var e=VideoPlaylist.getBlock();if(e){var i=(0,o.data)(e,"playlist");if(i){void 0!==_&&(i.is_subscribed=!!_);var t=(0,a.getLang)(i.is_subscribed?"video_player_playlist_subscribed":"video_player_playlist_subscribe");(0,o.geByClass1)("mv_playlist_header_subscribe_btn",e).innerHTML=t,(0,o.geByClass1)("mv_playlist_list_subscribe_btn",e).innerHTML=t,(0,o.toggleClass)(e,"_is_subscribed",i.is_subscribed)}}},setCurVideo(_,e){var i=VideoPlaylist.getBlock();if(i){var t=(0,o.data)(i,"playlist");if(t){_&&(t.current=_);var a=(0,o.domByClass)(i,"VideoRecomsItem--active");if(_&&((0,o.removeClass)(a,"VideoRecomsItem--active"),a=(0,o.ge)("mv_playlist_video"+_),(0,o.addClass)(a,"VideoRecomsItem--active")),a){var d=(0,o.geByClass1)("mv_playlist_list",i),s=(0,o.getXY)(a)[1],r=(0,o.getSize)(a)[1],n=(0,o.getXY)(d)[1],v=(0,o.getSize)(d)[1],m=s-n;if(m<0||m+r>v){var c=d.scrollTop+s-n-v/2+r/2;d.scrollTop!=c&&(e?(0,l.animate)(d,{scrollTop:c,transition:l.Fx.Transitions.easeOutCubic},450,E):(d.scrollTop=c,E()))}(0,u.idlizeCall)((()=>{VideoPlaylist._queueNextVideo(_)}),5e3)}}}function E(){var _=VideoPlaylist.getBlock();if(_){var e=(0,o.data)(_,"sb");e&&e.update()}}},isWallPlaylistId:_=>/^wall_-?\d+$/.test(_),isPostPlaylistId:_=>/^post_-?\d+_\d+$/.test(_),isCatPlaylistId:_=>/^cat_(\d|[\w_])+$/.test(_),isStoredPlaylistId:_=>/^-?\d+_-?\d+$/.test(_),getList(_,e){var i,o,t;if(VideoPlaylist.VIDEOS_LIMIT=2*Math.floor(window.innerHeight/VideoPlaylist.VIDEO_ITEM_HEIGHT)||VideoPlaylist.VIDEOS_LIMIT,this.lists[_]&&!(null===(i=cur.currentSortings)||void 0===i?void 0:i[`playlist_${_.split("_")[1]}`])){var d=this.lists[_].list.map((_=>_.vid));if((0,r.inArray)(e,d))return this.lists[_]}if(VideoPlaylist.isWallPlaylistId(_))return cur.wallVideos&&cur.wallVideos[_]&&this.uniqList(cur.wallVideos[_]);if(VideoPlaylist.isPostPlaylistId(_)||"feed_recommends"===_)return cur.pageVideosList&&cur.pageVideosList[_];if(VideoPlaylist.isCatPlaylistId(_))return cur.catVideosList&&cur.catVideosList[_];if(_===(null===(o=window.Video)||void 0===o?void 0:o.VIDEO_GLOBAL_SEARCH_TYPE)&&(null===(t=window.Video)||void 0===t?void 0:t.shouldShowSearchInPlaylistWithSearch())){var l,s,n=null===(l=window.Video)||void 0===l?void 0:l.getCurrentGlobalSearchKey();if(n)return{id:_,title:(0,a.getLang)("video_search_result_title"),list:(null===(s=cur.globalSearchResults[n])||void 0===s?void 0:s.list)||[],force_layout:!0}}if(VideoPlaylist.isStoredPlaylistId(_)){var v=E(_.split("_"),2),m=v[0],c=v[1],u=E(this.getLoadedPlaylistData(m,c),3),b=u[0],w=u[1],p=u[2];if(b&&b.length){var D;if(e)for(var h=0;h<b.length;h++){var P=b[h];P[0]+"_"+P[1]===e&&(D=h)}var M=b.length;cur.videosCount&&cur.videosCount[m]&&cur.videosCount[m][w]&&(M=cur.videosCount[m][w]);var O=0,g=b.length,C=b.length;b.length>2*VideoPlaylist.VIDEOS_LIMIT&&(O=Math.max(0,D-VideoPlaylist.VIDEOS_LIMIT),g=Math.min(b.length,O+2*VideoPlaylist.VIDEOS_LIMIT));var L=!1;window.mvcur&&void 0!==mvcur.pl_is_subscribed?L=mvcur.pl_is_subscribed:void 0!==cur.isPlaylistSubscribed&&(L=cur.isPlaylistSubscribed);var I={id:_,title:p,list:b,size:M,loadFirstItemIdx:0,loadLastItemIdx:C,shownFirstItemIdx:O,shownLastItemIdx:g,loadBottomIsFull:b.length>=M,force_layout:!(!window.mvcur||!mvcur.forcePlaylistLayout),is_subscribed:L};return void 0===D&&e&&(this.loadPlaylistByVideo(_,e),I.force_layout=!0,I.shownFirstItemIdx=0,I.loadBottomIsFull=!0),I}}},getLoadedPlaylistData(_,e){var i,o,t=[];return-2==e?(i="all",o=cur.playlistAddedTitle):-1==e?(i="uploaded",o=cur.playlistUploadedTitle):cur.is_showcase?(i="playlist_"+e,o=cur.playlistTitle):(i="album_"+e,o=cur.playlistTitle),(0,r.each)([cur.silentLoaded,cur.pageVideosList],((e,o)=>{if(o&&o[_]&&o[_][i])return t=o[_][i].list||o[_][i],!1})),t&&t.length||!this.lists[i]||(t=this.lists[i]),[t,i,o]},getCurList(){var _=VideoPlaylist.getBlock();if(_)return(0,o.data)(_,"playlist")},getCurListId(){var _=VideoPlaylist.getCurList();if(_)return _.id},addList(_){_.size=_.size||_.list.length,_.loadFirstItemIdx=0,_.loadLastItemIdx=_.list.length,_.shownFirstItemIdx=0,_.shownLastItemIdx=_.list.length,_.loadBottomIsFull=!1,this.lists[_.id]=_},extendList(_,e){if(!this.lists[_])return!1;for(var i=this.lists[_].list,o=[],t={},a=0,d=0;;)if(i[a]&&e[d]&&i[a].vid==e[d].vid)t[i[a].vid]||(o.push(i[a]),t[i[a].vid]=1),++a,++d;else if(i[a])t[i[a].vid]||(o.push(i[a]),t[i[a].vid]=1),++a;else{if(!e[d])break;t[e[d].vid]||(o.push(e[d]),t[e[d].vid]=1),++d}return this.lists[_].list=o,this.lists[_]},uniqList(_){for(var e,i={},o=0;e=_.list[o];++o)i[e.vid]?_.list.splice(o,1):i[e.vid]=!0;return _},isCollapsed(){var _=VideoPlaylist.getBlock();return!(!_||!(0,o.data)(_,"collapsed"))},toggle(_,e){var i;if(void 0===_&&(_=VideoPlaylist.isCollapsed()),!(null===(i=window.mvcur)||void 0===i?void 0:i.minimized)||!_){var t=VideoPlaylist.getBlock();if(t&&VideoPlaylist.isCollapsed()!=!_)return(0,o.data)(t,"collapsed",!_),VideoPlaylist.toggleStateClasses(),Videoview.playerOnResize(),Videoview.updateReplyFormPos(),_&&setTimeout((()=>{VideoPlaylist.updateScrollbar(),VideoPlaylist.setCurVideo()})),!1}},toggleStateClasses(){var _=!!VideoPlaylist.getBlock(),e=Videoview.isMinimized(),i=VideoPlaylist.isCollapsed();(0,o.toggleClass)("mv_box","_has_playlist",_&&!e),(0,o.toggleClass)("mv_box","_hide_playlist",_&&!e&&i);var t="";_&&((0,o.toggleClass)("mv_box","_hide_recomms",!i),t=(0,a.getLang)(i?"video_aria_expand_playlist":"video_aria_minimize_playlist")),(0,o.attr)("mv_top_pl_toggle","aria-label",t)},updateScrollbar(){var _=VideoPlaylist.getBlock();if(_){var e=(0,o.data)(_,"sb");if(e)e.update(!0,!0);else{var i=(0,o.geByClass1)("mv_playlist_list",_),t=new Scrollbar(i,{prefix:"mv_pl_",nokeys:!0,padding:0});(0,o.data)(_,"sb",t),(0,s.addEvent)((0,o.geByClass1)("mv_playlist_list"),"scroll",this.processScroll.bind(this))}}},updateControls(){var _=VideoPlaylist.getCurList(),e=VideoPlaylist.getVideoIndex();_&&_.reversed&&(e=_.list.length-e-1),(0,o.toggle)("mv_pl_prev",!!_&&e>0),(0,o.toggle)("mv_pl_next",!!_&&e<_.list.length-1)},showVideo(_,e,i){if(i&&(0,s.checkEvent)(i))return!0;var o=VideoPlaylist.getCurList();if(o){if(VideoPlaylist.saveScrollPos(),mvcur.options.params&&"direct"===mvcur.options.params.module&&mvcur.mvPrevLoc&&Videoview.backLocation(),o.loaded&&o.loaded.vid===_){var a=o.loaded;Videoview.show(null,_,a.listId,(0,r.extend)(a.options,{playlistId:o.id})),Videoview.showVideo.apply(Videoview,a.hubData);var d=mvcur.preloadStatsHashes?mvcur.preloadStatsHashes[_]:"";d&&(0,u.idlizeCall)((()=>{ajax.post("al_video.php?act=a_inc_preload_stats",{stat_preload_hash:d})}))}else{var l=VideoPlaylist.getVideoIndex(_),n=(o.reversed?o.list.length-1-l:l)<o.list.length-1?1:0;(0,t.showVideo)(_,e,{autoplay:1,playlistId:o.id,addParams:{force_no_repeat:1,show_next:n},module:Videoview.getVideoModule()})}return!1}},saveScrollPos(){var _=VideoPlaylist.getBlock(),e=(0,o.domByClass)(_,"mv_playlist_list");(0,o.data)(_,"savedScrollTop",e.scrollTop)},restoreScrollPos(){var _=VideoPlaylist.getBlock(),e=(0,o.domByClass)(_,"mv_playlist_list"),i=(0,o.data)(_,"savedScrollTop");i&&(e.scrollTop=i)},_queueNextVideo(_){var e=VideoPlaylist.getCurList();if(e){_=_||e.current;var i=+VideoPlaylist._getNextVideoIndex(_);if(-1!==i){var o=e.list[i],a=(0,d.isArray)(o)?o[VideoConstants.VIDEO_ITEM_INDEX_OWNER_ID]+"_"+o[VideoConstants.VIDEO_ITEM_INDEX_ID]:o.vid,l=(0,d.isArray)(o)?o[VideoConstants.VIDEO_ITEM_INDEX_LIST_ID]:o.hash;if(e.queued!==a&&(!e.loaded||e.loaded.vid!==a)){e.loaded=!1,e.queued=a;var s=(e.reversed?e.list.length-i:i)<e.list.length-1?1:0;(0,t.showVideo)(a,l,{hidden:function(_,i,o,t){e.queued===t&&(e.loaded={vid:t,hubData:_,options:i,listId:o||window.Video&&Video.getDefaultListId()}),e.queued=!1},module:Videoview.getVideoModule(a),addParams:{autoplay:1,force_no_repeat:1,preload:1,show_next:s,playlist_id:e.id}})}}}},getNextVideos(){var _=[];if(!(VideoPlaylist.isAutoplayEnabled()||window.mvcur&&mvcur.player))return _;var e=VideoPlaylist.getCurList(),i=VideoPlaylist._getNextVideoIndex();if(!e||i<0)return _;for(;_.length<3&&i>=0&&i<e.list.length;){var o=e.list[i],t=void 0;t=(0,d.isArray)(o)?{vid:o[VideoConstants.VIDEO_ITEM_INDEX_OWNER_ID]+"_"+o[VideoConstants.VIDEO_ITEM_INDEX_ID],thumb:o[VideoConstants.VIDEO_ITEM_INDEX_THUMB],views:(0,a.getLang)("video_N_views_list",o[VideoConstants.VIDEO_ITEM_INDEX_VIEWS],!0),title:o[VideoConstants.VIDEO_ITEM_INDEX_TITLE],duration:o[VideoConstants.VIDEO_ITEM_INDEX_DURATION]}:o,_.push(t),i+=e.reversed?-1:1}return _},prevVideo(){var _=VideoPlaylist.getCurList();if(_){var e=VideoPlaylist.getVideoIndex()+(_.reversed?1:-1);if(!(e<0)){var i=_.list[e],o=(0,d.isArray)(i)?i[0]+"_"+i[1]:i.vid;VideoPlaylist.showVideo(o)}}},nextVideo(){var _=VideoPlaylist.getCurList();if(_){var e=VideoPlaylist._getNextVideoIndex();if(!(e<0)){var i=_.list[e],o=(0,d.isArray)(i)?i[0]+"_"+i[1]:i.vid;VideoPlaylist.showVideo(o)}}},getVideoIndex(_){var e=VideoPlaylist.getCurList();if(!e)return-1;if(_||(_=e.current),!_)return-1;var i=-1;return(0,r.each)(e.list,((e,o)=>{if(((0,d.isArray)(o)?o[0]+"_"+o[1]:o.vid)==_)return i=e,!1})),i},_getNextVideoIndex(_){var e=VideoPlaylist.getCurList();if(!e)return-1;var i=VideoPlaylist.getVideoIndex(_);if(i<0)return 0;var o=i+(e.reversed?-1:1);return o>=0&&o<e.list.length?o:-1},onImageError(_){_.parentNode.removeChild(_)}}},233472:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var core_js_modules_es6_array_from__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(530522),core_js_modules_es6_regexp_to_string__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(66108),core_js_modules_es6_object_to_string__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(296253),core_js_modules_es7_symbol_async_iterator__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(579665),core_js_modules_es6_symbol__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(95767),core_js_modules_es6_array_map__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(319371),core_js_modules_es6_regexp_constructor__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(283946),core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(751876),core_js_modules_es6_regexp_match__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(21466),core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(59357),core_js_modules_es6_array_slice__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(850110),_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(315544),_shared_lib_browser__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(726271),_web_lib_video__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(325489),_web_lib_lang__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(786067),_web_lib_utils__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(982452),_shared_lib_statlogs__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(479957),_web_lib_input_utils__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(100416),_web_lib_layout_utils__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(635429),_shared_lib_parse__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(520820),_web_lib_date__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(289988),_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(49535),_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__(486125),_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__(695724),_web_lib_ui__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__(386409),_web_lib_message_box__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__(654612),_web_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__(376852),_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_27__=__webpack_require__(787481),_shared_lib_common__WEBPACK_IMPORTED_MODULE_28__=__webpack_require__(40906),_web_lib_fx__WEBPACK_IMPORTED_MODULE_29__=__webpack_require__(635676),_web_likes_helpers__WEBPACK_IMPORTED_MODULE_50__=__webpack_require__(465864),_video_donate__WEBPACK_IMPORTED_MODULE_30__=__webpack_require__(912998),_video_playlist__WEBPACK_IMPORTED_MODULE_31__=__webpack_require__(340154),_video_chat__WEBPACK_IMPORTED_MODULE_32__=__webpack_require__(619103),_video_initializer__WEBPACK_IMPORTED_MODULE_33__=__webpack_require__(656675),_player_callback__WEBPACK_IMPORTED_MODULE_34__=__webpack_require__(688077),_web_videoview_moder_actions__WEBPACK_IMPORTED_MODULE_35__=__webpack_require__(929681),_admin_actions__WEBPACK_IMPORTED_MODULE_36__=__webpack_require__(555381),_web_lib_element_tooltip__WEBPACK_IMPORTED_MODULE_37__=__webpack_require__(99392),_shared_counters_tmr__WEBPACK_IMPORTED_MODULE_38__=__webpack_require__(337668),_web_gifts_gifts__WEBPACK_IMPORTED_MODULE_39__=__webpack_require__(965030),_web_reports_reports__WEBPACK_IMPORTED_MODULE_40__=__webpack_require__(186699),_web_index__WEBPACK_IMPORTED_MODULE_41__=__webpack_require__(215949),_shared_lib_web_stats__WEBPACK_IMPORTED_MODULE_42__=__webpack_require__(171516),_web_video_video_utils__WEBPACK_IMPORTED_MODULE_46__=__webpack_require__(108046),_icons_desktop_getIcon12Add__WEBPACK_IMPORTED_MODULE_49__=__webpack_require__(395424),_icons_desktop_getIcon20NotificationOutline__WEBPACK_IMPORTED_MODULE_47__=__webpack_require__(700521),_icons_desktop_getIcon20NotificationSlashOutline__WEBPACK_IMPORTED_MODULE_48__=__webpack_require__(901504),_web_ui_FlatButton__WEBPACK_IMPORTED_MODULE_43__=__webpack_require__(124041),_web_videoview_TimeCodesList__WEBPACK_IMPORTED_MODULE_44__=__webpack_require__(529290),_shared_groups_constants__WEBPACK_IMPORTED_MODULE_45__=__webpack_require__(287503);function _slicedToArray(_,e){return _arrayWithHoles(_)||_iterableToArrayLimit(_,e)||_unsupportedIterableToArray(_,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(_,e){if(_){if("string"==typeof _)return _arrayLikeToArray(_,e);var i=Object.prototype.toString.call(_).slice(8,-1);return"Object"===i&&_.constructor&&(i=_.constructor.name),"Map"===i||"Set"===i?Array.from(_):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?_arrayLikeToArray(_,e):void 0}}function _arrayLikeToArray(_,e){(null==e||e>_.length)&&(e=_.length);for(var i=0,o=new Array(e);i<e;i++)o[i]=_[i];return o}function _iterableToArrayLimit(_,e){var i=null==_?null:"undefined"!=typeof Symbol&&_[Symbol.iterator]||_["@@iterator"];if(null!=i){var o,t,a=[],d=!0,l=!1;try{for(i=i.call(_);!(d=(o=i.next()).done)&&(a.push(o.value),!e||a.length!==e);d=!0);}catch(_){l=!0,t=_}finally{try{d||null==i.return||i.return()}finally{if(l)throw t}}return a}}function _arrayWithHoles(_){if(Array.isArray(_))return _}var CONTAINER_MIN_WIDTH=960,CONTAINER_SIDE_PADDING=72,CONTAINER_VERTICAL_SIDE_PADDING=15,INFO_HEADER_PADDING_DEFAULT=115,VIDEO_RATIO_DEFAULT=16/9;const __WEBPACK_DEFAULT_EXPORT__={FLASH_MIN_VERSION:24,isFS:!1,playerCallback:_player_callback__WEBPACK_IMPORTED_MODULE_34__.default,moderActions:_web_videoview_moder_actions__WEBPACK_IMPORTED_MODULE_35__.ModerActions,adminActions:_admin_actions__WEBPACK_IMPORTED_MODULE_36__.default,cleanUpStoredVSegs(){if(window.localStorage){var _=Date.now();for(var e in window.localStorage)if(0===e.indexOf("vsegs")){var i=localStorage.getItem(e);_-(i=JSON.parse(i)).ts>1728e5&&localStorage.removeItem(e)}}},getVideoModule(){var _=cur.currentModule?cur.currentModule():cur.module;return cur.storyLayer?"story":window.VideoUpload&&nav.objLoc.hasOwnProperty("section")&&"upload"===nav.objLoc.section?"upload":(window.Video&&Video.isInVideosList()&&(_=cur.oid<0?"community_videos":cur.oid==vk.id?"profile_own_videos":"profile_videos"),"feed"==_&&"feed_block"==_video_playlist__WEBPACK_IMPORTED_MODULE_31__.default.getCurListId()&&(_="feed_block"),"feed"==_&&"videos"==cur.section&&(_="feed_videos"),"feed"==_&&"live"==cur.section&&(_="feed_live"),_||"")},getVideoContext(){if("video_search"===Videoview.getVideoModule())return nav.objLoc.q;if("audio"===cur.module){var _=cur.audioPage&&cur.audioPage.getCurrentSection();if(_)return _;if(0===nav.strLoc.indexOf("artist/"))return"artist_page"}return""},getContextPlaylistId(){var _,e;return null===(_=window.mvcur)||void 0===_||null===(e=_.options)||void 0===e?void 0:e.playlistId},getLayoutType(){var _,e=Videoview.getPlayerObject();if(null==e||null===(_=e.isFullscreen)||void 0===_?void 0:_.call(e))return"fullscreen";var i,o,t=Videoview.getMvData();if(t){if(t.inline)return"inline";if(t.embed)return"embed"}return Videoview.isLayerShown()?Videoview.isMinimized()?"minimized":(null===(i=window.mvcur)||void 0===i||null===(o=i.options)||void 0===o?void 0:o.playlistId)?"layer_with_playlist":"layer":cur.storyLayer&&cur.storyLayer.activeStory.isActiveLive()?"story_layer":""},sendPlayerStats(_,e){ajax.post("al_video.php?act=a_player_stat",{action:_,type:e})},otherVideosStats(){var _=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,_web_video_video_utils__WEBPACK_IMPORTED_MODULE_46__.idlizeCall)((()=>{ajax.post("al_index.php?act=a_other_videos_navigation",_)}))},removeVideo(){var _=Videoview.getMvData();_&&_.deleteFromAllAlbumsHash&&(ajax.post("al_video.php?act=a_delete_from_all_albums",{vid:_.vid,oid:_.oid,target_id:vk.id,hash:_.deleteFromAllAlbumsHash}),_.playlists&&(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_23__.each)(_.playlists,((_,e)=>{e.added=!1})),window.mvcur&&Videoview.initAddButton(),_.added=!1,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.removeClass)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.geByClass1)("mv_finish_add","mv_external_finish"),"selected"))},bookmarkVideo(){var _=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=Videoview.getMvData();if(e&&e.bookmarkHash){var i=cur.is_showcase?"showcase":"";window.bookmark(e.oid,e.vid,e.bookmarkType,e.bookmarkHash,_,e.itemAccessHash,i);var o=document.querySelector("[data-videoview-bookmarked]");o&&(_=!_,o.innerHTML=_?(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_14__.getLang)("global_remove_from_bookmarks"):(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_14__.getLang)("global_add_to_bookmarks"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.domData)(o,"videoview-bookmarked",(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_23__.intval)(_)))}},bookmarkVideoFromMenu(_){var e=!!(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_23__.intval)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.domData)(_,"videoview-bookmarked"));Videoview.bookmarkVideo(e);var i=Videoview.getPlayerObject();i&&i.onBookmarked&&i.onBookmarked()},getNextVideosData:()=>_video_playlist__WEBPACK_IMPORTED_MODULE_31__.default.getNextVideos().slice(0,3),getSuggestionsData(){var _=Videoview.getMvData();return _&&_.playerSuggestions||[]},getMvData(){var _;return cur.mvOpts||(null===(_=window.mvcur)||void 0===_?void 0:_.mvData)},getPlayerObject(){var _;return(null===(_=window.mvcur)||void 0===_?void 0:_.player)||cur.videoInlinePlayer||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("video_yt")&&window.VideoYoutube||null},getTimeCodes(){var _,e,i;return(null===(_=(e=Videoview).getPlayerObject)||void 0===_||null===(i=_.call(e))||void 0===i?void 0:i.getTimeCodes())||[]},setTimeCodes(_){try{var e,i,o,t,a=JSON.parse(_);if(Array.isArray(a))null===(e=(i=Videoview).getPlayerObject)||void 0===e||null===(o=e.call(i))||void 0===o||null===(t=o.updateTimeCodes)||void 0===t||t.call(o,a),null===_web_videoview_TimeCodesList__WEBPACK_IMPORTED_MODULE_44__.TimeCodesList||void 0===_web_videoview_TimeCodesList__WEBPACK_IMPORTED_MODULE_44__.TimeCodesList||_web_videoview_TimeCodesList__WEBPACK_IMPORTED_MODULE_44__.TimeCodesList.reDraw()}catch(_){}},getThumbFromTime(_){var e=Videoview.getPlayerObject();return e?e.ui.getThumbFromTime(_):{}},playerOnAdded(){var _=Videoview.getPlayerObject();_&&_.onAdded&&_.onAdded()},playerOnLiked(_){var e=Videoview.getPlayerObject();e&&e.onLiked&&e.onLiked(_)},playerOnResize(){var _,e;null===(_=window.mvcur)||void 0===_||null===(e=_.player)||void 0===e||e.resize();var i=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("video_player"),o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.getSize)(i);(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.toggleClass)(i,"VideoPlayer--minimizedSmall",o[0]<500||o[1]<200),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("video_yt")&&window.VideoYoutube&&window.VideoYoutube.onResize()},playerNextTimerUpdate(){var _;mvcur.scrolledAway||mvcur.replyFormShown||"visible"!=document.visibilityState||(0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_22__.curBox)()?(_="nextTimerReset",mvcur.nextTimerStopped=!0):(_="nextTimerStart",mvcur.nextTimerStopped=!1),mvcur.playerPrevTimerFunc!=_&&(mvcur.playerPrevTimerFunc=_,clearTimeout(mvcur.playerTimerDebounce),mvcur.playerTimerDebounce=setTimeout((function(){var e=Videoview.getPlayerObject();e&&e[_]&&e[_](),mvcur.nextTimer&&mvcur.nextTimer[_]&&mvcur.nextTimer[_]()}),0))},togglePlay(_,e){var i,o,t,a;if((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("video_yt")&&window.VideoYoutube)VideoYoutube.togglePlay(_);else if(!(null===(i=window.mvcur)||void 0===i||null===(o=i.mvData)||void 0===o?void 0:o.restriction)){var d=(null===(t=window.mvcur)||void 0===t?void 0:t.player)||cur.videoInlinePlayer;if((null===(a=window.mvcur)||void 0===a?void 0:a.player)||cur.videoInlinePlayer)d.isAutoplay()&&!e||d.togglePlay(_)}},sendVideoAdStat(_,e,i){if(cur._vadStatQueue&&cur._vadStatQueue[_+"_"+e]){var o=cur._vadStatQueue[_+"_"+e],t=void 0!==cur.vSearchPos&&null!==cur.vSearchPos;o.events.length&&(ajax.post("al_video.php?act=ads_stat",{ev:o.events.join(","),ad_type:o.type,hash:i,oid:_,vid:e,err:o.err,pl_type:o.pl_type,app_version:o.app_version,from_search:t,module:Videoview.getVideoModule()}),o.events=[])}},subscribeToAuthor(_){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=Videoview.getMvData(),o=e.authorFirstName,t=void 0===o?"":o,a=e.from,d=void 0===a?"videoview":a,l=e.subscribeBlockId,s=void 0===l?"mv_subscribe_block":l,r=e.subscribedCssClass,n=void 0===r?"mv_state_subscribed":r;if(_||!i.isClosedGroup&&!i.isFriend)c();else{var v,m;i.isFriend?(v=(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_14__.getLang)("video_unfollow_friend_title"),m=(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_14__.langStr)((0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_14__.getLang)("video_unfollow_friend_text"),"user",t)):(v=(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_14__.getLang)("video_leave_closed_group_title"),m=i.adminLevel>_shared_groups_constants__WEBPACK_IMPORTED_MODULE_45__.GroupAdminLevel.EDITOR?(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_14__.getLang)("video_leave_admined_group_text"):(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_14__.getLang)("video_leave_closed_group_text"));(0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_25__.showFastBox)(v,m,(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_14__.getLang)("box_yes"),(function(){(0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_22__.curBox)().hide(),c()}),(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_14__.getLang)("box_no")),Videoview.playerNextTimerUpdate()}function c(){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.toggleClass)(s,n,_),ajax.post("al_video.php?act=a_subscribe",{author_id:i.authorId,video:i.videoRaw,hash:i.subscribeHash,unsubscribe:(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_23__.intval)(!_),from:d},{}),i.subscribed=_;var e=Videoview.getPlayerObject();e&&e.onSubscribed&&e.onSubscribed(_);var o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("mv_finish_subscribe_btn");o&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.val)(o,(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_14__.getLang)(_?"video_view_subscribed_msg":"video_view_subscribe_to_author")),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.toggleClass)("mv_finish_subscribe","mv_finish_subscribed",_))}},subscribeLive(_,e){var i=Videoview.getMvData(),o=!i.liveNotifySubscribed;ajax.post("al_video.php?act=a_subscribe_live",{owner_id:i.authorId,subscribe:(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_23__.intval)(o),hash:e}),i.liveNotifySubscribed=!i.liveNotifySubscribed;var t=o?(0,_icons_desktop_getIcon20NotificationOutline__WEBPACK_IMPORTED_MODULE_47__.getIcon20NotificationOutline)().icon:(0,_icons_desktop_getIcon20NotificationSlashOutline__WEBPACK_IMPORTED_MODULE_48__.getIcon20NotificationSlashOutline)().icon;_web_ui_FlatButton__WEBPACK_IMPORTED_MODULE_43__.FlatButton.setLabel(_,t),Videoview.onSubscribeLiveOver(_),window.tooltips&&_.tt&&tooltips.rePositionTT(_.tt)},onSubscribeLiveOver(_){var e=Videoview.getMvData();(0,_web_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_26__.showTooltip)(_,{text:function(){return(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_14__.getLang)(e.liveNotifySubscribed?"video_live_notify_subscribed":"video_live_notify_unsubscribed")},black:1,shift:[0,10,0],needLeft:1})},showDonateBox(){if(vk.id){var _=Videoview.getMvData();_&&(0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_25__.showBox)("al_video.php?act=donate_box",{video:_.videoRaw},{onDone(_,e){_video_donate__WEBPACK_IMPORTED_MODULE_30__.default.init(e)},params:{hideButtons:1,onDestroy:_video_donate__WEBPACK_IMPORTED_MODULE_30__.default.onDestroy},stat:["videoview.css",window.jsc("web/tooltips.js"),"tooltips.css"]})}else(0,_web_index__WEBPACK_IMPORTED_MODULE_41__.showQuickLoginBox)()},showNextTooltip(_){var e=7-Math.floor(_.offsetHeight/2);(0,_web_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_26__.showTitle)(_,(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_14__.getLang)("video_player_next_video_tt"),"",{className:"tt_black tt_right VideoLayerInfo__itemTooltip",shift:[33,e,0],slideX:5,needLeft:1,dir:"right",appendEl:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.geByClass1)("mv_playlist_controls_icon",_)})},showPrevTooltip(_){var e=7-Math.floor(_.offsetHeight/2);(0,_web_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_26__.showTitle)(_,(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_14__.getLang)("video_player_prev_video_tt"),"",{className:"tt_black VideoLayerInfo__itemTooltip",shift:[-57,e,0],slideX:5,dir:"left",appendEl:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.geByClass1)("mv_playlist_controls_icon",_)})},showCloseTooltip(_){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];(0,_web_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_26__.showTitle)(_,(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_14__.getLang)("video_player_close_tt"),"",{className:"tt_black tt_right VideoLayerInfo__itemTooltip",shift:[33,e?-36:-16,0],slideX:5,needLeft:1,dir:"right"})},showCollapseTooltip(_){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];(0,_web_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_26__.showTitle)(_,(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_14__.getLang)("video_player_collapse_tt"),"",{className:"tt_black tt_right VideoLayerInfo__itemTooltip",shift:[33,e?-20:-15,0],slideX:5,needLeft:1,dir:"right"})},showVideoViewTooltip(_){var e="";if(mvcur.chatMode)e="video_player_"+(_video_chat__WEBPACK_IMPORTED_MODULE_32__.default.isHidden()?"show":"hide")+"_chat_tt";else{var i=!0;if(_video_playlist__WEBPACK_IMPORTED_MODULE_31__.default.getBlock())i=_video_playlist__WEBPACK_IMPORTED_MODULE_31__.default.isCollapsed();else{var o=document.getElementById("mv_box");o.classList.contains("_has_recomms")&&(i=o.classList.contains("_hide_recomms"))}e="video_player_"+(i?"show":"hide")+"_video_list_tt"}(0,_web_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_26__.showTitle)(_,(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_14__.getLang)(e),"",{className:"tt_black tt_right VideoLayerInfo__itemTooltip",shift:[33,-14,0],slideX:5,needLeft:1,dir:"right"})},slideLiveGifts(_,e,i){var o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("mv_live_gifts_list"),t=o.scrollWidth,a=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.domPN)(o).clientWidth;_=_||1,e=Math.abs(e)||a-180;var d=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_23__.intval)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.domData)(o,"pos"));d+=_<0?-e:e,d=Math.max(0,Math.min(t-a,d)),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.domData)(o,"pos",d),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.toggleClass)(o,"animated",!i),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.setStyle)(o,{"-webkit-transform":"translateX(-"+d+"px)","-ms-transform":"translateX(-"+d+"px)",transform:"translateX(-"+d+"px)"}),Videoview.onLiveGiftsScroll()},onLiveGiftsMouseWheel(_){!_.deltaX||Math.abs(_.deltaY)>Math.abs(_.deltaX)||(_.preventDefault(),Videoview.slideLiveGifts(_.deltaX,_.deltaX,!0))},onLiveGiftsScroll(){var _,e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("mv_live_gifts_list");if(e){var i=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.domPN)(e),o=e.scrollWidth,t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.domPN)(e).clientWidth,a=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_23__.intval)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.domData)(e,"pos"));a>o-t&&(Videoview.slideLiveGifts(1,1,1),a=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_23__.intval)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.domData)(e,"pos")));var d=a>0,l=a+t<o,s=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.domByClass)(i,"mv_live_gifts_arrow_left"),r=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.domByClass)(i,"mv_live_gifts_arrow_right");(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.toggleClass)(s,"hidden",!d),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.toggleClass)(r,"hidden",!l),null===(_=mvcur.liveGiftTT)||void 0===_||_.hide()}},getLiveBalanceStr(){var _;return _=mvcur.mvData.paymentsInMoney?(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_14__.getLang)("global_money_amount_rub",vk.balance*vk.vcost,!0):(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_14__.getLang)("global_n_votes",vk.balance,!0),(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_14__.langStr)((0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_14__.getLang)("video_live_you_have_X_money"),"money",_)},showLiveGiftTooltip(_){if(!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.data)(_,"ett")){Videoview.checkLiveGiftItemVisibility(_);var e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.domData)(_,"id"),i=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.domData)(_,"price"),o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.domData)(_,"price-str"),t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.domData)(_,"free-left"),a=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_23__.getTemplate)("video_live_gift_popup",{gift_id:e,image:"/images/gift/"+e+"/256.png",price:i,price_str:o,balance_str:t||Videoview.getLiveBalanceStr()});(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.addClass)(_,"active");var d=mvcur.liveGiftTT=new _web_lib_element_tooltip__WEBPACK_IMPORTED_MODULE_37__.ElementTooltip(_,{cls:"feature_intro_tt mv_live_gift_popup_tt",content:a,width:230,autoShow:!1,appendTo:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.domClosest)("mv_live_gifts_block",_),offset:[0,14],onBeforeHide:function(){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.removeClass)(_,"active")},onHide:function(){d.destroy()}});d.show()}},checkLiveGiftItemVisibility(_){var e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("mv_live_gifts_list"),i=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.domPN)(e),o=_.getBoundingClientRect(),t=i.getBoundingClientRect();if(o.left<t.left+32){var a=o.left-t.left-32;Videoview.slideLiveGifts(-1,a,!0)}else if(o.right>t.right-32){var d=o.right-t.right+32;Videoview.slideLiveGifts(1,d,!0)}},sendLiveGift(_,e,i){Videoview.liveDonateCheckVotes(e)||ajax.post("al_video.php?act=live_send_gift",{owner_id:mvcur.mvData.oid,video_id:mvcur.mvData.vid,gift_id:_,hash:i},{onDone:function(e,i){if((0,_web_lib_utils__WEBPACK_IMPORTED_MODULE_15__.updateMoney)(e),i){var o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.domByClass)("mv_live_gifts_block",`mv_live_gifts_item_${_}`);(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_23__.each)(i,(function(_,e){_=_.replace(/_/g,"-"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.domData)(o,_,e)}))}},onFail:function(_){if(_)return(0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_25__.showFastBox)((0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_14__.getLang)("global_error"),_),!0}}),mvcur.liveGiftTT.hide()},showLiveSuperMessageTooltip(_){if(!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.data)(_,"ett")){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.addClass)(_,"active");var e=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_23__.getTemplate)("video_live_super_message_popup",{message:mvcur.liveSuperMessageDraft||""}),i=mvcur.liveGiftTT=new _web_lib_element_tooltip__WEBPACK_IMPORTED_MODULE_37__.ElementTooltip(_,{cls:"feature_intro_tt mv_live_gift_popup_tt",content:e,width:230,autoShow:!1,appendTo:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.domClosest)("mv_live_gifts_block",_),offset:[0,14],onBeforeHide:function(){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.removeClass)(_,"active")},onHide:function(){i.destroy()}});i.show(),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.elfocus)("mv_live_gift_popup_comment_input")}},checkLiveSuperMessageLength(_,e){var i=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_23__.trim)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.val)(_)),o=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_23__.intval)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.domData)(_,"maxlength"));mvcur.liveSuperMessageDraft=i;var t=i.length>o,a=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.domNS)(_),d=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.domNS)(a);(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.toggle)(a,!t),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.toggle)(d,t),e&&a.click()},onLiveSuperMessageCtrlEnter(){var _=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("mv_live_gift_popup_comment_input");Videoview.checkLiveSuperMessageLength(_,!0)},sendLiveSuperMessage(_,e){var i=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("mv_live_gift_popup_comment_input"),o=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_23__.trim)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.val)(i));o?(Videoview.liveDonateCheckVotes(_)||ajax.post("al_video.php?act=live_send_super_message",{owner_id:mvcur.mvData.oid,video_id:mvcur.mvData.vid,message:o,hash:e},{onDone:function(_,e){(0,_web_lib_utils__WEBPACK_IMPORTED_MODULE_15__.updateMoney)(_),delete mvcur.liveSuperMessageDraft},onFail:function(_){if(_)return(0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_25__.showFastBox)((0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_14__.getLang)("global_error"),_),!0}}),mvcur.liveGiftTT.hide()):(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_24__.notaBene)(i)},liveDonateCheckVotes:_=>vk.balance<_&&_web_gifts_gifts__WEBPACK_IMPORTED_MODULE_39__.Gifts.showGetMoneyBox(),onStickersPurchased(_){var e=Videoview.getPlayerObject();e&&e.onStickersPurchased&&e.onStickersPurchased(_)},addPlaylist(onlyPrivate){(0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_25__.showBox)("al_video.php?act=add_playlist_box",{oid:mvcur.mvData.oid,vid:mvcur.mvData.vid,only_private:onlyPrivate?1:0,hash:mvcur.mvData.addedVideoHash},{onDone:function onDone(box){box.removeButtons(),box.addButton((0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_14__.getLang)("Save"),(function(btn){var title=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_23__.trim)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.val)("mv_video_playlist_edit_title")),privacy=Privacy.getValue("video_playlist");title&&ajax.post("al_video.php?act=a_save_playlist",{title,privacy,hash:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.val)("video_playlist_edit_hash"),oid:mvcur.mvData.oid,vid:mvcur.mvData.vid},{showProgress:()=>(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_24__.lockButton)(btn),hideProgress:()=>(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_24__.unlockButton)(btn),onDone:function onDone(playlistId,text,playlist,video){if((0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_22__.curBox)().hide(),text&&(0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_22__.showDoneBox)(text),mvcur.mvData.playlists.push({id:playlistId,added:!0,title:(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_23__.clean)(title),private:(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_23__.intval)(privacy)}),Videoview.initAddButton(),window.Video&&playlist){var playlistEvalExpr=`(${playlist})`;try{playlist=eval(playlistEvalExpr)}catch(_){(0,_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_27__.logEvalError)(_,playlistEvalExpr)}if(Video.updateAlbum(playlistId,!1,playlist),video){var videoEvalExpr=`(${video})`;try{video=eval(videoEvalExpr)}catch(_){(0,_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_27__.logEvalError)(_,videoEvalExpr)}}}}})}))},stat:[window.jsc("web/privacy.js"),"privacy.css",window.jsc("web/video.js"),"video.css"],containerClass:"VideoPlaylistPopup"}),Videoview.playerNextTimerUpdate()},updateVideo(_,e,i,o,t,a,d,l){window.mvcur&&mvcur.mvData.oid==_&&mvcur.mvData.vid==e&&(mvcur.mvData.title=i,mvcur.mvData.desc=o,mvcur.listId=d||mvcur.listId||Video.getDefaultListId(),Videoview.setTitle(),Videoview.setDesc(),Videoview.setTimeCodes(t),"published"===l&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.hide)("mv_publish"),a&&(mvcur.mvShown?Videoview.reload():Videoview.recache()))},setAddButtonStateAdded(){var _;(null===(_=window.mvcur)||void 0===_?void 0:_.mvShown)&&(mvcur.mvData.published=!0,(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_21__.triggerEvent)("mv_add_button","setAdded"))},initAddButton(){mvcur.addButtonTT&&(mvcur.addButtonTT.destroy(),mvcur.addButtonTT=null);var _=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("mv_add_button");if(_&&_ instanceof HTMLElement){var e=Videoview.getMvData(),i=e.uploaded,o=e.noPublicAdd,t=!1;a(i||l(),!1,!0),mvcur.mvData.published&&(mvcur.addButtonTT=mvcur.addButtonTT||new _web_lib_element_tooltip__WEBPACK_IMPORTED_MODULE_37__.ElementTooltip(_,{cls:"mv_add_eltt",autoShow:!0,noHideOnClick:!0,onFirstTimeShow:function(_){var e="";(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_23__.each)(mvcur.mvData.playlists,(function(_,i){if(!i.disabled||i.added||i.id!=mvcur.mvData.PLAYLIST_UPLOADED_ID){var o=i.private?`<span class="mv_tt_playlist_private_icon" onmouseover="showTooltip(this, { black: 1, text: '${(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_14__.getLang)("video_album_is_private_tt")}', shift: [16, 8, 0] })"></span>`:"";e+=`\n              <div class="mv_tt_playlist">\n                <div class="checkbox ${i.added?"on":""} ${i.disabled?"disabled":""} ${i.private?"private":""}" data-id="${i.id}" onclick="checkbox(this);">${i.title}</div>\n                ${o}\n              </div>\n            `}}));var i=o?"video_add_private_playlist":"video_create_new_playlist_btn";e=`\n            <div id="mv_pl_tt">\n              <div class="mv_tt_private_only ${o?"":"unshown"}">${(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_14__.getLang)("video_only_private_video")}</div>\n              <div class="mv_tt_playlists ${o?" with_border":""}">\n                ${e}\n              </div>\n              <div class="mv_tt_add_playlist" role="link" tabindex="0" onclick="Videoview.addPlaylist(${o})">\n                <span class="mv_tt_plus_icon">${(0,_icons_desktop_getIcon12Add__WEBPACK_IMPORTED_MODULE_49__.getIcon12Add)().icon}</span>${(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_14__.getLang)(i)}\n              </div>\n            </div>\n          `,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.val)(_,e),(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_23__.each)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.geByClass)("checkbox",_),(function(){(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_21__.addEvent)(this,"click",s)}));var t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.domByClass)(_,"mv_tt_add_playlist");function a(_){var e=mvcur.addButtonTT.getContent();(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.toggleClass)(e,"mv_add_eltt_add_playlist_hover",_)}(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_21__.addEvent)(t,"mouseenter",a.pbind(!0)),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_21__.addEvent)(t,"mouseleave",a.pbind(!1)),window.updateAriaCheckboxes()},onDestroy:function(_){_&&((0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_23__.each)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.geByClass)("checkbox",_),(function(){(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_21__.removeEvent)(this)})),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_21__.removeEvent)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.domByClass)(_,"mv_tt_add_playlist")))}}))}function a(o,a,l){o=i||o;var r=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.geByClass1)("mv_added_icon",_),n=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.geByClass1)("mv_plus_icon",_),v=(0,_web_likes_helpers__WEBPACK_IMPORTED_MODULE_50__.getElementLikeButtonLabel)(_);if((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.toggleClass)(n,"mv_add_icon_curr",!o),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.toggleClass)(n,"mv_add_icon_down",o),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.toggleClass)(r,"mv_add_icon_curr",o),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_21__.removeEvent)(_,"click",d),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_21__.removeEvent)(_,"setAdded",d),o)v.innerHTML=(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_14__.getLang)("video_added_to_my_playlist"),a&&s(!1,e.PLAYLIST_ADDED_ID);else{var m=!Videoview._isCurrentVideoPublished()&&mvcur.mvData.oid<0;v.innerHTML=m?(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_14__.getLang)("video_add_to_group"):(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_14__.getLang)("video_add_to_my_playlist"),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_21__.addEvent)(_,"click",d),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_21__.addEvent)(_,"setAdded",d)}l||t==o||Videoview.playerOnAdded(),t=o,e.added=o}function d(_){"click"==_.type&&mvcur.addButtonTT&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.isAncestor)(_.target,mvcur.addButtonTT.getContent())||(Videoview._isCurrentVideoPublished()?o&&"click"==_.type||a(!0,!0,"setAdded"==_.type):Videoview.showAddDialog(mvcur.videoRaw))}function l(){var _=!1;return(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_23__.each)(mvcur.mvData.playlists,(function(e,i){if(i.added)return _=!0,!1})),_}function s(_,e){var i=!0;if(_){var o=_.currentTarget||_.target;if((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.hasClass)(o,"disabled"))return;i=(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_24__.isChecked)(o),e=+o.getAttribute("data-id")}else mvcur.addButtonTT.getContent()&&(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_23__.each)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.geByClass)("checkbox",mvcur.addButtonTT.getContent()),(function(){if((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.domData)(this,"id")==e)return(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_24__.checkbox)(this),!1}));(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_23__.each)(mvcur.mvData.playlists,(function(_,o){if(o.id==e)return o.added=i,!1})),ajax.post("al_video.php?act=a_add_to_playlist",{oid:mvcur.mvData.oid,vid:mvcur.mvData.vid,hash:mvcur.mvData.playlistAddHash,playlist_id:e,add:+i,info:window.Video&&Video.isInCatalog()?_video_playlist__WEBPACK_IMPORTED_MODULE_31__.default.getCurListId():"",module:Videoview.getVideoModule(),context:Videoview.getVideoContext()},{onFail:function(){+i&&(window.tooltips&&tooltips.destroyAll(),a(!1))}}),_&&(a(l()),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_21__.cancelEvent)(_))}},locNav(_,e,i){(i=nav.toStr(i)).match(/^video(-?\d+_\d+)$/)||Videoview.hide()},showPlayer(_){var e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("video_player");e&&(_||!e.getAttribute("preventhide")||_shared_lib_browser__WEBPACK_IMPORTED_MODULE_12__.browser.safari_mobile)&&(_shared_lib_browser__WEBPACK_IMPORTED_MODULE_12__.browser.msie&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.setStyle)(e,{position:"static",top:0}),_shared_lib_browser__WEBPACK_IMPORTED_MODULE_12__.browser.safari_mobile?(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.show)(e):e.style.visibility="visible")},hidePlayer(_){var e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("video_player");e&&(_||!e.getAttribute("preventhide")||_shared_lib_browser__WEBPACK_IMPORTED_MODULE_12__.browser.safari_mobile)&&(_shared_lib_browser__WEBPACK_IMPORTED_MODULE_12__.browser.msie&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.setStyle)(e,{position:"absolute",top:"-5000px"}),_shared_lib_browser__WEBPACK_IMPORTED_MODULE_12__.browser.safari_mobile?(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.hide)(e):e.style.visibility="hidden")},init(_){window.mvcur={},window.mvLayer?(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.toggleClass)(window.mvLayer,"mv_layer--vertical",!!_.shortVideo):(window.mvLayer=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ce)("div",{id:"mv_layer"}),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.toggleClass)(window.mvLayer,"mv_layer--vertical",!!_.shortVideo),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_21__.addEvent)(window.mvLayer,"mousemove",(function(){mvcur.mousemoved=!0,mvcur.blackout&&Videoview.moveCheck()})),window.mvLayerWrap=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ce)("div",{id:"mv_layer_wrap",className:"fixed layer_wrap"}),mvLayerWrap.appendChild(window.mvLayer),bodyNode.appendChild(mvLayerWrap),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.setStyle)(window.mvLayer,{width:lastWindowWidth-(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_24__.sbWidth)()-2+"px"}),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_21__.addEvent)(mvLayerWrap,"scroll",Videoview.viewScroll))},moveCheck(){mvcur.mousemoved?mvcur.blackout&&(mvcur.blackout=!1,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.isVisible)(window.layerBG)?(0,_web_lib_fx__WEBPACK_IMPORTED_MODULE_29__.animate)(window.layerBG,{opacity:.8},200):(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.setStyle)(window.layerBG,{opacity:.8})):mvcur.blackout||mvcur.finished||!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.isVisible)(window.layerBG)||(mvcur.blackout=!0,(0,_web_lib_fx__WEBPACK_IMPORTED_MODULE_29__.animate)(window.layerBG,{opacity:.9},5e3)),mvcur.mousemoved=!1},show(_,e,i,o){var t,a,d=window.ap;if(d&&d.isPlaying()&&(d.pause(),d.pausedByVideo=Date.now()),o&&o.autoplay&&Videoview.playerCallback.onVideoStreamPlaying(),_&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.domClosest)("bookmarks_row_type_video",_.target)){var l=_slicedToArray(e.split("_"),2),s=l[0],r=l[1];(0,_shared_lib_statlogs__WEBPACK_IMPORTED_MODULE_16__.statlogsValueEvent)("bookmarks_product_analytics",{item_type:"video",item_owner_id:(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_23__.intval)(s),item_id:(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_23__.intval)(r),time:(0,_web_lib_date__WEBPACK_IMPORTED_MODULE_20__.getServerTime)()})}var n=_&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.domClosest)("video_active_live",_.target);(0,_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_27__.debugLog)("show video "+e),o.fromPreload&&(0,_shared_lib_web_stats__WEBPACK_IMPORTED_MODULE_42__.saveStatlogEvents)({name:"video_showcase_web",value:Math.round(performance.now()),keys:[cur.is_showcase?window.cur.section_id:"","show_video_direct","origin"]});var v=null===(t=window.mvcur)||void 0===t?void 0:t.mvShown,m=null===(a=window.mvcur)||void 0===a?void 0:a.player;if(v&&(Videoview.isFS&&!o.shortVideo?(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.val)(`video_box_wrap${mvcur.videoRaw}`,(0,_web_lib_layout_utils__WEBPACK_IMPORTED_MODULE_18__.getProgressHtml)()):((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.val)("mv_player_box",""),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.hide)("mv_player_box"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.show)("mv_progress_box"))),window.mvcur&&clearInterval(mvcur.nextTimerUpdateInterval),window.mvcur&&mvcur.minimized){if(!o.nomin)return mvcur.videoRaw=e,mvcur.options=o,mvcur.listId=i,mvcur.mvData=!1,o.playlistId&&!n?Videoview.initPlaylistBlock(e,o.playlistId,o.catLoadMore):_video_playlist__WEBPACK_IMPORTED_MODULE_31__.default.removeBlock(),!0;o.prevLoc&&(mvcur.mvPrevLoc=o.prevLoc),(0,_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_27__.debugLog)("unminimizing in show"),Videoview.unminimize(!0,!1,!0)}if(o.queue&&((0,_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_27__.debugLog)("pushing in videoview.show"),window.layerQueue.push(),o.queue=!1),!o.noLocChange&&nav.objLoc.z&&/^(video|clip)/.test(nav.objLoc.z)&&(cur.mvHistoryBack=cur.mvHistoryBack||1,cur.mvHistoryBack++),window.forcePauseAudio=!0,v||window.layerQueue.hide(),window.forcePauseAudio=!1,this.init(o),mvcur.showTime=Date.now(),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_21__.removeEvent)(window,"resize",Videoview.onResize),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_21__.removeEvent)(window,"focus blur",Videoview.onPageFocusChange),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_21__.removeEvent)(document,"webkitfullscreenchange mozfullscreenchange fullscreenchange",Videoview.onFullscreenChange),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_21__.removeEvent)(document,"keydown",Videoview.onKeyDown),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_21__.addEvent)(window,"resize",Videoview.onResize),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_21__.addEvent)(window,"focus blur",Videoview.onPageFocusChange),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_21__.addEvent)(document,"webkitfullscreenchange mozfullscreenchange fullscreenchange",Videoview.onFullscreenChange),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_21__.addEvent)(document,"keydown",Videoview.onKeyDown),window.boxQueue.hideAll(),layers.wrapshow(mvLayerWrap,.8),layers.fullhide=Videoview.hide,mvcur.nextTimerUpdateInterval=setInterval(Videoview.playerNextTimerUpdate,1e3),setTimeout((function(){layers.wrapshow(mvLayerWrap,.8),layers.fullhide=Videoview.hide}),0),mvcur.noLocChange=0,o.ad_video&&(o.hideInfo=1,o.noLocChange=1,mvcur.noLocChange=1),mvcur.noHistory=o.noLocChange||o.noHistory,mvcur.blackInterval=setInterval(Videoview.moveCheck,18e4),mvcur.videoRaw=e,mvcur.options=o,mvcur.listId=i,mvcur.mvData=!1,mvcur.mvShown=!0,mvcur.player=m,o.prevLoc?mvcur.mvPrevLoc=o.prevLoc:setTimeout((function(){Videoview.setLocation(o.noLocChange)}),0),_&&_.pageX&&_.pageY&&(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_23__.extend)(mvcur,{mvOldX:_.pageX,mvOldY:_.pageY,mvOldT:Date.now()}),v?(Videoview.disableLayerContent(),_video_chat__WEBPACK_IMPORTED_MODULE_32__.default.destroy()):Videoview.buildLayerContent(),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.toggleClass)("mv_info","mv_info_invisible",o.hideInfo),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.hide)("mv_warning"),o.expandPlayer){mvcur.player=o.expandPlayer,o.expandPlayer=1;var c=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.domClosest)("video_box_wrap",mvcur.player.el);(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("mv_player_box").appendChild(c),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.hide)("mv_progress_box"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.show)("mv_player_box"),mvcur.player.onExpanded()}return o.playlistId&&!n?Videoview.initPlaylistBlock(e,o.playlistId,o.catLoadMore,!v):_video_playlist__WEBPACK_IMPORTED_MODULE_31__.default.removeBlock(),Videoview.cleanUpStoredVSegs(),o.minimized&&setTimeout(Videoview.minimize.bind(Videoview),0),_web_videoview_TimeCodesList__WEBPACK_IMPORTED_MODULE_44__.TimeCodesList.destroy(),!1},buildLayerContent(){window.bodyNode.classList.add("Videoview"),window.mvLayer.innerHTML=`\n  <div class="mv_layer_bg" onclick="return Videoview.hide(true, true, event, true);"></div>\n  <div id="mv_container" class="scroll_fix_wrap">\n    <div id="mv_box" class="mv_box">\n      <div id="mv_approve" style="display: none;"></div>\n      <div id="mv_publish" style="display: none;"></div>\n      <div class="mv_min_header">\n        <div class="mv_min_control" onmousedown="return Videoview.hide(false, true);" role="button" tabindex="0" aria-label="${(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_14__.getLang)("global_close")}">\n          <div class="mv_min_control_close"></div>\n        </div>\n        <div class="mv_min_control" onclick="return Videoview.unminimize();">\n          <div class="mv_min_control_max"></div>\n        </div>\n        <div class="mv_min_title" id="mv_min_title"></div>\n      </div>\n      <div id="mv_main" class="mv_main">\n        <div class="mv_pl_prev_wrap">\n          <div class="mv_playlist_controls" id="mv_pl_prev" onclick="return VideoPlaylist.prevVideo()" onmouseover="Videoview.showPrevTooltip(this)">\n            <div class="mv_playlist_controls_icon"></div>\n          </div>\n        </div>\n        <div class="mv_pl_next_wrap">\n          <div class="mv_playlist_controls" id="mv_pl_next" onclick="return VideoPlaylist.nextVideo()" onmouseover="Videoview.showNextTooltip(this)">\n            <div class="mv_playlist_controls_icon"></div>\n          </div>\n        </div>\n        <div id="mv_progress_box">${(0,_web_lib_layout_utils__WEBPACK_IMPORTED_MODULE_18__.getProgressHtml)()}</div>\n        <div id="mv_player_box"></div>\n        <div class="VideoLayerInfo__topControlsWrap">\n          <div id="VideoLayerInfo__topControls">\n            <div onclick="return Videoview.hide(true, true, event, true);" onmouseover="Videoview.showCloseTooltip(this)" class="mv_top_button mv_top_close" role="button" tabindex="0" aria-label="${(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_14__.getLang)("global_close")}">\n              <div class="mv_close_icon"></div>\n            </div>\n            <div onclick="return Videoview.minimize(event);" onmouseover="Videoview.showCollapseTooltip(this)" class="mv_top_button mv_top_minimize">\n              <div class="mv_minimize_icon"></div>\n            </div>\n            <div onclick="return Videoview.toggleSideBlock(event);" onmouseover="Videoview.showVideoViewTooltip(this)" class="mv_top_button mv_top_toggle_sideblock" id="mv_top_pl_toggle" role="button" tabindex="0">\n              <div class="mv_toggle_sideblock_icon"></div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div class="mv_info" id="mv_info"></div>\n      <div class="mv_warning" id="mv_warning" style="display: none;"></div>\n    </div>\n  </div>\n  <div class="VerticalVideoLayerInfo__topControlsWrap">\n    <div id="VerticalVideoLayerInfo__topControls">\n      <div onclick="return Videoview.hide(false, true, event, true);" class="mv_top_button mv_top_close" onmouseover="Videoview.showCloseTooltip(this, true)" role="button" tabindex="0" aria-label="${(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_14__.getLang)("global_close")}">\n        <div class="mv_close_icon"></div>\n      </div>\n      <div onclick="return Videoview.minimize(event);" onmouseover="Videoview.showCollapseTooltip(this, true)" class="mv_top_button mv_top_minimize">\n        <div class="mv_minimize_icon"></div>\n      </div>\n    </div>\n  </div>\n    `,Videoview.updateSize()},disableLayerContent(){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.addClass)("mv_info","mv_info_disabled")},initPlaylistBlock(_,e,i,o){var t,a;if(!(null===(t=window.mvcur)||void 0===t||null===(a=t.options)||void 0===a?void 0:a.shortVideo)){var d=_video_playlist__WEBPACK_IMPORTED_MODULE_31__.default.getBlock(),l=!!d,s=_video_playlist__WEBPACK_IMPORTED_MODULE_31__.default.buildBlock(e,_,o);if(s&&/^wall_/.test(e)&&_video_playlist__WEBPACK_IMPORTED_MODULE_31__.default.lists[e]&&cur.wallVideos&&cur.wallVideos[e]&&(_video_playlist__WEBPACK_IMPORTED_MODULE_31__.default.extendList(e,cur.wallVideos[e].list),_video_playlist__WEBPACK_IMPORTED_MODULE_31__.default.updateBlockList(e)),s){if(s!==d){var r=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("mv_main"),n=r.firstChild;n?r.insertBefore(s,n):r.appendChild(s),_video_playlist__WEBPACK_IMPORTED_MODULE_31__.default.setIsSubscribed()}var v=_video_playlist__WEBPACK_IMPORTED_MODULE_31__.default.getCurList().list.length;(window.Video&&Video.isInVideosList()&&vk.id==cur.oid||v<5)&&(l||_video_playlist__WEBPACK_IMPORTED_MODULE_31__.default.toggle(!1)),(0,_shared_lib_common__WEBPACK_IMPORTED_MODULE_28__.isFunction)(i)&&i(_video_playlist__WEBPACK_IMPORTED_MODULE_31__.default.updateBlockList.pbind(e)),setTimeout((function(){_video_playlist__WEBPACK_IMPORTED_MODULE_31__.default.restoreScrollPos(),_video_playlist__WEBPACK_IMPORTED_MODULE_31__.default.updateScrollbar(),_video_playlist__WEBPACK_IMPORTED_MODULE_31__.default.setCurVideo(_,l),_video_playlist__WEBPACK_IMPORTED_MODULE_31__.default.updateControls()}),0)}_video_playlist__WEBPACK_IMPORTED_MODULE_31__.default.toggleStateClasses(),Videoview.updateLayoutSizes()}},hide(_,e,i,o){var t,a,d;if(null===(t=document.querySelector(".VideoLayout"))||void 0===t||t.classList.remove("VideoLayout--hidden"),null===(a=window.VideoShowcase)||void 0===a||a.updateLayout(),window.mvcur&&(e||mvcur.mvShown)){if(e||!mvcur.minimized){if(!mvcur.noHistory&&!_){mvcur.noHistory=1,mvcur.forceHistoryHide=e,window.__adsUpdate("very_lazy");var l=cur.mvHistoryBack?-cur.mvHistoryBack:-1;return cur.mvHistoryBack=0,setTimeout((function(){mvcur.mvShown||(Videoview.destroyPlayer(),_video_playlist__WEBPACK_IMPORTED_MODULE_31__.default.removeBlock())}),10),history.go(l)}if(mvcur.forceHistoryHide&&(e=mvcur.forceHistoryHide,mvcur.forceHistoryHide=!1),mvcur.statusVideo){var s=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("mv_like_icon");if(s){var r=s.parentNode.tt;r&&r.container&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.re)(r.container),s.parentNode.tt&&delete s.parentNode.tt}}var n,v=mvcur.minimized;if(v&&(Videoview.unminimize(!0,!0,!0),mvcur.minimized=!1,_=!0),null===(d=window.Wall)||void 0===d||d.cancelEdit(!0),mvcur.replyFormShown)null===(n=window.Wall)||void 0===n||n.hideEditReply(mvcur.post);if((mvcur.mvData.duration>60||mvcur.mvData.is_live)&&!e&&!mvcur.finished)if(Date.now()-mvcur.showTime>3e4&&!_shared_lib_browser__WEBPACK_IMPORTED_MODULE_12__.browser.safari_mobile){var m=(0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_25__.showFastBox)({title:(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_14__.getLang)("video_are_you_sure_close_title"),bodyStyle:"padding: 20px; line-height: 160%;",forceNoBtn:1,onShow:function(){(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_21__.addEvent)(document,"keydown",e)},onHide:function(){(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_21__.removeEvent)(document,"keydown",e)}},(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_14__.getLang)("video_are_you_sure_close"),(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_14__.getLang)("box_yes"),(function(){m.hide(),Videoview.hide(_,!0)}),(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_14__.getLang)("box_no"));function e(e){e.keyCode==_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_21__.KEY.ENTER&&(m.hide(),Videoview.hide(_,!0))}return!0}if(cur.vSearchPos&&delete cur.vSearchPos,cur.vSearchLastActionTime&&(cur.vSearchLastActionTime=Date.now()),mvcur.finished||Videoview.logViewedPercentage(),!window.forcePauseAudio){var c=window.ap;c&&!c.isPlaying()&&c.pausedByVideo&&(Date.now()-c.pausedByVideo<18e4&&c.play(),delete c.pausedByVideo),window.Notifier&&Notifier.lcSend("video_hide")}return v?(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.hide)(mvLayerWrap):(layers.wraphide(mvLayerWrap),layers.fullhide=!1),window.tooltips&&tooltips.destroyAll(cur.mvBox),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.removeClass)(window.bodyNode,"Videoview"),mvcur.mvShown=!1,(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_21__.removeEvent)(window,"resize",Videoview.onResize),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_21__.removeEvent)(document,"webkitfullscreenchange mozfullscreenchange fullscreenchange",Videoview.onFullscreenChange),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_21__.removeEvent)(document,"keydown",Videoview.onKeyDown),clearInterval(mvcur.nextTimerUpdateInterval),mvcur.addButtonTT&&(mvcur.addButtonTT.destroy(),mvcur.addButtonTT=null),_video_chat__WEBPACK_IMPORTED_MODULE_32__.default.destroy(),Videoview.removeExternalVideoFinishBlock(),Videoview.destroyPlayer(),_web_videoview_TimeCodesList__WEBPACK_IMPORTED_MODULE_44__.TimeCodesList.destroy(),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.val)("mv_player_box",""),v&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.isVisible)(layerWrap)||((0,_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_27__.debugLog)("pop from videoview.hide"),setTimeout(window.layerQueue.pop,0)),mvcur.blackInterval&&clearInterval(mvcur.blackInterval),o&&nav.objLoc.z?(window.layerQueue.skipVideo=!0,delete nav.objLoc.z,delete nav.objLoc.list,delete nav.objLoc.claim,nav.setLoc(nav.objLoc)):o?Videoview.backLocation():mvcur.noLocChange||!0===_||(2===_?nav.setLoc(window.hab.getLoc()):Videoview.backLocation(),window.__adsUpdate("very_lazy")),window.__adsUpdate(),mvcur.bodyScrollTop=window.scrollNode.scrollTop,setTimeout((function(){if(void 0!==mvcur.bodyScrollTop&&(window.scrollNode.scrollTop=mvcur.bodyScrollTop,delete mvcur.bodyScrollTop),window.cur&&cur.promoVideo&&cur.aid&&"apps"===cur.module){var _=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("apps_promo_video_thumb"+cur.aid);_&&(0,_web_lib_video__WEBPACK_IMPORTED_MODULE_13__.showInlineVideo)(cur.promoVideo,"",{module:"app_promo"},null,_)}}),0),!1}mvcur.noLocChange||!0===_||(2===_?nav.setLoc(window.hab.getLoc()):window.layerQueue.count()||Videoview.backLocation())}},destroyPlayer(){mvcur.player&&(mvcur.player.destroy(),delete mvcur.player),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("video_yt")&&window.VideoYoutube&&window.VideoYoutube.destroy()},cmp(_,e){var i=_.length,o=e.length;return i<o?-1:i>o?1:_<e?-1:_>e?1:0},onKeyDown:_=>!1!==_.returnValue&&(_.keyCode==_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_21__.KEY.ESC?(mvcur.mvEditing?Videoview.cancelInline():Videoview.hide(),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_21__.cancelEvent)(_)):void 0),onResize(){Videoview.updateExternalVideoFinishBlock(),Videoview.updateReplyFormPos(),Videoview.onLiveGiftsScroll(),Videoview.updateLayoutSizes(),_video_chat__WEBPACK_IMPORTED_MODULE_32__.default.onResize(),_video_playlist__WEBPACK_IMPORTED_MODULE_31__.default.updateScrollbar(),_web_videoview_TimeCodesList__WEBPACK_IMPORTED_MODULE_44__.TimeCodesList.updateScrollbar(),mvcur.mvData.is_active_live||Videoview.adaptRecomsHeight()},onPageFocusChange(){setTimeout(Videoview.playerNextTimerUpdate,10)},onFullscreenChange(){Videoview.updateExternalVideoFinishBlock(),mvcur.chatMode&&(_video_chat__WEBPACK_IMPORTED_MODULE_32__.default.onResize(),_video_chat__WEBPACK_IMPORTED_MODULE_32__.default.updateScroll())},updateLayoutSizes(){if(!mvcur.minimized){var _=document.documentElement,e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("mv_box"),i=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("mv_container"),o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("mv_main"),t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("mv_player_box"),a=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("mv_progress_box"),d=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("video_mvpl")||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.geByClass1)("mv_chat",i)||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.geByClass1)("mv_live_preparation",i),l=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("mv_main_info"),s=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("mv_reply_form"),r=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.geByClass1)("mv_info_narrow_column",i),n=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.geByClass1)("TimeCodesList",i),v=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.geByClass)("mv_playlist_controls",i),m=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.hasClass)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("mv_layer"),"mv_layer--vertical");e.classList.contains("_has_recomms")&&!e.classList.contains("_hide_recomms")&&(d=r),e.classList.contains("_has_time_codes")&&(d=n);var c=d?d.offsetWidth:0,u=INFO_HEADER_PADDING_DEFAULT;if(l){var E=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.isVisible)(t)?t:a,b=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.getXY)(E)[1]+E.offsetHeight,w=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.getXY)(l)[1]+l.offsetHeight-b;w>u&&(u=w)}var p,D=window.innerWidth||_.clientWidth||bodyNode.clientWidth,h=window.innerHeight||_.clientHeight||bodyNode.clientHeight,P=D,M="auto",O=null,g=h;if(m){var C=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.geByClass1)("VerticalVideoLayerInfo__scrollWrap"),L=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.geByClass1)("VerticalVideoLayerInfo__mainInfoWrap"),I=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.geByClass1)("VerticalVideoLayerInfo__commentsReply"),y=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.geByClass1)("mv_comments_restricted_msg");if(O=p=(g=h-2*CONTAINER_VERTICAL_SIDE_PADDING)/16*9,P=p+310,M=g,C){var T=g;L&&(T-=L.offsetHeight),I&&(T-=I.offsetHeight),y&&(T-=y.offsetHeight),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.setStyle)(C,{height:T}),mvcur.uiScroll||(mvcur.uiScroll=new uiScroll(C,{global:!0,theme:"videoview"}))}var B=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.geByClass1)("VerticalVideoLayerInfo__effectsTitle");if(B){var f=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.geByClass1)("VerticalVideoLayerInfo__effectsList");(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.geByClass)("VerticalVideoLayerInfo__effectWrap").length>3&&new uiScroll(f,{stopScrollPropagation:!1,theme:"thin-dark"}),new _web_lib_element_tooltip__WEBPACK_IMPORTED_MODULE_37__.ElementTooltip(B,{content:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.geByClass1)("VerticalVideoLayerInfo__effectsListWrapper"),forceSide:"bottom",appendTo:C})}}else{var A=h-(CONTAINER_SIDE_PADDING+(g=(p=(P-=2*CONTAINER_SIDE_PADDING)-c)/VIDEO_RATIO_DEFAULT)+u);A<0&&(P=(p=(g-=Math.abs(A))*VIDEO_RATIO_DEFAULT)+c);var V=l?l.offsetWidth+(r?r.offsetWidth:0):0;(P<CONTAINER_MIN_WIDTH||P<V)&&(g=(p=(P=V<CONTAINER_MIN_WIDTH?CONTAINER_MIN_WIDTH:V)-c)/VIDEO_RATIO_DEFAULT)}if((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.setStyle)(i,{height:M,width:P}),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.setStyle)(o,{width:O}),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.setStyle)(t,{height:g}),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.setStyle)(a,{height:g}),i.style.setProperty("--player-height",`${g}px`),v.length){var R=g/2;(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_23__.each)(v,(function(_,e){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.setStyle)(e,{paddingBottom:R,paddingTop:R})}))}if(!m&&s){var W=P-(r?r.offsetWidth:0),U=(W-(l?l.offsetWidth:0))/-2;(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.setStyle)(s,{marginLeft:Math.ceil(U),width:W}),Videoview.updateReplyFormPos()}}},updateSize(){if(mvcur.minimized)return!1;window.onBodyResize(),Videoview.onResize()},getPrevLoc(){for(var _ in mvcur.mvPrevLoc={},nav.objLoc)"z"==_&&0==!nav.objLoc[_].indexOf(`video${mvcur.videoRaw}`)||(mvcur.mvPrevLoc[_]=nav.objLoc[_])},setLocation(_){if(mvcur.options.fromPreload){if(cur.is_showcase){var e=mvcur.listId?mvcur.listId.replace("/video",""):"";mvcur.mvPrevLoc={0:"video"+e}}else{var i=mvcur.listId.match(/([a-z]*)([0-9\-]*)/),o=parseInt(i[2]);mvcur.mvPrevLoc={0:"videos"+o},"videos"!=i[1]&&(mvcur.mvPrevLoc.section=i[1])}var t=mvcur.listId.match(/claim=([0-9]+)/);t&&t[1]&&(mvcur.mvPrevLoc.claim=t[1])}else _?mvcur.mvPrevLoc="z":Videoview.getPrevLoc();if(!_){var a=(mvcur.options.shortVideo?"clip":"video")+mvcur.videoRaw;mvcur.listId&&(a+="/"+mvcur.listId),mvcur.options.playlistId&&(a+="/pl_"+mvcur.options.playlistId);var d=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_23__.extend)(nav.objLoc,{z:a});/^video-?\d+/.test(nav.objLoc[0])&&(d[0]="videos"+cur.oid),nav.strLoc!=nav.toStr(d)&&(nav.setLoc(d),(mvcur.options||{}).fromQueue&&(mvcur.noHistory=1)),mvcur.options&&(mvcur.options.fromQueue=!1)}},backLocation(){if("z"==mvcur.mvPrevLoc||!mvcur.mvPrevLoc&&nav.objLoc.z){var _=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_23__.clone)(nav.objLoc);delete _.z,delete _.claim,nav.setLoc(_)}else if(mvcur.mvPrevLoc){mvcur.mvPrevLoc[0]&&mvcur.mvPrevLoc[0].match(/^videos-?\d+/)&&mvcur.mvData&&mvcur.mvData.artistHref?nav.setLoc({0:mvcur.mvData.artistHref.replace(/^\//,"")}):nav.setLoc(mvcur.mvPrevLoc)}else("video"==nav.objLoc[0]||nav.objLoc[0].match(/^video-?\d+_\d+/))&&nav.setLoc({0:"video"});mvcur.options.prevTitle&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.setDocumentTitle)((0,_shared_lib_common__WEBPACK_IMPORTED_MODULE_28__.stripHTML)(mvcur.options.prevTitle)),delete mvcur.options.prevTitle),mvcur.noHistory=1},highlightComment(_){if(_=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)(_)){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.addClass)(_,"VideoLayerInfo__commentHighlighting");var e=()=>{(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.addClass)(_,"VideoLayerInfo__commentHighlighting"),setTimeout((function(){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.removeClass)(_,"VideoLayerInfo__commentHighlighting")}),1e3)},i=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.getXY)(_,!0)[1];if(i<0||i>lastWindowHeight-200){var o=mvLayerWrap.scrollTop+i-50;(0,_web_lib_fx__WEBPACK_IMPORTED_MODULE_29__.animate)(mvLayerWrap,{scrollTop:o},300,e)}else e()}},showComment(_){var e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("post"+_);return e?Videoview.highlightComment(e):Videoview.moreComments(_),!1},commActionDone(commId,from,text,del,script){var node=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("post"+commId.split("_").join("video_")+from);if(node){var comment=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.domByClass)(node,"reply_wrap"),msg=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.domByClass)(node,"dld");if(!text)return(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.re)(msg),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.show)(comment),"mv"==from?(++mvcur.mvData.commcount,++mvcur.mvData.commshown):(++cur.commentsCount,++cur.commentsShown),void Videoview.updateCommentsHeader(from);if((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.hide)(comment),node.appendChild((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.se)(text)),del?("mv"==from?(--mvcur.mvData.commcount,--mvcur.mvData.commshown):(--cur.commentsCount,--cur.commentsShown),Videoview.updateCommentsHeader(from)):"mv"==from&&Videoview.recache(),script)try{eval(script)}catch(_){(0,_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_27__.logEvalError)(_,script)}"review"!==from&&Videoview.updateReplyFormPos()}},commAction(_,e,i,o,t){if("spam"!==_){var a=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("post"+e+"video_"+i+t),d=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.domByClass)(a,"post_actions"),l=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("reply_"+_+e+"video_"+i+t);(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.attr)(a,"data-action",_),l&&tooltips.hide(l),ajax.post("al_video.php",{act:_+"_comment",comment:e+"_"+i,hash:o,videoview:1,from:t},{onDone:Videoview.commActionDone.pbind(e+"_"+i,t),showProgress:_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.addClass.pbind(d,"post_actions_progress"),hideProgress:_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.removeClass.pbind(d,"post_actions_progress"),stat:[window.jsc("web/privacy.js"),"privacy.css"]})}else this.showReportVideoCommentForm(e,i)},moreComments(_){if((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.isVisible)("mv_comments_header")&&!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.hasClass)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.domFC)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("mv_comments_header")),"pr")&&!(_&&Videoview.cmp((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.domFC)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("mv_comments")).id,"post"+_)<0)){var e=Videoview.getMvData();ajax.post("al_video.php?act=video_comments",{offset:e.commshown,video:e.videoRaw,view_hash:e.itemAccessHash},{onDone:function(e,i){Videoview.receiveComms(e,i,!0,_),_&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("post"+_)&&Videoview.showComment(_),Videoview.adaptRecomsHeight()},showProgress:function(){var _=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("mv_comments_header");mvcur.mvCommInfo=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.val)(_),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.val)(_,""),(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_24__.showProgress)(_)},hideProgress:function(){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.val)("mv_comments_header",mvcur.mvCommInfo)}})}},updateCommentsHeader(_){if("review"!=_){var e=Videoview.getMvData(),i="";e.commcount>e.commshown&&(i=(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_14__.getLang)("video_show_previous_comments",e.commcount-e.commshown)),e.commcount&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.val)("mv_comments_summary",(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_14__.getLang)("video_comments_summary",e.commcount)),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.setStyle)("mv_comments_summary",{display:e.commcount?null:"none"}),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.toggleClass)("mv_comments_header","mv_comments_expanded",!i),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.toggleClass)("mv_comments_summary","mv_comments_expanded",!i),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.val)("mv_comments_header",i),Videoview.recache()}},onShowEditReply(){mvcur.replyFormShown=!0,Videoview.updateReplyFormPos(),Videoview.playerNextTimerUpdate()},onHideEditReply(){mvcur.replyFormShown=!1,mvcur.mvReplyTo=!1,Videoview.updateReplyFormPos(),setTimeout(Videoview.updateReplyFormPos,0),Videoview.playerNextTimerUpdate()},commentClick(_,e,i,o){var t;(null===(t=window.Wall)||void 0===t?void 0:t.checkReplyClick(_,e))||(mvcur.mvReplyTo=[i,o],Wall.replyTo(mvcur.post,o,i))},receiveComms(_,e,i,o){for(var t,a,d=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ce)("div",{innerHTML:_}),l=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("mv_comments"),s=Videoview.getMvData(),r=t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.domLC)(l),n=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.getXY)(t,!0)[1];a=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.domLC)(d);){for(;t&&Videoview.cmp(t.id,a.id)>0;)t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.domPS)(t);t&&!Videoview.cmp(t.id,a.id)?(l.replaceChild(a,t),t=a):(t&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.domNS)(t)?l.insertBefore(a,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.domNS)(t)):!t&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.domFC)(l)?i?l.insertBefore(a,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.domFC)(l)):(--s.commshown,d.removeChild(a)):l.appendChild(a),i||++s.commcount,++s.commshown)}o&&r&&(mvLayerWrap.scrollTop+=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.getXY)(r,!0)[1]-n),(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_23__.extend)(mvcur.mvReplyNames,e),window.updateWndVScroll&&window.updateWndVScroll(),Videoview.updateCommentsHeader(),Videoview.updateReplyFormPos()},commSaved(_){},sendComment(_,e,i){var o,t,a,d=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("reply_field"+_),l=d&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.data)(d,"composer"),s=(mvcur.mvReplyNames[(mvcur.mvReplyTo||{})[0]]||[])[1],r=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("reply_button"+_),n=(i=i||{}).stickerId;if(n)a={message:"",attach1_type:"sticker",attach1:n,sticker_referrer:i.sticker_referrer};else{if((a=l?Composer.getSendParams(l,Videoview.sendComment):{message:(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_23__.trim)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.val)(d))}).delayed)return;if(!a.attach1_type&&(!a.message||s&&!s.indexOf(a.message)))return void(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.elfocus)(d)}ajax.post("al_video.php?act=post_comment",(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_23__.extend)(null!==(o=null===(t=window.Wall)||void 0===t?void 0:t.fixPostParams(a))&&void 0!==o?o:a,{video:mvcur.mvData.videoRaw,hash:mvcur.mvData.hash,item_access_hash:mvcur.mvData.itemAccessHash,videoviewer:1,from_oid:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.domData)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.domClosest)("_submit_post_box",(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("reply_as_group"+mvcur.post)),"from-oid"),reply_to:(mvcur.mvReplyTo||{})[1]}),{onDone:function(e,i){var o,t;(Videoview.receiveComms(e,i),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.val)("mv_comments_summary",(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_14__.getLang)("video_comments_summary",mvcur.mvData.commcount)),Composer.reset(l),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.hide)("reply_warn"+_),null===(o=window.Wall)||void 0===o||o.cancelReplyTo(_),mvLayerWrap.scrollTop=9e9,mvcur.player&&mvcur.player.vars.short_video)&&(null===(t=window.Wall)||void 0===t||t.hideEditReply(mvcur.post),mvcur.uiScroll&&mvcur.uiScroll.scrollBottom());mvcur.player&&mvcur.player.vars.stats_tmr&&(0,_shared_counters_tmr__WEBPACK_IMPORTED_MODULE_38__.tmrTrackCustomGoal)("comment_in_sport_broadcast")},onFail:function(_){if(d)return(0,_web_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_26__.showTooltip)(d,{text:_,showdt:200,forcetodown:0,slide:15}),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.elfocus)(d),!0},showProgress:()=>(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_24__.lockButton)(r),hideProgress:()=>(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_24__.unlockButton)(r)})},addVideo(videoRaw,hash,obj,gid,accessHash,from){var _window$mvcur13,url,params;return(null===(_window$mvcur13=window.mvcur)||void 0===_window$mvcur13?void 0:_window$mvcur13.statusVideo)?(params={status:videoRaw,hash,from:from||"videoviewer"},url="al_video_external.php?act=external_add"):(params={video:videoRaw,hash,from:from||"videoviewer",module:Videoview.getVideoModule(),context:Videoview.getVideoContext(),info:window.Video&&Video.isInCatalog()?_video_playlist__WEBPACK_IMPORTED_MODULE_31__.default.getCurListId():""},gid&&(params.gid=gid),url="al_video.php?act=a_add"),accessHash&&(params.access_hash=accessHash),ajax.post(url,params,{onDone:function onDone(text,row,hash,shareHash){if(obj&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.val)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.domPN)(obj),text),!(0,_shared_lib_common__WEBPACK_IMPORTED_MODULE_28__.isArray)(row))try{row=eval("("+row+")")}catch(_){}window.mvcur&&(mvcur.mvData&&mvcur.mvData.afterAdd?mvcur.mvData.afterAdd(row[0]+"_"+row[1],shareHash):row&&(mvcur.mvData.addedVideo=row[0]+"_"+row[1],mvcur.mvData.addedVideoHash=hash,mvcur.mvData.addedVideoShareHash=shareHash));var videoEl=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("video_cont"+videoRaw);videoEl&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.addClass)(videoEl,"video_row_added"),"list"===from&&(0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_22__.showDoneBox)(text),Videoview.setAddButtonStateAdded()}}),!1},likeUpdate(_,e,i,o){var t;e=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_23__.intval)(e);var a=Videoview.getMvData();a.likes=e,a.liked=_,window.Likes.update(((null===(t=window.mvcur)||void 0===t?void 0:t.statusVideo)?"wall":"video")+a.videoRaw,{like_num:e,like_my:_});var d=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("mv_like_wrap"),l=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.domByClass)(d,"_count");if(l){var s=d.tt||{},r=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_23__.clone)(s.opts||{}),n=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.domByClass)(s.container,"_value"),v=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.domByClass)(s.container,"_content"),m=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.domByClass)(s.container,"_title");i&&m&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.val)(m,i),n&&(n.value=e),(0,_web_lib_fx__WEBPACK_IMPORTED_MODULE_29__.animateCount)(l,e),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.toggleClass)(d,"my_like",_),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.toggleClass)(d,"no_likes",!e),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.toggleClass)(v,"me_hidden",!_),e?o||!s.el||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.isVisible)(s.container)||i||tooltips.show(s.el,(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_23__.extend)(r,{showdt:0})):s.el&&s.hide()}},_isCurrentVideoPublished(){var _=Videoview.getMvData();return _&&_.published},addSmall(_,e,i,o){var t;Videoview._isCurrentVideoPublished()?((null===(t=window.mvcur)||void 0===t?void 0:t.mvShown)?Videoview.setAddButtonStateAdded():Videoview.addVideo(_,e,!1,i,o),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.hide)("video_add_action_link"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.addClass)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("mv_like_line"),"video_added"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.addClass)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.geByClass1)("mv_finish_add","mv_external_finish"),"selected"),Videoview.getMvData().added=!0):Videoview.showAddDialog(_)},showAddDialog(_){if(cur._recentAddedVideos=cur._recentAddedVideos||{},!cur._recentAddedVideos[_]){var e=Videoview.getMvData();(0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_25__.showBox)("al_video.php?act=show_add_video_box",{oid:e.oid,vid:e.vid},{onDone:function(i,o){o&&(i.removeButtons(),i.addButton((0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_14__.getLang)("Save"),(function(i){var t=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_23__.trim)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.val)("mv_video_add_title"));if(!t)return(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_24__.notaBene)("mv_video_add_title");ajax.post("al_video.php?act=a_add_publish_video",{title:t,video_privacy:Privacy.getValue("video_add"),videocomm_privacy:Privacy.getValue("videocomm_add"),hash:o,oid:e.oid,vid:e.vid},{showProgress:()=>(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_24__.lockButton)(i),hideProgress:()=>(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_24__.unlockButton)(i),onDone:function(){cur._recentAddedVideos[_]=!0,Videoview.hide(!0,!0),Videoview.recache(_),(0,_web_lib_video__WEBPACK_IMPORTED_MODULE_13__.showVideo)(_,mvcur.listId)}})})))}})}},share(_,e,i){if(vk.id){var o=Videoview.getMvData();return o&&!o.addedVideo&&(o.addedVideo=o.videoRaw),(o||_)&&(0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_25__.showBox)("like.php?act=publish_box",{object:"video"+(o.addedVideo||_),action_type:i},{onDone:function(){Videoview.isLayerShown()&&Videoview.playerNextTimerUpdate()}}),!1}},like(_,e){var i,o;if(vk.id){var t=Videoview.getMvData();if(t){var a="video";t.shortVideo?a="clip":(null===(i=window.mvcur)||void 0===i?void 0:i.statusVideo)&&(a="wall");var d=a+t.videoRaw,l="";if(window.Video&&Video.isInCatalog()){var s=_video_playlist__WEBPACK_IMPORTED_MODULE_31__.default.getCurListId();l=window.Videocat&&Videocat.isTop3Playlist(s)?"featured":s}var r=t.liked?"a_do_unlike":"a_do_like";ajax.post(`like.php?act=${r}`,{hash:t.likeHash,short_view:1,from:"videoview",object:d,info:l,ref:mvcur.options.module||Videoview.getVideoModule(),track_code:null===(o=mvcur.options.addParams)||void 0===o?void 0:o.track_code},{onDone:Videoview.likeUpdate.pbind(!t.liked)}),e||Videoview.playerOnLiked(!t.liked),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.toggleClass)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.geByClass1)("mv_finish_like","mv_external_finish"),"selected",!t.liked),Videoview.likeUpdate(!t.liked,t.likes+(t.liked?-1:1),null,e),Videoview.recache()}}},showEditBox(_,e,i,o){(0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_25__.showBox)("al_video.php?act=edit_box",{vid:_,oid:e,is_publish:+o},{containerClass:"video_edit",stat:[window.jsc("web/privacy.js"),"privacy.css",window.jsc("web/video.js"),"video.css","video_upload.js","video_edit.css",window.jsc("web/upload.js"),"video_showcase.css"]})},restoreVideo(_,e,i,o,t){var a=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("mv_warning");return(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.val)(a,""),(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_24__.showProgress)(a,"","pr_medium"),ajax.post("al_video.php?act=restore_video",{vid:_,oid:e,hash:i,from:o||"videoviewer"},{onDone:function(i){if("list"==o&&cur.restoreRaw&&cur.restoreRaw[e+"_"+_]){var t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)(`video_row${e}_${_}`);(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.val)(t,cur.restoreRaw[e+"_"+_]),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.removeClass)(t,"video_row_loading"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.removeClass)(t,"video_row_deleted"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.setStyle)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.geByClass1)("video_row_icon_delete",t),{opacity:.8})}(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.hide)("mv_warning"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.removeClass)("mv_info","mv_info_invisible"),cur.claimedVideoText&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.val)("video_player",cur.claimedVideoText),cur.claimedVideoText="")},onFail:function(_){return setTimeout((0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_25__.showFastBox)({title:(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_14__.getLang)("global_error"),bodyStyle:"padding: 20px; line-height: 160%;"},_).hide,5e3),!0}}),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_21__.cancelEvent)(t)},publish(_,e,i,o){o&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.hasClass)(o,"loading")||Videoview.showEditBox(e,_,null,!0)},stopStreaming(_,e){(0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_25__.showFastBox)((0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_14__.getLang)("video_are_you_sure_stop_streaming_title"),(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_14__.getLang)("video_are_you_sure_stop_streaming"),(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_14__.getLang)("box_yes"),(function(){(0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_22__.curBox)().hide(),ajax.post("al_video.php?act=live_stop_streaming",{owner_id:mvcur.mvData.oid,video_id:mvcur.mvData.vid,hash:e},{showProgress:()=>_web_ui_FlatButton__WEBPACK_IMPORTED_MODULE_43__.FlatButton.lock(_),hideProgress:()=>_web_ui_FlatButton__WEBPACK_IMPORTED_MODULE_43__.FlatButton.unlock(_),onFail:_=>((0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_25__.showFastBox)((0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_14__.getLang)("global_error"),_||(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_14__.getLang)("global_error_occured")),!0)})}),(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_14__.getLang)("box_no"))},deleteVideo(_,e,i,o,t,a,d){a&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.hasClass)(a,"loading")||ajax.post("al_video.php?act=delete_video",{vid:_,oid:e,hash:i,from:t,sure:o?1:0},{onDone:function(o,l,s,r,n){if(Videoview.recache(e+"_"+_),"sure"===o){Videoview.hidePlayer();var v=(0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_25__.showFastBox)({title:l,bodyStyle:"padding: 20px; line-height: 160%;"},s);v.setOptions({onHide:function(){Videoview.showPlayer()}}),v.removeButtons(),v.addButton(n,v.hide,"no"),v.addButton(r,(function(){v.showProgress(),Videoview.deleteVideo(_,e,i,!0,t,a,v.hide)}),"yes")}else if("result"===o&&(d&&d(s),"videoviewer"===t&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("mv_info")&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.addClass)("mv_info","mv_info_invisible"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.val)("mv_warning",s),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.show)("mv_warning"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.hide)("mv_publish")),window.Video&&Video.isInVideosList()))return!0},showProgress:!!a&&_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.addClass.pbind(a,"loading"),hideProgress:!!a&&_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.removeClass.pbind(a,"loading")})},deleteVideoOnClaim(_,e,i,o,t,a){Videoview.deleteVideo(_,e,i,o,t,a,(function(_){"videoviewer"==t&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.addClass)("mv_info","mv_info_invisible"),cur.claimedVideoText=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.val)("video_player"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.val)("video_player",_))}))},recache(_){var e;!_&&(null===(e=window.mvcur)||void 0===e?void 0:e.mvData.videoRaw)&&(_=mvcur.mvData.videoRaw);var i=window.ajaxCache;for(var o in i)o.match(/^\/al_video\.php\?act=show/)&&o.match(new RegExp("&video="+_+"([^0-9]|$)",""))&&delete i[o]},setAdult(_,e,i,o,t){ajax.post("al_video.php?act=set_adult_video",{vid:e,oid:_,hash:i,value:o},{onDone:function(_,e){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.val)(t,e),(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_24__.lockLink)(t)}})},replaceLegal(_,e,i){(0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_25__.showBox)("al_video.php?act=replace_legal_box",{oid:_,vid:e,hash:i},{params:{width:600}})},restoreOriginal(_,e,i,o){(0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_25__.showFastBox)("Confirm","restore original video?",(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_14__.getLang)("box_yes"),(function(){ajax.post("al_video.php?act=restore_original",{vid:e,oid:_,hash:i},{onDone:function(_,e){nav.reload()}})}),(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_14__.getLang)("box_no"))},spamVideo(_,e,i,o,t,a,d){o&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.addClass)(o,"loading"),ajax.post("al_video.php?act=spam_video",{vid:e,oid:_,hash:i,sure:a?1:0,from:t},{onDone:function(a,l,s,r,n){if(o&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.removeClass)(o,"loading"),Videoview.recache(_+"_"+e),"sure"==a){Videoview.hidePlayer();var v=(0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_25__.showFastBox)({title:l,bodyStyle:"padding: 20px; line-height: 160%;"},s);v.setOptions({onHide:function(){Videoview.showPlayer()}}),v.removeButtons(),v.addButton(n,v.hide,"no"),v.addButton(r,(function(){v.showProgress(),Videoview.spamVideo(_,e,i,o,t,!0,v.hide)}),"yes")}else"result"==a?d&&d():(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.val)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.domPN)(o),a)}})},licensed(_,e){var i=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("mv_licensed_info");(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.val)(i,""),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.show)(i),(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_24__.showProgress)(i),ajax.post("al_video.php?act=change_licensed",{video:mvcur.mvData.videoRaw,hash:e},{showProgress:function(){(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_24__.showProgress)(_),(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_24__.disableEl)(_)},hideProgress:function(){(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_24__.enableEl)(_),(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_24__.hideProgress)(_)},onDone:function(e,o){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.val)(_,e),i&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.val)(i,o),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.toggle)(i,!!o))}})},claimed(_,e,i,o){e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.domData)(o,"action")||e,ajax.post("al_claims.php?act=a_"+e,{type:"video",id:mvcur.mvData.vid,owner_id:mvcur.mvData.oid,claim:_,extra:i},{showProgress:function(){(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_24__.showProgress)(o),(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_24__.disableEl)(o)},hideProgress:function(){(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_24__.enableEl)(o),(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_24__.hideProgress)(o)},onDone:function(_){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.val)(o,_),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.domData)(o,"action","claim"==e?"unclaim":"claim")}})},setStyle(_,e,i){for(var o in e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)(e),mvcur.restoreStyles||(mvcur.restoreStyles={}),i)i.hasOwnProperty(o)&&(mvcur.restoreStyles[_]||(mvcur.restoreStyles[_]={}),mvcur.restoreStyles[_][o]=e.style[o],e.style[o]=i[o])},restoreStyle(_,e){e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)(e),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.setStyle)(e,mvcur.restoreStyles[_])},showVideo(videoRaw,title,html,js,desc,opt){var _window$Wall7;if(mvcur.mvShown&&videoRaw==mvcur.videoRaw)if(vk.id||html||mvcur.options.expandPlayer){if(title&&!html&&!mvcur.options.expandPlayer)return(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.val)("mv_player_box",'<div class="mv_video_unavailable_message_wrap"><div class="mv_video_unavailable_message">'+title+"</div></div>"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.show)("mv_player_box"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.hide)("mv_progress_box"),void(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.addClass)("mv_info","mv_info_invisible");opt=opt||{},cur.share_timehash=cur.share_timehash||opt.share_timehash,mvcur.post=opt.post,mvcur.maxReplyLength=opt.maxReplyLength,mvcur.maxChatReplyLength=opt.maxChatReplyLength,mvcur.maxDescriptionLength=opt.maxDescriptionLength,mvcur.mvData=opt.mvData,mvcur.videoRaw=opt.mvData.videoRaw,mvcur.commentsTpl=opt.commentsTpl,mvcur.mvMediaTypes=opt.media,mvcur.mvMediaShare=opt.share,mvcur.mvReplyNames=opt.names||{},mvcur.rmedia_types=opt.rmedia_types,mvcur.pl_is_subscribed=opt.pl_is_subscribed,mvcur.chatMode=!!opt.chatMode,mvcur.wallTpl=opt.wallTpl,mvcur.finished=!1,mvcur.preparationBlock=!1,mvcur.forcePlaylistLayout=opt.forcePlaylistLayout,opt.lang&&(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_14__.addLangKeys)(opt.lang,!0),opt.queueParams&&(mvcur.queueKey=opt.queueParams.key,mvcur.qversion=opt.qversion),null===(_window$Wall7=window.Wall)||void 0===_window$Wall7||_window$Wall7.cancelEdit(!0);var needRemin=!0;if(!mvcur.options.expandPlayer){var videoBoxWrap=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.domByClass)("mv_player_box","video_box_wrap"),playerUnavailable=opt.player_unavailable||opt.is_flv&&_shared_lib_browser__WEBPACK_IMPORTED_MODULE_12__.browser.flash<Videoview.FLASH_MIN_VERSION;if(!playerUnavailable&&opt.is_vk_player&&mvcur.player&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.domClosest)("video_box_wrap",mvcur.player.el)===videoBoxWrap)(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.attr)(videoBoxWrap,"id","video_box_wrap"+videoRaw),needRemin=!1;else if(mvcur.player&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.re)(mvcur.player.el),Videoview.isFS&&!mvcur.mvData.shortVideo&&videoBoxWrap){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.attr)(videoBoxWrap,"id","video_box_wrap"+videoRaw);var parser=new DOMParser,parsedHtml=parser.parseFromString(html,"text/html");(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.val)(videoBoxWrap,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.geByClass1)("video_box_wrap",parsedHtml).innerHTML)}else(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.val)("mv_player_box",html);(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.hide)("mv_progress_box")}if(opt.player){var container=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.domByClass)("mv_player_box","video_box_wrap");_video_initializer__WEBPACK_IMPORTED_MODULE_33__.default.initPlayer(container,opt.player.type,opt.player.params),mvcur.options.fromPreload&&(0,_shared_lib_web_stats__WEBPACK_IMPORTED_MODULE_42__.saveStatlogEvents)({name:"video_showcase_web",value:Math.round(performance.now()),keys:[cur.is_showcase?window.cur.section_id:"","init_player_direct","origin"]})}if(document.getElementById("mv_info").innerHTML=desc,opt.pl_list&&!mvcur.mvData.shortVideo&&!mvcur.mvData.is_active_live){var lists=JSON.parse(opt.pl_list);(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_23__.each)(lists,((_,e)=>{e.is_subscribed=mvcur.pl_is_subscribed,e.force_layout=mvcur.forcePlaylistLayout,_video_playlist__WEBPACK_IMPORTED_MODULE_31__.default.addList(e)})),Videoview.initPlaylistBlock(mvcur.videoRaw,mvcur.options.playlistId)}if(_video_playlist__WEBPACK_IMPORTED_MODULE_31__.default.toggleStateClasses(),Videoview.toggleRecommsColumn(!0),js){var jsExpr=`(function(){${js}})()`;try{eval(jsExpr)}catch(_){(0,_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_27__.logEvalError)(_,jsExpr)}}if(opt.publishAction){var publishAction=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("mv_publish");(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.val)(publishAction,opt.publishAction),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.show)(publishAction)}else(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.hide)("mv_publish");if(opt.livePreparationBlock)_video_playlist__WEBPACK_IMPORTED_MODULE_31__.default.removeBlock(),mvcur.preparationBlock=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.se)(opt.livePreparationBlock),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("mv_main").appendChild(mvcur.preparationBlock);else if(mvcur.chatMode){_video_playlist__WEBPACK_IMPORTED_MODULE_31__.default.removeBlock();var chatBlock=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.se)(opt.chatBlock);(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("mv_main").appendChild(chatBlock),_video_chat__WEBPACK_IMPORTED_MODULE_32__.default.init(chatBlock,{forceStickerPack:opt.chatForceStickerPack}),_video_chat__WEBPACK_IMPORTED_MODULE_32__.default.toggleStateClasses(),_video_chat__WEBPACK_IMPORTED_MODULE_32__.default.updateScroll()}(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.toggleClass)("mv_box","_has_preparation",!!mvcur.preparationBlock&&!mvcur.minimized),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.toggleClass)("mv_layer","mv_layer--vertical",!!mvcur.mvData.shortVideo),mvcur.mvData.shortVideo?window.mvLayer.setAttribute("scheme","vkcom_dark"):window.mvLayer.removeAttribute("scheme"),mvcur.mvData.shortVideo&&(_video_playlist__WEBPACK_IMPORTED_MODULE_31__.default.removeBlock(),mvcur.onReplyFormSizeUpdate=mvcur.onMediaChanged=()=>{Videoview.updateLayoutSizes()},mvcur.scrollBottom=()=>{mvcur.uiScroll.scrollBottom(0,!0)});var replyField=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("reply_field"+mvcur.post);if(replyField&&(0,_web_lib_input_utils__WEBPACK_IMPORTED_MODULE_17__.placeholderInit)(replyField,{editable:1}),mvcur.minimized&&needRemin&&Videoview.minimizePlayer(),mvcur.statusVideo){var statusCont=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("like_count"+mvcur.mvData.videoRaw);if(statusCont){var tt=statusCont.parentNode.tt;tt&&tt.container&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.re)(tt.container),statusCont.parentNode.tt&&delete statusCont.parentNode.tt}}if((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.show)("mv_player_box"),opt.player_unavailable&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("video_player")&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("video_player").focus(),window.updateWndVScroll&&window.updateWndVScroll(),(mvcur.options||{}).scroll&&(mvLayerWrap.scrollTop=mvcur.options.scroll,mvcur.options.scroll=0),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.toggleClass)("mv_info","mv_info_invisible",!!(mvcur.options.hideInfo&&mvcur.mvData.noControls&&mvcur.minimized)),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.removeClass)("mv_info","mv_info_disabled"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.hide)("mv_warning"),!mvcur.mvData.noControls){var titleWidth=!!mvcur.minimized&&mvcur.minSize.wrap.w;Videoview.setTitle(titleWidth),Videoview.initAddButton(),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.toggle)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("mv_edit_button"),mvcur.mvData.editHash&&!mvcur.mvData.hideEdit&&!mvcur.mvData.editFromDropdown)}mvcur.mvData.is_active_live||Videoview.adaptRecomsHeight(),Videoview.updateSize(),opt.queueParams&&window.stManager.add("notifier.js",(function(){Videoview.queueCheckUpdates(opt.queueParams)})),mvcur.mvData.uploaded||Videoview.recache(),mvcur.mvData.is_live&&setTimeout(Videoview.checkOtherLives.pbind(videoRaw),6e4)}else setTimeout((function(){Videoview.hide(!1,!0),(0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_22__.showDoneBox)(title)}),500)},adaptRecomsHeight(){var _,e,i=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.geByClass1)("mv_info_wrapper","mv_info"),o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.geByClass1)("mv_info_narrow_column","mv_info");if(i&&o){var t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.geByClass)("mv_recom_item",o);(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.show)(...t);var a=null===(_=document.querySelector("#mv_box"))||void 0===_?void 0:_.classList.contains("_has_recomms"),d=null===(e=document.querySelector("#mv_box"))||void 0===e?void 0:e.classList.contains("_hide_recomms"),l=document.querySelector(".VideoLayerInfo__recommended");if(!a||l){var s=t.length,r=mvcur.mvData.isMusicVideo?2:0;(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_23__.each)(t.reverse(),((_,e)=>{if(a&&!d){if((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.getSize)(l)[1]<=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.getSize)(o)[1]||s===r)return!1}else if((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.getSize)(o)[1]<=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.getSize)(i)[1]||s===r)return!1;(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.hide)(e),s--}))}}},queueCheckUpdates(_){window.mvcur&&mvcur.mvShown&&mvcur.queueKey===_.key&&(window.Notifier&&Notifier.addKey(_,Videoview.queueReceiveUpdates),setTimeout(Videoview.queueCheckUpdates.pbind(_),25e3))},queueReconnect(_){var e=Videoview.getMvData(),i=e.oid,o=e.vid,t=i+"_"+o;_?ajax.post("al_video.php?act=get_queue_params",{oid:i,vid:o,hash:e.hash},{onDone:function(_){_&&Videoview.isLayerShown(t)&&(mvcur.queueKey=_.key,Videoview.queueCheckUpdates(_))},onFail:function(){return!0}}):(mvcur.queueReconnectDelay=mvcur.queueReconnectDelay?2*mvcur.queueReconnectDelay:500,setTimeout((function(){Videoview.isLayerShown(t)&&Videoview.queueReconnect(!0)}),mvcur.queueReconnectDelay))},queueReceiveUpdates(_,e){if(window.mvcur&&mvcur.mvShown&&mvcur.queueKey===_&&e){if(e.failed)return(0,_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_27__.debugLog)("video queue failed",e),mvcur.queueKey=null,void Videoview.queueReconnect();delete mvcur.queueReconnectDelay,mvcur.queueBatchId=(mvcur.queueBatchId||0)+1,(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_23__.each)(e.events,(function(){var _=this.split("<!>"),e=_[0],o=_[1];if(e==mvcur.qversion)switch(o){case"new_reply":mvcur.chatMode||(Videoview.appendNewComment.apply(Videoview,_.slice(2)),Videoview.updateCommentsHeader(),Videoview.updateReplyFormPos());break;case"new_reply_chat":var t=+_[10],a=!!_[11];mvcur.chatMode&&_video_chat__WEBPACK_IMPORTED_MODULE_32__.default.receiveMessage.apply(_video_chat__WEBPACK_IMPORTED_MODULE_32__.default,_.slice(2)),a&&!t&&mvcur.player&&mvcur.player.pushDonation("comment",{senderId:_[4],senderName:_[5],senderPhoto:_[6],senderHref:_[7],senderSex:_[8],commentText:_[9]});break;case"edit_reply":var d=_[2],l=_[3],s=_[4],r=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("wpt"+i(d,l));r&&!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.attr)(r,"data-action")&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.val)(r,s),Videoview.updateReplyFormPos());break;case"del_reply":var n=_[2],v=_[3];if(mvcur.chatMode)_video_chat__WEBPACK_IMPORTED_MODULE_32__.default.receiveDelete(n,v);else{var m=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("post"+i(n,v));m?(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.attr)(m,"data-action")||(mvcur.mvData.commcount--,mvcur.mvData.commshown--,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.re)(m)):mvcur.mvData.commcount--,Videoview.updateCommentsHeader(),Videoview.updateReplyFormPos()}break;case"like_reply":var c=_[2],u=_[3],E=+_[4],b=+_[5],w=_[6],p=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("wpe_bottom"+i(c,u));if(p){var D=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.domByClass)(p,"_like_wrap"),h=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.domByClass)(D,"_count");(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.val)(h,E>0?E:""),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.toggleClass)(D,"no_likes",!E),b==vk.id&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.toggleClass)(D,"my_like",!w)}break;case"like":var P=_[4],M=_[5];mvcur.chatMode&&!M&&_video_chat__WEBPACK_IMPORTED_MODULE_32__.default.appendSticker("like",P);break;case"sticker":var O=_[3],g=_[4];mvcur.chatMode&&_video_chat__WEBPACK_IMPORTED_MODULE_32__.default.appendSticker(O,g);break;case"video_view":Videoview.updateLiveViewersCount(_[2]);break;case"gift":mvcur.player&&mvcur.player.pushDonation("gift",{senderId:_[2],senderName:_[3],senderPhoto:_[4],senderHref:_[5],senderSex:_[6],giftId:_[7]});break;case"end_live":var C=document.querySelector("#mv_publish .mv_stop_streaming_button");C&&(_web_ui_FlatButton__WEBPACK_IMPORTED_MODULE_43__.FlatButton.setLabel(C,(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_14__.getLang)("video_live_finished")),_web_ui_FlatButton__WEBPACK_IMPORTED_MODULE_43__.FlatButton.setDisabled(C,!0));break;case"live_midroll":if(mvcur.player){var L=_[2];mvcur.player.pushLiveMidroll(L)}break;case"set_action_button":var I=(0,_shared_lib_parse__WEBPACK_IMPORTED_MODULE_19__.parseJSON)(_[2]);mvcur.player.setActionButton(I);break;default:(0,_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_27__.debugLog)("unhandled video event",_)}}))}function i(_,e){return _+"video_"+e+"mv"}},appendNewComment(_,e,i,o,t,a,d,l,s,r,n){if(!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("post"+_+"video_"+e+"mv")){var v=Videoview.getMvData(),m=v.adminLevel,c=v.canDeleteComments,u="";m>_shared_groups_constants__WEBPACK_IMPORTED_MODULE_45__.GroupAdminLevel.USER||c||_==vk.id||i==vk.id?u+=mvcur.commentsTpl.del_reply:_!=i&&(u+=mvcur.commentsTpl.spam_reply),(m>_shared_groups_constants__WEBPACK_IMPORTED_MODULE_45__.GroupAdminLevel.MODERATOR&&_==i||o==vk.id)&&(u+=mvcur.commentsTpl.edit_reply),u=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.rs)(mvcur.commentsTpl.actions,{actions:u});var E=langDate(1e3*l,(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_14__.getLang)("global_short_date_time","raw"),0,[]),b=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.rs)(mvcur.commentsTpl.reply,{actions:u,post_oid:_,reply_id:_+"video_"+e+"mv",reply_msg_id:e,from_id:i,name:o,photo:t,href:a,message:d,date:E,to_link:s,likes:window.Likes.makeTemplate(mvcur.commentsTpl.likes,{object_raw:`${_}_${e}`})});mvcur.mvReplyNames[i]=[r,n],(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("mv_comments").insertAdjacentHTML("beforeend",b),mvcur.mvData.commcount++,mvcur.mvData.commshown++}},updateLiveViewersCount(_,e){if(void 0!==_){var i=mvcur.viewers_count||0;if((_=parseInt(_,10))!==i)mvcur.viewers_count=_,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.domByClass)("mv_views","mv_live_spectators_count_text").innerHTML=(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_14__.getLang)("video_live_N_watching",_,!0)}if(e){var o=mvcur.spectators_friends||[];if(!(JSON.stringify(o)===JSON.stringify(e)))mvcur.spectators_friends=e,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.domByClass)("mv_views","mv_live_spectators_friends").innerHTML=e.map((function(_){return(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_23__.getTemplate)("video_live_spectators_friend",_)})).reverse().join("")}},showLiveSpectatorsBox(){if(vk.id){var _=Videoview.getMvData();(0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_25__.showBox)("al_video.php?act=live_spectators_box",{owner_id:_.oid,video_id:_.vid,hash:_.hash},{params:{grey:!0,hideButtons:!0,width:638,bodyStyle:"padding: 0; border: 0;",onShow:function(){(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_21__.addEvent)(boxLayerWrap,"scroll",Videoview.onLiveSpectatorsScroll),setTimeout(Videoview.onLiveSpectatorsScroll,0)},onHide:function(){(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_21__.removeEvent)(boxLayerWrap,"scroll",Videoview.onLiveSpectatorsScroll)}},onFail:function(_){return(0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_22__.curBox)().hide(),(0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_25__.showFastBox)((0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_14__.getLang)("global_error_occured"),_),!0}})}else(0,_web_index__WEBPACK_IMPORTED_MODULE_41__.showQuickLoginBox)()},onLiveSpectatorsScroll(){var _=lastWindowHeight,e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("video_spectators_more_link");(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.isVisible)(e)&&_>(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.getXY)(e,!0)[1]&&e.click()},loadMoreLiveSpectators(_){if(!(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_24__.isButtonLocked)(_)){var e=mvcur.liveSpectatorsPerPage,i=mvcur.liveSpectatorsShown,o=mvcur.liveSpectatorsList.slice(i,i+e);if(o.length){var t=Videoview.getMvData();ajax.post("al_video.php?act=live_spectators_box",{owner_id:t.oid,video_id:t.vid,more:o.join(","),hash:t.hash},{onDone:function(o,t){var a=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("video_spectators_rows");if(a.insertAdjacentHTML("beforeend",o),mvcur.liveSpectatorsShown=i+e,mvcur.liveSpectatorsShown>=mvcur.liveSpectatorsList.length&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.hide)(_),mvcur.liveSpectatorsShown>=mvcur.liveSpectatorsLimit){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.hide)(_);var d=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("video_spectators_bottom");a.appendChild(d),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.show)(d)}},showProgress:()=>(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_24__.lockButton)(_),hideProgress:()=>(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_24__.unlockButton)(_)})}}},checkOtherLives(_){mvcur.mvShown&&!mvcur.minimized&&mvcur.videoRaw==_&&(ajax.post("al_video.php?act=live_other_videos",{video:_},{onDone:function(e){Videoview.updateOtherLives(_,e)},onFail:function(){return!0}}),setTimeout(Videoview.checkOtherLives.pbind(_),6e4))},updateOtherLives(_,e){if(mvcur.mvShown&&mvcur.videoRaw==_){var i=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.domByClass)(window.mvLayer,"mv_info_narrow_column");(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.val)(i,e),mvcur.mvData.is_active_live||Videoview.adaptRecomsHeight()}},finishLivePreparation(_){var e=Videoview.getMvData();ajax.post("al_video.php?act=live_finish_preparation",{oid:e.oid,vid:e.vid,notify_followers:(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_24__.isChecked)("mv_live_preparation_notify_followers"),hash:_},{onDone:()=>setTimeout((()=>Videoview.reload()),500)})},reload(){var _=Videoview.getMvData().videoRaw;Videoview.hide(!0,!0),Videoview.recache(_),(0,_web_lib_video__WEBPACK_IMPORTED_MODULE_13__.showVideo)(_,mvcur.listId,{autoplay:1})},onVideoShared(_,e,i){"publish"!=_||Videoview._isCurrentVideoPublished()||(Videoview.hide(!0,!0),setTimeout((function(){0==e.indexOf("video")&&(e=e.substr("video".length)),Videoview.recache(e),(0,_web_lib_video__WEBPACK_IMPORTED_MODULE_13__.showVideo)(e,i)}),100))},_onAddToCommunity(){(0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_25__.showBox)("al_video.php?act=add_to_club_pl_box",{oid:mvcur.mvData.oid,vid:mvcur.mvData.vid})},_onGetUmaInfo(){(0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_25__.showBox)("al_video.php",{act:"get_uma_restrictions",oid:mvcur.mvData.oid,vid:mvcur.mvData.vid},{params:{width:750}})},_onEdit(){var _=Videoview.getMvData(),e=_.oid,i=_.vid;Videoview.showEditBox(i,e)},_onDelete(){var _=Videoview.getMvData(),e=_.oid,i=_.vid,o=_.deleteHash;Videoview.deleteVideo(i,e,o,!1,"videoviewer")},_onExport(_){Videoview.sendVideo(_)},_onViewStats(){(0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_25__.showBox)("al_stats.php",{act:"video_stat",oid:mvcur.mvData.stats.stat_oid,vid:mvcur.mvData.stats.stat_vid},{params:{width:795,bodyStyle:"padding: 0"}})},addToClubPlaylistCheckboxChanged(_){(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_24__.checkbox)(_);var e=!1;(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_23__.each)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.geByClass)("mv_add_to_club_albums_list_item"),((_,i)=>{if((0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_24__.isChecked)(i))return e=!0,!1}));var i=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("mv_add_to_club_albums_save");(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_24__.disableButton)(i,!1),e||(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_24__.disableButton)(i,!0)},addToClubPlaylistBoxInit(_,e,i){WideDropdown.deinit("add_to_pl_club_dd"),mvcur.addToClubPl=WideDropdown.init("add_to_pl_club_dd",{defaultItems:e,noResult:(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_14__.getLang)("search_nothing_found"),introText:"choose",onChange:function(_,e){if((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.hide)("mv_add_to_club_albums"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.val)("mv_add_to_club_albums_list",""),-1==_)return(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.val)("mv_add_to_club_gid",""),void(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_24__.disableButton)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("mv_add_to_club_albums_save"),!0);(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.show)("mv_add_to_club_albums_progress"),ajax.post("al_video.php?act=a_get_club_playlists",{gid:e,oid:mvcur.mvData.oid,vid:mvcur.mvData.vid},{onDone:function(_){var i="",o=0;(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_23__.each)(_,(function(e,t){var a=t.added||1===_.length;a&&o++,i+=`<div class="mv_add_to_club_albums_list_item checkbox ${a?"on":""}" data-id="${t.id}" onclick="Videoview.addToClubPlaylistCheckboxChanged(this)">${t.title}</div>`})),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.val)("mv_add_to_club_albums_list",i),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.val)("mv_add_to_club_gid",e),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.hide)("mv_add_to_club_albums_progress"),_.length>1&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.show)("mv_add_to_club_albums");var t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("mv_add_to_club_albums_save");(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_24__.disableButton)(t,!1),o||(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_24__.disableButton)(t,!0)}})}}),setTimeout(_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.elfocus.pbind("add_to_pl_club_dd_input"),0),_.removeButtons();var o=_.addButton((0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_14__.getLang)("Save"),(function(_){var e=[];(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_23__.each)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.geByClass)("mv_add_to_club_albums_list_item"),(function(_,i){(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_24__.isChecked)(i)&&e.push((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.attr)(i,"data-id"))})),ajax.post("al_video.php?act=a_add_to_playlist",{hash:i,gid:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.val)("mv_add_to_club_gid"),oid:mvcur.mvData.oid,vid:mvcur.mvData.vid,playlists:e.length?e:"0",module:Videoview.getVideoModule(),context:Videoview.getVideoContext()},{showProgress:()=>(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_24__.lockButton)(_),hideProgress:()=>(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_24__.unlockButton)(_),onDone:function(_,e){(0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_22__.curBox)().hide(),e.added.length?(0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_22__.showDoneBox)((0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_14__.getLang)("video_add_to_playlist_added")):(0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_22__.showDoneBox)((0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_14__.getLang)("video_add_to_playlist_error"))}})}),null,!0);o.id="mv_add_to_club_albums_save",(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_24__.disableButton)(o,!0)},setTitle(_){var e=mvcur.mvData.title||"",i=mvcur.mvData.subtitle||"";_=_||590,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.val)("mv_min_title",Videoview._isCurrentVideoPublished()?(0,_shared_lib_common__WEBPACK_IMPORTED_MODULE_28__.stripHTML)(e):""),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.setStyle)("mv_min_title",{maxWidth:Math.max(0,_-70)});var o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("mv_title");o&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.val)(o,e+i),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.setStyle)(o,{display:"block"}),o.scrollHeight>o.offsetHeight&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.attr)(o,"title",(0,_shared_lib_common__WEBPACK_IMPORTED_MODULE_28__.replaceEntities)((0,_shared_lib_common__WEBPACK_IMPORTED_MODULE_28__.stripHTML)(e))),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.setStyle)(o,{display:""}))},timeTagClick(_,e,i){var o=Videoview.getPlayerObject();if(o){o.seekTo(_,!1,!0),o.play();var t=o.el.getBoundingClientRect();t.top<.5*-t.height&&(mvLayerWrap.scrollTop+=t.top),(0,_shared_lib_statlogs__WEBPACK_IMPORTED_MODULE_16__.statlogsValueEvent)("video_time_codes_seek","",e)}return(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_21__.cancelEvent)(i)},expandDescr(_){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.val)("mv_descr_field",(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.val)("mv_desc_full_text")),Videoview.cleanExpandDescrEls()},cleanExpandDescrEls(){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.re)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("mv_desc_full_text")),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.re)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("mv_descr_expand_toggle"))},setDesc(){document.getElementById("mv_descr_field").innerHTML=mvcur.mvData.desc||""},getContSize:()=>(mvcur.contSize||(mvcur.contSize=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.getSize)("mv_box")),mvcur.contSize),getContPlace(_){var e=0,i=Videoview.getContSize(),o=_.clientX-mvcur.minSize.wrap.l,t=_.clientY-mvcur.minSize.wrap.t;return t<6&&(e+=1),o>i[0]-20&&(e+=2),t>i[1]-10&&(e+=4),o<10&&(e+=8),1==e&&o>i[0]-55&&(e=0),!e&&t<25&&o<i[0]-55&&(e+=16),e},changeCursor(_){if(!Videoview.isFS){var e=Videoview.getContPlace(_),i="default";if(e&&mvcur.minimized){var o="";1&e&&(o+="n"),4&e&&(o+="s"),2&e&&(o+="e"),8&e&&(o+="w"),i=o+"-resize",16&e&&(i="move")}(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.setStyle)("mv_box",{cursor:i})}},getMinSize(){var _=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("mv_player_box")||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("mv_progress_box");(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_23__.extend)(mvcur.minSize,{wrap:{t:(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_23__.intval)(mvLayerWrap.style.top),l:(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_23__.intval)(mvLayerWrap.style.left),w:(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_23__.intval)(mvLayerWrap.style.width),h:(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_23__.intval)(mvLayerWrap.style.height)},player:{w:(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_23__.intval)(_.style.width),h:(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_23__.intval)(_.style.height)}})},startDrag(_){if(!(Videoview.isFS||_.button&&1!==_.button)){var e=Videoview.getContPlace(_);if(e){var i=Date.now();Videoview.getMinSize(),(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_23__.extend)(mvcur.minSize,{x:_.clientX,y:_.clientY}),mvcur.resizeDiff=0;var o=!e||16&e?Videoview.onMinMove:Videoview.onMinResize;mvcur.resizeMask=e;return(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.addClass)(mvLayerWrap,"mv_resizing"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.addClass)("mv_player_box","no_events"),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_21__.addEvent)(document,"mouseup",(function _(t){(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_21__.removeEvent)(document,"mouseup",_),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_21__.removeEvent)(document,"mousemove",o),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_21__.removeEvent)(document,"drag",o);var a=Date.now();return Videoview.getMinSize(),mvcur.resizeDiff<8&&a-i<400&&(16&e||1==e)&&Videoview.unminimize(),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.removeClass)(mvLayerWrap,"mv_resizing"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.removeClass)("mv_player_box","no_events"),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_21__.addEvent)("mv_box","mousemove",Videoview.changeCursor),ls.set("mv_minSize",mvcur.minSize),!1})),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_21__.addEvent)(document,"mousemove",o),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_21__.addEvent)(document,"drag",o),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_21__.removeEvent)("mv_box","mousemove",Videoview.changeCursor),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_21__.cancelEvent)(_)}}},onMinMove(_){var e=0,i=0;return _&&(i=_.clientY-mvcur.minSize.y,e=_.clientX-mvcur.minSize.x),mvcur.minSize.wrap.t+i>mvcur.minSize.ch-mvcur.minSize.wrap.h-15&&(i=mvcur.minSize.ch-mvcur.minSize.wrap.h-mvcur.minSize.wrap.t),mvcur.minSize.wrap.l+e>mvcur.minSize.cw-mvcur.minSize.wrap.w-15&&(e=mvcur.minSize.cw-mvcur.minSize.wrap.w-mvcur.minSize.wrap.l),mvcur.minSize.wrap.t+i<15&&(i=-mvcur.minSize.wrap.t),mvcur.minSize.wrap.l+e<15&&(e=-mvcur.minSize.wrap.l),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.setStyle)(mvLayerWrap,{top:mvcur.minSize.wrap.t+i+"px",left:mvcur.minSize.wrap.l+e+"px"}),mvcur.resizeDiff=Math.max(Math.abs(e),Math.max(Math.abs(i),mvcur.resizeDiff)),!!_&&(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_21__.cancelEvent)(_)},onMinResize(_){var e=mvcur.resizeMask,i=0,o=0,t=1&e||4&e?_.clientY-mvcur.minSize.y:0,a=2&e||8&e?_.clientX-mvcur.minSize.x:0;4&e&&mvcur.minSize.wrap.t+t>mvcur.minSize.ch-mvcur.minSize.wrap.h&&(t=mvcur.minSize.ch-mvcur.minSize.wrap.h-mvcur.minSize.wrap.t),1&e&&mvcur.minSize.wrap.t+t<0&&(t=-mvcur.minSize.wrap.t),2&e&&mvcur.minSize.wrap.l+a>mvcur.minSize.cw-mvcur.minSize.wrap.w-14&&(a=mvcur.minSize.cw-mvcur.minSize.wrap.w-mvcur.minSize.wrap.l-14),8&e&&mvcur.minSize.wrap.l+a<0&&(a=-mvcur.minSize.wrap.l),8&e&&(i=a,a=-a),1&e&&(o=t,t=-t),mvcur.minSize.wrap.w+a<307&&(a=307-mvcur.minSize.wrap.w,8&e&&(i=-a)),mvcur.minSize.wrap.h+t<200&&(t=200-mvcur.minSize.wrap.h,1&e&&(o=-t)),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.setStyle)(mvLayerWrap,{left:(0,_shared_lib_common__WEBPACK_IMPORTED_MODULE_28__.positive)(mvcur.minSize.wrap.l+i)+"px",top:(0,_shared_lib_common__WEBPACK_IMPORTED_MODULE_28__.positive)(mvcur.minSize.wrap.t+o)+"px",width:mvcur.minSize.wrap.w+a+"px",height:mvcur.minSize.wrap.h+t+"px"});var d={width:mvcur.minSize.player.w+a+"px",height:mvcur.minSize.player.h+t+"px"};(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.setStyle)("mv_player_box",d),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.setStyle)("mv_progress_box",d);var l=Math.abs(a)+Math.abs(t);return mvcur.resizeDiff=Math.max(l,mvcur.resizeDiff),mvcur.contSize=!1,Videoview.setTitle(mvcur.minSize.wrap.w+a),Videoview.playerOnResize(),Videoview.updateExternalVideoFinishBlock(),!1},minimize(_){var e;if(_&&(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_21__.cancelEvent)(_),mvcur.minimized)return!1;(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.show)("mv_min_header"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.addClass)("mv_info","mv_info_invisible"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.hide)("VerticalVideoLayerInfo__topControls"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.hide)("VideoLayerInfo__topControls"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.isVisible)("mv_approve")?(mvcur.needShowApprove=!0,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.hide)("mv_approve")):mvcur.needShowApprove=!1,null===(e=window.Wall)||void 0===e||e.cancelEdit(!0),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.addClass)(mvLayerWrap,"mv_minimized"),mvcur.minSize||(mvcur.minSize=ls.get("mv_minSize")),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.removeClass)(window.bodyNode,"Videoview"),layers.fullhide=!1,mvcur.minSize&&Videoview.enabledResize()&&mvcur.minSize.wrap.w||(mvcur.minSize={wrap:{w:307,h:200}}),mvcur.mvData.shortVideo&&(mvcur.minSize={wrap:{w:307,h:520}},(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.setStyle)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("mv_main"),{width:"auto"}));var i=mvcur.minSize.wrap;mvcur.minSize.player={w:i.w-12,h:i.h-34},Videoview.setStyle("mvContainer","mv_container",{height:"auto",marginTop:0,marginBottom:0,width:"auto"}),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.setStyle)(window.mvLayer,{width:"auto"}),Videoview.minimizePlayer(),window.tooltips&&tooltips.destroyAll("mv_container"),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_21__.removeEvent)(window,"resize",Videoview.onResize),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_21__.removeEvent)(document,"webkitfullscreenchange mozfullscreenchange fullscreenchange",Videoview.onFullscreenChange),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_21__.removeEvent)(document,"keydown",Videoview.onKeyDown),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_21__.addEvent)(window,"resize",Videoview.minResize),Videoview.enabledResize()?((0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_21__.addEvent)("mv_box","mousedown",Videoview.startDrag),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_21__.addEvent)("mv_box","mousemove",Videoview.changeCursor),mvcur.minDestroy=function(){(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_21__.removeEvent)("mv_box","mousedown",Videoview.startDrag),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_21__.removeEvent)("mv_box","mousemove",Videoview.changeCursor),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.setStyle)("mv_box",{cursor:"default"})}):((0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_21__.addEvent)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("mv_min_title"),"click",Videoview.unminimize),mvcur.minDestroy=function(){(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_21__.removeEvent)("mv_min_title","click",Videoview.unminimize)}),Videoview.setTitle(i.w),Videoview.minResize(),Videoview.setStyle("mvLayerWrap",mvLayerWrap,{width:mvcur.minSize.wrap.w+"px",height:mvcur.minSize.wrap.h+"px"}),mvcur.minimized=!0,layers.wraphide(),setTimeout(Videoview.playerOnResize,10);var o=window.layerQueue.count();return mvcur.noLocChange||(Videoview.backLocation(),mvcur.noHistory=1),window.layerQueue.skipVideo=!0,o&&((0,_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_27__.debugLog)("pop from minimize"),window.layerQueue.pop()),_video_playlist__WEBPACK_IMPORTED_MODULE_31__.default.toggleStateClasses(),_video_chat__WEBPACK_IMPORTED_MODULE_32__.default.toggleStateClasses(),Videoview.toggleRecommsColumn(),mvcur.preparationBlock&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.removeClass)("mv_box","_has_preparation"),Videoview.updateExternalVideoFinishBlock(),!1},isLayerShown:_=>!(!window.mvcur||!mvcur.mvShown||null!=_&&mvcur.videoRaw!=_),isMinimized:()=>!!(window.mvcur&&mvcur.mvShown&&mvcur.minimized),enabledResize:()=>!_shared_lib_browser__WEBPACK_IMPORTED_MODULE_12__.browser.mobile,minimizePlayer(){var _={width:mvcur.minSize.player.w+"px",height:mvcur.minSize.player.h+"px"};(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.setStyle)("mv_player_box",_),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.setStyle)("mv_progress_box",_),Videoview.playerOnResize()},minResize(){mvcur.minSize.ch=window.innerHeight||htmlNode.clientHeight||bodyNode.clientHeight,mvcur.minSize.cw=window.innerWidth||htmlNode.clientWidth||bodyNode.clientWidth;var _=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.getXY)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("page_layout"));void 0===mvcur.minSize.wrap.t&&(mvcur.minSize.wrap.t=mvcur.minSize.ch-mvcur.minSize.wrap.h),void 0===mvcur.minSize.wrap.l&&(mvcur.minSize.wrap.l=Math.max(String(_[0]-mvcur.minSize.player.w/2),30)),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.setStyle)(mvLayerWrap,{left:mvcur.minSize.wrap.l+"px",top:mvcur.minSize.wrap.t+"px"}),Videoview.onMinMove(),mvcur.minimized&&Videoview.getMinSize()},unminimize(_,e,i){if(mvcur.minimized){var o=window.wkcur,t=window.WkView;return o&&"story"==o.type&&window.Stories&&t.hide(!1,!0),i||window.layerQueue.push(),e||(window.layerQueue.hide(),setTimeout((function(){mvcur.noHistory=1,window.layerQueue.noHistory(),layers.wrapshow(mvLayerWrap,.7),layers.fullhide=Videoview.hide}),0)),Videoview.hidePlayer(!0),mvcur.minimized=!1,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.removeClass)(mvLayerWrap,"mv_minimized"),Videoview.restoreStyle("mvLayerWrap",mvLayerWrap),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.toggleClass)("mv_info","mv_info_invisible",!!(mvcur.options.hideInfo&&mvcur.mvData.noControls&&mvcur.minimized)),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.hide)("mv_min_header"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.show)("VerticalVideoLayerInfo__topControls"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.show)("VideoLayerInfo__topControls"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.addClass)(window.bodyNode,"Videoview"),mvcur.needShowApprove&&(mvcur.needShowApprove=!1,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.show)("mv_approve")),Videoview.restoreStyle("mvContainer","mv_container"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.setStyle)("mv_player_box",{width:"",height:""}),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.setStyle)("mv_progress_box",{width:"",height:""}),Videoview.updateSize(),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_21__.addEvent)(window,"resize",Videoview.onResize),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_21__.addEvent)(document,"webkitfullscreenchange mozfullscreenchange fullscreenchange",Videoview.onFullscreenChange),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_21__.addEvent)(document,"keydown",Videoview.onKeyDown),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_21__.removeEvent)(window,"resize",Videoview.minResize),mvcur.minDestroy&&mvcur.minDestroy(),mvcur.noLocChange||!0===_||Videoview.setLocation(),window.onBodyResize(!0),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.setStyle)(mvLayerWrap,{left:"0px",top:"0px"}),Videoview.showPlayer(!0),Videoview.setTitle(),_video_playlist__WEBPACK_IMPORTED_MODULE_31__.default.toggleStateClasses(),mvcur.chatMode&&(_video_chat__WEBPACK_IMPORTED_MODULE_32__.default.toggleStateClasses(),_video_chat__WEBPACK_IMPORTED_MODULE_32__.default.updateScroll()),mvcur.preparationBlock&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.addClass)("mv_box","_has_preparation"),Videoview.toggleRecommsColumn(),Videoview.viewScroll(),Videoview.playerOnResize(),Videoview.updateLayoutSizes(),mvcur.mvData.is_active_live&&!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.hasClass)("mv_box","_has_recomms")||Videoview.adaptRecomsHeight(),!1}},toggleSideBlock(_){var e=!1;if(mvcur.chatMode)_video_chat__WEBPACK_IMPORTED_MODULE_32__.default.toggle();else if(_video_playlist__WEBPACK_IMPORTED_MODULE_31__.default.getBlock())_video_playlist__WEBPACK_IMPORTED_MODULE_31__.default.toggle();else{var i=document.getElementById("mv_box");if(i.classList.contains("_has_recomms")){var o=i.classList.contains("_hide_recomms");i.classList.toggle("_hide_recomms",!o),e=!0}}return _web_videoview_TimeCodesList__WEBPACK_IMPORTED_MODULE_44__.TimeCodesList.isShowed()&&_web_videoview_TimeCodesList__WEBPACK_IMPORTED_MODULE_44__.TimeCodesList.close(),Videoview.updateLayoutSizes(),e&&Videoview.adaptRecomsHeight(),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_21__.cancelEvent)(_)},sendVideo(_){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Videoview.hidePlayer();var i={stat:["page.js","page.css","wide_dd.js","wide_dd.css",window.jsc("web/sharebox.js")],params:{}};_&&(i.params.width=686),(0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_25__.showBox)("like.php?act=publish_box",{object:"video"+mvcur.videoRaw,list:mvcur.listId,is_export:!0,from_time:e},i).setOptions({onHideAttempt:function(){return Videoview.showPlayer(),!0}}),Videoview.playerNextTimerUpdate()},showDD(_,e){if(clearTimeout(cur.hideShareTimer),_.blur(),!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.hasClass)(e,"mv_dd_hiding")){if((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.isVisible)(e))return(0,_web_lib_fx__WEBPACK_IMPORTED_MODULE_29__.fadeIn)(e,0);cur.ddShown&&Videoview.hideDD(0),cur.ddShown=e,setTimeout(_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_21__.addEvent.pbind(document,"click",Videoview.hideDD),1),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.show)(e)}},hideDD(_){if(_>0)cur.hideShareTimer=setTimeout(Videoview.hideDD.pbind(0),_);else{var e=cur.ddShown;e&&(-1==_?(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.hide)(e):((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.addClass)(e,"mv_dd_hiding"),(0,_web_lib_fx__WEBPACK_IMPORTED_MODULE_29__.fadeOut)(e,200,(function(){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.removeClass)(e,"mv_dd_hiding")}))),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_21__.removeEvent)(document,"click",Videoview.hideDD),cur.ddShown=!1)}},showReportVideoForm(){var _=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mvcur.mvData.oid,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:mvcur.mvData.vid,i=arguments.length>2?arguments[2]:void 0;i=i&&"function"==typeof i?i:()=>{},(0,_web_reports_reports__WEBPACK_IMPORTED_MODULE_40__.showReportForm)("video",_,e,i)},showReportVideoCommentForm(_,e){(0,_web_reports_reports__WEBPACK_IMPORTED_MODULE_40__.showReportForm)("video_comment",_,e,(()=>(0,_web_reports_reports__WEBPACK_IMPORTED_MODULE_40__.afterCommentReportSubmit)("video",_,e)))},reportComment(_,e,i){window.stManager.add([window.jsc("web/privacy.js"),"privacy.css"],(function(){return Privacy.show(_,e,"report_"+i)}))},setNotInterested(_,e,i){ajax.post("clips.php?act=not_interested",{owner_id:_,video_id:e,hash:i},{onDone:i=>{if(i){var o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)(`post${_}_${e}`);o&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.addClass)(o,"ShortVideoPost--hidden"),(0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_22__.showDoneBox)((0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_14__.getLang)("video_clips_not_interested_success")),window.revertLastInlineVideo&&(0,_web_lib_video__WEBPACK_IMPORTED_MODULE_13__.revertLastInlineVideo)())}}})},descTT:_=>(0,_web_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_26__.showTooltip)(_,{text:(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_14__.getLang)("video_edit_desc"),black:1,shift:[0,7,0],showdt:0,appendEl:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.domPN)(_)}),viewScroll(){var _=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.getXY)("mv_main",!0)[1],e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.getSize)("mv_player_box")[1],i=_-6;i=i<0?-i:0,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.toggleClass)("VideoLayerInfo__topControls","VideoLayerInfo__topControls--fixed",i>0),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.toggleClass)("mv_pl_prev","fixed",i>0),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.toggleClass)("mv_pl_next","fixed",i>0),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.toggleClass)("mv_top_pl_toggle","hidden",i>e),mvcur.scrolledAway=i>e/3,Videoview.playerNextTimerUpdate(),Videoview.updateReplyFormPos()},updateReplyFormPos(){var _;if(!(null===(_=mvcur.mvData)||void 0===_?void 0:_.shortVideo)){var e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("mv_reply_form"),i=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("mv_comments_wrap"),o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.getSize)(e),t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("mv_reply_form_wrap"),a=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.clientHeight)(),d=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.getXY)(mvLayerWrap)[1],l=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.getXY)("mv_box")[1]-d,s=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.getXY)(i)[1]-d,r=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.getSize)(i)[1];a<l+(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.getSize)("mv_box")[1]&&r>0?((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.addClass)(e,"mv_reply_form_fixed"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.setStyle)(e,{bottom:Math.min(a-s-o[1],0)+"px"}),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.setStyle)(t,{width:o[0]+"px",height:o[1]+"px"})):((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.removeClass)(e,"mv_reply_form_fixed"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.setStyle)(e,{bottom:null}),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.setStyle)(t,{width:null,height:null}))}},editInline(_){if(!(_&&"A"==_.target.tagName||!window.mvcur||mvcur.mvEditing)&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("mv_description")){var e=mvcur.videoRaw,i=mvcur.mvShown,o=mvcur.mvData,t=function(_){if(mvcur.mvShown&&mvcur.videoRaw==e&&mvcur.mvShown==i&&!mvcur.mvEditing){Videoview.cleanExpandDescrEls(),mvcur.mvEditing=e;var o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ce)("div",{id:"mv_edit_text_wrap",innerHTML:`\n          <textarea id="mv_edit_text" onkeydown="onCtrlEnter(event, Videoview.saveInline)" onkeyup="checkTextLength(mvcur.maxDescriptionLength, this, ge('mv_caption_warn'));" placeholder="${(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_14__.getLang)("video_edit_desc_intro")}">${_}</textarea>\n          <div id="mv_caption_warn"></div>\n        `});(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("mv_description").appendChild(o);var t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("mv_edit_text");(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.setStyle)(t,{width:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("mv_description").offsetWidth+"px"}),(0,_web_lib_input_utils__WEBPACK_IMPORTED_MODULE_17__.placeholderInit)(t),(0,_web_lib_layout_utils__WEBPACK_IMPORTED_MODULE_18__.autosizeSetup)(t,{minHeight:26,addHeight:2}),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_21__.addEvent)(t,"keyup change",Videoview.onResize),setTimeout((function(){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.show)(o),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.elfocus)(t),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_21__.addEvent)(t,"blur",Videoview.saveInline),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.hide)("mv_descr_field")}),1)}};!o.desc?t(""):ajax.post("al_video.php?act=edit_desc",{oid:o.oid,vid:o.vid},{onDone:t,progress:"mv_inline_edit_pr"})}},cancelInline(){mvcur.mvEditing=!1,(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_21__.removeEvent)("mv_edit_text","blur"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.show)("mv_descr_field"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.re)("mv_edit_text_wrap")},saveInline(){if(mvcur.mvEditing){(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_21__.removeEvent)("mv_edit_text","blur");var _=mvcur.mvEditing,e=Videoview.getMvData(),i=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("mv_edit_text");ajax.post("al_video.php?act=save_desc",{oid:e.oid,vid:e.vid,hash:e.editHash,desc:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.val)(i)},{onDone:function(o,t){if(e.desc=o,Videoview.isLayerShown(_)){mvcur.mvEditing=!1;var a=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("mv_descr_field");(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.val)(a,o||`<span class="mv_desc_edit">${(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_14__.getLang)("video_edit_desc")}</span>`),a.onmouseover=o?Videoview.descTT.pbind(a):null,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.show)(a),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.removeData)(i),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.re)("mv_edit_text_wrap"),Videoview.setTimeCodes(t),Videoview.onResize()}},progress:"mv_inline_edit_pr"})}},onExternalVideoEnded(_){Videoview.logViewedPercentage(),_=_||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.domPN)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("video_player"));var e=_slicedToArray((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.getSize)(_),2),i=e[0],o=e[1],t=(Videoview.getNextVideosData()||[])[0],a=!!window.CanvasRenderingContext2D,d=Videoview.getMvData();if(_&&d&&d.authorPhoto&&d.authorHref&&!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("mv_external_finish")){var l="";if(t&&i>=400&&o>=300)l=`\n        <div id="mv_finish_next" class="mv_finish_next" onclick="Videoview.onExternalVideoNext(true)">\n          <div class="mv_finish_next_caption">${(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_14__.getLang)("video_player_next_title")}</div>\n          <div class="mv_finish_next_thumb" style="background-image: url(${t.thumb})"></div>\n          <div class="mv_finish_next_timer">\n            <canvas class="mv_finish_next_timer_canvas" width="100" height="100"></canvas>\n            <div class="mv_finish_next_timer_play mv_finish_icon"></div>\n          </div>\n          <div class="mv_finish_next_info">\n            <div class="mv_finish_next_title">${t.title}</div>\n            <div class="mv_finish_next_views">${t.views}</div>\n          </div>\n          <div class="mv_finish_next_cancel mv_finish_icon" onclick="Videoview.onExternalVideoNextCancel(event)"></div>\n        </div>\n      `;else if(!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("video_yt"))return;var s=Videoview.getSuggestionsData(),r="onSuggestionClick";s&&s.length||(s=Videoview.getNextVideosData(),r="onVideoNext");var n="";s&&s.length&&i>=580&&o>=300&&(n=`<div id="mv_finish_suggestions" class="mv_finish_suggestions ${l?"hidden":""}">`,(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_23__.each)(s,((_,e)=>{n+=`\n          <a class="mv_finish_suggestions_item" onclick="videoCallback(['${r}', '${e.vid}']); return false;" href="/video${e.vid}" title="${e.title}">\n            <div class="mv_finish_suggestions_item_thumb" style="background-image: url(${e.thumb})"></div>\n            <div class="mv_finish_suggestions_item_title">${e.title}</div>\n            <div class="mv_finish_suggestions_item_views">${e.views}</div>\n          </a>\n        `})),n+="</div>");var v=!1,m=!1;if(!l&&!n){if(d.noControls||d.nolikes)return;i>250&&o>200?v=!0:m=!0}var c=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.se)(`\n      <div class="mv_external_finish" id="mv_external_finish" onclick="Videoview.onExternalVideoBgClick(this, event)">\n        <div class="mv_finish_header">\n          <div id="mv_finish_subscribe" class="fl_r mv_finish_subscribe ${d.subscribed?"mv_finish_subscribed":""}">\n            <button id="mv_finish_subscribe_btn" class="mv_finish_subscribe_btn fl_l" onclick="Videoview.onExternalVideoSubscribe()">${(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_14__.getLang)(d.subscribed?"video_view_subscribed_msg":"video_view_subscribe_to_author")}</button>\n            <a href="${d.authorHref}" target="_blank" rel="noopener" class="fl_r"><img class="mv_finish_author_img" src="${d.authorPhoto}"></a>\n          </div>\n          <div id="mv_finish_title" class="mv_finish_title" style="${Videoview.isMinimized()?"display:none":""}">${d.title}</div>\n        </div>\n        <div id="mv_finish_actions" class="mv_finish_actions ${v?"mv_finish_actions_extended":""} ${d.can_add?"":"mv_finish_actions_cant_add"} ${m?"mv_finish_actions_no_content":""}">\n          <div class="mv_finish_like ${d.liked?"selected":""}" onclick="Videoview.onExternalVideoLike()">\n            <div class="mv_finish_like_icon mv_finish_icon"></div>\n            <div class="mv_finish_liked_icon mv_finish_icon"></div>\n            <div class="mv_finish_like_text">${(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_14__.getLang)("video_i_like")}</div>\n          </div>\n          <div class="mv_finish_share" onclick="Videoview.onExternalVideoShare()">\n            <div class="mv_finish_share_icon mv_finish_icon"></div>\n            <div class="mv_finish_share_text">${(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_14__.getLang)("video_share_with_friends")}</div>\n          </div>\n          <div class="mv_finish_add ${d.added?"selected":""}" onclick="Videoview.onExternalVideoAdd()">\n            <div class="mv_finish_add_icon mv_finish_icon"></div>\n            <div class="mv_finish_added_icon mv_finish_icon"></div>\n          </div>\n        </div>\n        ${l}\n        ${n}\n      </div>\n    `);d.canSubscribe||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.re)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.geByClass1)("mv_finish_subscribe",c)),(d.noControls||d.nolikes)&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.re)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.geByClass1)("mv_finish_actions",c)),_.appendChild(c),a&&t&&l&&(window.focus(),mvcur.nextTimer={ctx:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.geByClass1)("mv_finish_next_timer_canvas",c).getContext("2d"),nextTimerReset:function(){clearTimeout(mvcur.nextTimer.timeout),mvcur.nextTimer.ctx.clearRect(0,0,100,100),mvcur.nextTimer.started=null},nextTimerStart:function(){mvcur.nextTimer.started||(mvcur.nextTimer.started=Date.now(),Videoview.onExternalVideoTimer())}},mvcur.nextTimer.ctx.lineWidth=6,mvcur.nextTimer.ctx.lineCap="round",mvcur.nextTimer.ctx.strokeStyle="#fff",mvcur.nextTimerStopped||mvcur.nextTimer.nextTimerStart())}},onExternalVideoTimer(){if(window.mvcur&&mvcur.nextTimer&&mvcur.nextTimer.ctx&&mvcur.nextTimer.started){var _=Math.min(1,Math.max(0,(Date.now()-mvcur.nextTimer.started)/1e4)),e=mvcur.nextTimer.ctx;e.clearRect(0,0,100,100),e.beginPath(),e.arc(50,50,47,-Math.PI/2,-Math.PI/2+2*Math.PI*_),e.stroke(),_<1?mvcur.nextTimer.timeout=setTimeout(Videoview.onExternalVideoTimer,20):Videoview.onExternalVideoNext()}},onExternalVideoNext(_){Videoview.removeExternalVideoFinishBlock(),mvcur.nextTimer=null,_video_playlist__WEBPACK_IMPORTED_MODULE_31__.default.nextVideo(),Videoview.sendPlayerStats(_?6:5,4)},onExternalVideoNextCancel(_){_&&_.stopPropagation(),clearTimeout(mvcur.nextTimer.timeout),mvcur.nextTimer=null,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("video_yt")?((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.re)("mv_finish_next"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.removeClass)("mv_finish_suggestions","hidden")):(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.re)("mv_external_finish")},onExternalVideoBgClick(_,e){e.target===_&&Videoview.removeExternalVideoFinishBlock()},onExternalVideoLike(){videoCallback(["onLike",4]),Videoview.playerOnLiked()},onExternalVideoShare(){if(Videoview.isFS){var _=Videoview.getPlayerObject();_&&_.toggleFullscreen&&_.toggleFullscreen()}videoCallback(["onShare",4])},onExternalVideoAdd(){var _=Videoview.getMvData();if(_){_.added?videoCallback(["onRemove"]):videoCallback(["onAdd",_.videoRaw,_.add_hash,4]);var e=Videoview.getPlayerObject();e.onAdded&&e.onAdded()}},onClipSubscribe(){var _=Videoview.getMvData();if(_){var e=!_.subscribed;Videoview.subscribeToAuthor(e,{from:"videoview",subscribeBlockId:"VerticalVideoLayerInfo__subscribe",subscribedCssClass:"VerticalVideoLayerInfo__subscribe--subscribed"})}},showSubscribeTooltip(){var _=Videoview.getMvData();if(_){var e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.geByClass1)("VerticalVideoLayerInfo__subscribe"),i=_.subscribed;(0,_web_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_26__.showTooltip)(e,{text:function(){return(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_14__.getLang)(i?"video_view_subscribed_msg":"video_view_subscribe_to_author")},black:1,needLeft:1})}},onExternalVideoSubscribe(){var _=Videoview.getMvData();if(_){var e=!_.subscribed;Videoview.subscribeToAuthor(e,{from:"external_player",subscribeBlockId:!1}),Videoview.sendPlayerStats(e?9:10,4)}},updateExternalVideoFinishBlock(){var _=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("mv_external_finish");if(_){var e=_slicedToArray((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.getSize)(_),2),i=e[0],o=e[1];((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.isVisible)("mv_finish_next")&&(i<400||o<300)||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.isVisible)("mv_finish_suggestions")&&(i<580||o<300)||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.hasClass)("mv_finish_actions","mv_finish_actions_extended")&&(i<250||o<200))&&(mvcur.nextTimer&&Videoview.onExternalVideoNextCancel(),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.re)("mv_finish_next"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.re)("mv_finish_suggestions"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.removeClass)("mv_finish_actions","mv_finish_actions_extended"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.addClass)("mv_finish_actions","mv_finish_actions_no_content")),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.toggle)("mv_finish_title",!Videoview.isMinimized()),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.toggleClass)("mv_finish_subscribe","mv_finish_subscribe_min",i<500)}},removeExternalVideoFinishBlock(){var _;(null===(_=window.mvcur)||void 0===_?void 0:_.nextTimer)&&Videoview.onExternalVideoNextCancel(),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_11__.re)("mv_external_finish")},logViewedPercentage(){var _;if((null===(_=window.mvcur)||void 0===_?void 0:_.mvData)&&mvcur.mvData.videoRaw&&mvcur.mvData.duration){var e=mvcur.mvData,i=e.videoRaw,o=e.duration,t=Date.now(),a=mvcur.viewStartedTimestamp;if(!a)return!1;delete mvcur.viewStartedTimestamp;var d=Math.min(Math.round((t-a)/1e3),o);ajax.post("al_video.php?act=a_viewed_percentage",{video_raw:i,viewed_time:d,duration:o})}},toggleRecommsColumn:_=>{var e=Videoview.getMvData();if(e&&!e.shortVideo&&e.autoplay_other_videos){if(_){var i=document.querySelector(".VideoLayerInfo__recommendedTitleAction");i&&i.classList.toggle("_active",_video_playlist__WEBPACK_IMPORTED_MODULE_31__.default.isAutoplayEnabled())}var o=!!_video_playlist__WEBPACK_IMPORTED_MODULE_31__.default.getBlock(),t=Videoview.isMinimized();document.getElementById("mv_box").classList.toggle("_has_recomms",!o&&!mvcur.chatMode&&!t)}},openTimeCodesList:_=>{Videoview.isMinimized()&&(Videoview.unminimize(),_=!0),_video_playlist__WEBPACK_IMPORTED_MODULE_31__.default.isCollapsed()||_video_playlist__WEBPACK_IMPORTED_MODULE_31__.default.toggle(!1);var e=document.getElementById("mv_box");(null==e?void 0:e.classList.contains("_has_recomms"))&&e.classList.add("_hide_recomms"),_web_videoview_TimeCodesList__WEBPACK_IMPORTED_MODULE_44__.TimeCodesList.draw(_),Videoview.onResize(),(0,_shared_lib_statlogs__WEBPACK_IMPORTED_MODULE_16__.statlogsValueEvent)("video_time_codes_open","")},updateCurrentTimeCode:_=>{_web_videoview_TimeCodesList__WEBPACK_IMPORTED_MODULE_44__.TimeCodesList.updateCurrentTimeCode(_)}}},287503:(_,e,i)=>{"use strict";i.d(e,{GroupAdminLevel:()=>o});var o={USER:0,MODERATOR:1,EDITOR:2,ADMINISTRATOR:3,HOST:4,EVENT_CREATOR:5,CREATOR:6,PSEUDO_LEVEL_ADVERTISER:100}},683609:(_,e,i)=>{"use strict";function o(_,e){var i;_=Math.max(_,0);var o=Math.floor(_%60);i=o<10?"0"+o:o;var t=(_=Math.floor(_/60))%60;return i=t+":"+i,((_=Math.floor(_/60))>0||e)&&(t<10&&(i="0"+i),i=_+":"+i),i}i.d(e,{formatTime:()=>o})},746065:(_,e,i)=>{"use strict";i.d(e,{ShortVideoStub:()=>v});var o=i(570655),t=i(785893),a=i(667294),d=i(659397),l=i(545334),s=i(661737),r=i(376624),n=i.n(r),v=function(_){var e=_.additionalCssClass,i=_.title,r=_.text,v=_.linkAndroid,m=_.linkIOS,c=_.qrLinkAndroid,u=_.qrLinkIOS,E=_.iphoneAriaLabel,b=_.androidAriaLabel,w=_.popupTitle,p=_.popupText,D=(0,o.__read)((0,a.useState)(!1),2),h=D[0],P=D[1],M=(0,o.__read)((0,a.useState)(!1),2),O=M[0],g=M[1],C=(0,d.classNames)("ShortVideoStub",e||""),L=n().createQR(c,235,"",{isShowLogo:!0}),I=n().createQR(u,235,"",{isShowLogo:!0});return(0,t.jsxs)(a.Fragment,{children:[(0,t.jsxs)("div",(0,o.__assign)({className:C},{children:[(0,t.jsx)("div",{className:"ShortVideoStub__title",dangerouslySetInnerHTML:{__html:i}},void 0),(0,t.jsx)("div",{className:"ShortVideoStub__text",dangerouslySetInnerHTML:{__html:r}},void 0),(0,t.jsxs)("div",(0,o.__assign)({className:"ShortVideoStub__links"},{children:[(0,t.jsxs)("div",(0,o.__assign)({className:"ShortVideoStub__row"},{children:[(0,t.jsx)("a",{className:"ShortVideoStub__link ShortVideoStub__link--iphone",target:"_blank",href:m,"aria-label":E},void 0),(0,t.jsx)("div",(0,o.__assign)({className:"ShortVideoStub__qrLink","aria-label":E,onClick:function(){P(!0)}},{children:(0,t.jsx)(s.default,{},void 0)}),void 0)]}),void 0),(0,t.jsxs)("div",(0,o.__assign)({className:"ShortVideoStub__row"},{children:[(0,t.jsx)("a",{className:"ShortVideoStub__link ShortVideoStub__link--android",target:"_blank",href:v,"aria-label":b},void 0),(0,t.jsx)("div",(0,o.__assign)({className:"ShortVideoStub__qrLink ShortVideoStub__qrLink--android","aria-label":b,onClick:function(){g(!0)}},{children:(0,t.jsx)(s.default,{},void 0)}),void 0)]}),void 0)]}),void 0)]}),void 0),h&&(0,t.jsx)(l.ShortVideoStubPopup,{onClose:function(){P(!1)},qrSvg:I,text:p,title:w},void 0),O&&(0,t.jsx)(l.ShortVideoStubPopup,{onClose:function(){g(!1)},qrSvg:L,text:p,title:w},void 0)]},void 0)}},545334:(_,e,i)=>{"use strict";i.d(e,{ShortVideoStubPopup:()=>s});var o=i(570655),t=i(785893),a=i(667294),d=i(730365),l=i(733024),s=function(_){var e=_.title,i=_.text,s=_.qrSvg,r=_.onClose;return(0,a.useEffect)((function(){return document.body.classList.add("layers_shown"),function(){document.body.classList.remove("layers_shown")}}),[]),(0,t.jsx)(d.default,(0,o.__assign)({onClose:r,disableBodyScroll:!0},{children:(0,t.jsxs)("div",(0,o.__assign)({className:"ShortVideoStubPopup"},{children:[(0,t.jsx)("div",(0,o.__assign)({className:"ShortVideoStubPopup__close",onClick:r},{children:(0,t.jsx)(l.default,{},void 0)}),void 0),(0,t.jsx)("div",{className:"ShortVideoStubPopup__qrCode",dangerouslySetInnerHTML:{__html:s||""}},void 0),(0,t.jsx)("div",(0,o.__assign)({className:"ShortVideoStubPopup__title"},{children:e}),void 0),(0,t.jsx)("div",{className:"ShortVideoStubPopup__text",dangerouslySetInnerHTML:{__html:i}},void 0)]}),void 0)}),void 0)}},84786:(_,e,i)=>{"use strict";i.r(e);var o=i(570655),t=i(785893),a=i(973935),d=i(481117),l=i(746065),s=i(233472),r=i(340154),n=i(619103),v=i(656675),m=i(912998),c=i(780223),u=i(529290);window.Videoview=window.videoview=s.default,window.VideoPlaylist=r.default,window.TimeCodesList=u.TimeCodesList,window.VideoChat=n.default,window.VideoInitializer=v.default,window.VideoDonate=m.default,window.VideoLiveBlacklistBox=c.default,(0,d.registerReactApplication)("AnonymShortVideoStub",(function(_){a.render((0,t.jsx)(l.ShortVideoStub,(0,o.__assign)({},_),void 0),document.getElementById(d.rootId+"AnonymShortVideoStub"))}));try{window.stManager.done("videoview.js")}catch(_){}},465864:(_,e,i)=>{"use strict";i.d(e,{parseLikeObjectId:()=>t,likePostObjectId:()=>a,likeReplyObjectId:()=>d,getElementLikeButtonCount:()=>l,getElementLikeButtonIcon:()=>s,getElementLikeButtonLabel:()=>r});var o=i(570655);function t(_){var e=_.match(/^([a-z_]+)([0-9\-_]+)$/);if(!e)return null;var i=(0,o.__read)(e,3);return{objectType:i[1],objectId:i[2]}}var a=function(_){return"wall"+_},d=function(_){return"wall_reply"+_},l=function(_){var e;return null!==(e=null==_?void 0:_.querySelector(".like_button_count, ._like_button_count"))&&void 0!==e?e:void 0},s=function(_){var e;return null!==(e=null==_?void 0:_.querySelector(".like_button_icon, ._like_button_icon"))&&void 0!==e?e:void 0},r=function(_){var e;return null!==(e=_.querySelector(".like_button_label, ._like_button_label"))&&void 0!==e?e:void 0}},228555:(_,e,i)=>{"use strict";i.d(e,{MutePopup:()=>r});var o=i(570655),t=i(785893),a=i(481117),d=i(733024),l=i(928396),s=i(288420),r=function(_){var e=_.faqLink,i=_.title,r=_.text,n=_.buttonText;return(0,t.jsxs)("div",(0,o.__assign)({className:"MutePopup"},{children:[(0,t.jsx)("div",(0,o.__assign)({className:"MutePopup__header box_title_wrap box_title_wrap--transparent"},{children:(0,t.jsx)("div",(0,o.__assign)({className:"box_x_button",role:"button",onClick:function(){(0,a.destroyComponentInBox)()}},{children:(0,t.jsx)(d.default,{},void 0)}),void 0)}),void 0),(0,t.jsxs)("div",(0,o.__assign)({className:"MutePopup__content box_body"},{children:[(0,t.jsx)("div",(0,o.__assign)({className:"MutePopup__stubIcon"},{children:(0,t.jsx)(l.default,{},void 0)}),void 0),(0,t.jsx)("div",(0,o.__assign)({className:"MutePopup__title"},{children:i}),void 0),(0,t.jsx)("div",(0,o.__assign)({className:"MutePopup__text"},{children:r}),void 0),(0,t.jsx)(s.default,(0,o.__assign)({appearance:"primary",className:"MutePopup__action",onClick:function(){window.open(e,"_blank")}},{children:n}),void 0)]}),void 0)]}),void 0)}}}]);try{stManager.done("dist/7a9addc644f7a4121c8aeea545d0a0f4.1f58e5af4f1ba36fb0a4.js")}catch(_){}